"use strict";!function(){var e=!0;$(function(){new n($(".preloader")),$.each($(".site__header"),function(){new i($(this))}),$.each($("[data-href]"),function(){new t($(this))}),$.each($(".slides"),function(){new o($(this))}),$.each($(".site__content-full"),function(){new s($(this))}),$.each($(".site_index"),function(){new a($(this))})});var n=function(e){var n=this,i=$(window),t=e,o=$("body"),s=function(){i.on({load:function(){d()}})},a=function(){o[0].preloader=n,s()},d=function(){t.addClass("preloader_loaded"),setTimeout(function(){t.remove(),$(".site").addClass("site__loaded")},500)};a()},i=function(n){var i=this,t=n,o=$(window),s=$("html"),a=t.find(".site__menu"),d=($(".site__content"),!1),c=!1,l=!0,r=0,h=t.find(".site__menu-btn"),u=0,f=function(){o.on({load:function(){u=o.width()},resize:function(){u!=o.width()&&(u=o.width()+1,o.width()>=1024&&(a.scrollTop(0),v(h)))},scroll:function(){d=o.scrollTop()>=2*t.innerHeight(),o.scrollTop()>=t.innerHeight()+20?l&&(l=!1,t.addClass("site__header_hide")):(l=!0,t.removeClass("site__header_hide")),d?t.hasClass("site__header_hide")&&setTimeout(function(){t.addClass("site__header_fixed"),t.removeClass("site__header_hide")},100):o.scrollTop()<=3*t.innerHeight()&&(t.removeClass("site__header_fixed"),t.removeClass("site__header_hidden")),o.scrollTop()<=10&&(t.removeClass("site__header_fixed"),t.removeClass("site__header_hidden"))},DOMMouseScroll:function(e){var n=e.originalEvent.detail;if(n){var i=n>0?1:-1;_(i)}i<0?c=!0:setTimeout(function(){c=!1},300)},mousewheel:function(e){var n=e.originalEvent.wheelDelta;if(n){var i=n>0?-1:1;_(i)}i<0?c=!0:setTimeout(function(){c=!1},300)}}),$(window).scroll(function(e){var n=$(this).scrollTop();if(n>r){_(1);var i=1}else{_(-1);var i=-1}r=n,i<0?c=!0:setTimeout(function(){c=!1},300)}),h.on({click:function(){$(this).hasClass("opened")?v($(this)):w($(this))}})},_=function(n){n>0&&!t.hasClass("site__header_hidden")&&!h.hasClass("opened")&&d&&!c&&t.addClass("site__header_hidden"),n<0&&t.hasClass("site__header_hidden")&&!h.hasClass("opened")&&d&&c&&e&&t.removeClass("site__header_hidden")},v=function(e){s.css({overflowY:"auto"}),e.removeClass("opened"),t.removeClass("opened-menu")},m=function(){t[0].obj=i,f()},w=function(e){e.addClass("opened"),t.addClass("opened-menu"),s.css({overflowY:"hidden"})};m()},t=function(n){var i=this,t=n,o=t,s=$("html"),a=$(window),d=$("html, body"),c=$(".site__header"),l=($(".popup__cookies-info"),function(){a.on({resize:function(){},scroll:function(){}}),o.on({click:function(){var n=$(this),i=n.attr("data-href"),t=$("."+i).offset().top;return $(".site__menu-nav_anchors a").removeClass("active"),n.addClass("active"),d.stop(!0,!1),d.animate({scrollTop:t},{duration:500,progress:function(){e=!1,c.addClass("site__header_hidden")},complete:function(){setTimeout(function(){e=!1},200),setTimeout(function(){e=!0},500)}}),s.css({overflowY:"auto"}),c.find(".site__menu-btn").removeClass("opened"),c.removeClass("opened-menu"),!1}})}),r=function(){t[0].obj=i,l()};r()},o=function(e){var n=this,i=e,t=$(window),o=function(){t.on({load:function(){s()},scroll:function(){s()}})},s=function(){var e=t.scrollTop(),n=t.height(),o=i.offset().top,s=o-e,a=1-s/n;a>.5&&(i.hasClass("slides_active")||i.addClass("slides_active"))},a=function(){i[0].slides=n,o()};a()},s=function(e){var n=this,i=e,t=$(window),o=$(".site__header"),s=0,a=function(){t.on({load:function(){s=t.width(),c()},resize:function(){s!=t.width()&&(s=t.width()+1,c())}})},d=function(){i[0].obj=n,a()},c=function(){var e=t.height();i.css({"min-height":e-o.innerHeight()-$(".site__main-title").outerHeight(!0)}),i.find(".contact-us").length&&t.width()>=1024?i.css({"min-height":""}):i.css({"min-height":e-o.innerHeight()-$(".site__main-title").outerHeight(!0)})};d()},a=function(e){var n=this,i=e,t=$(window),o=($("html, body"),function(){t.on({load:function(){setTimeout(function(){s()},100)}})}),s=function(){var e=window.location.hash.replace("#","");if(e){var n=$("."+window.location.hash.replace("#",""));n.length&&window.scrollTo(0,parseInt(n.offset().top))}},a=function(){i[0].obj=n,o()};a()}}();
"use strict";!function(){var t=!0;$(function(){$.each($(".checkout"),function(){new e($(this))})});var e=function(e){var o=this,i=e,n=$("html, body"),c=$(".site__header"),s=i.find('.checkout__show-billing input[type="checkbox"]'),u=i.find(".checkout__info-billing"),h=function(){s.on({change:function(){0==s.prop("checked")?(u.height(u.find(">.checkout__info").outerHeight(!0)),u.addClass("visible"),n.stop(!0,!1),n.animate({scrollTop:u.offset().top-$(".checkout__title").outerHeight(!0)},{duration:500,progress:function(){t=!1,c.addClass("site__header_hidden")},complete:function(){setTimeout(function(){t=!1},200),setTimeout(function(){t=!0},500)}})):(u.height(0),u.removeClass("visible"),n.stop(!0,!1),n.animate({scrollTop:i.offset().top-$(".checkout__title").outerHeight(!0)},{duration:500,progress:function(){t=!1,c.addClass("site__header_hidden")},complete:function(){setTimeout(function(){t=!1},200),setTimeout(function(){t=!0},500)}}),u.find("[data-required]").each(function(){var t=$(this);t.removeClass("not-touched"),t.removeClass("not-valid")}))}})},a=function(){i[0].obj=o,h()};a()}}();
!function(){$(function(){$("select").each(function(){new e({obj:$(this),optionType:1,showType:2})})});var e=function(e){var t,n,i=this,o=e.obj,s=e.optionType||0,c=e.showType||0,a=e.visible||5,l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),p=$('<span class="websters-select__item"></span>'),d=$('<div class="websters-select"></div>'),r=$(window),f=($("body"),!1),u=function(){var e="";o.css({opacity:0}),o.wrap(d),d=o.parent(),d.append('<div class="websters-select__arrow"></div>'),o.before(p),o.find("option").each(function(){var t=$(this);"selected"==t.attr("selected")&&(e=t.text())}),""==e&&(e=o.find("option").eq(0).text()),p.text(e)},h=function(){f=!1,c?1==c?t.stop(!0,!1).slideUp(300,function(){t.remove()}):2==c&&t.stop(!0,!1).fadeOut(300,function(){t.remove()}):t.css({display:"none"}),d.removeClass("websters-select_opened")},v=function(){o[0].obj=i,u(),w(),b()},b=function(){o.on("change",function(){p.text($(this).find("option:selected").text())}),1!=s||l||(d.on({click:function(e){e.stopPropagation(),f?h():y()}}),r.on({click:function(){f&&h()}}))},w=function(){!s||l?_():1==s&&g()},g=function(){d.addClass("websters-select_custom")},_=function(){d.addClass("websters-select_mobile")},y=function(){var e=$("select"),i=$("<ul></ul>"),s=(r.scrollTop(),d.offset(),0),l=o.find("option:selected").index(),p=Math.round(1e3*Math.random());e.each(function(){this!==o[0]&&this.obj.checkOpened()&&this.obj.close()}),f&&t.remove(),f=!0,t=$('<div class="websters-select__popup" id="websters-select__popup'+p+'"></div>'),o.find("option").each(function(e){var t=$(this);e==l?i.append('<li class="active">'+t.text()+"</li>"):i.append("<li>"+t.text()+"</li>")}),t.append(i),d.append(t),d.addClass("websters-select_opened"),s=t.outerHeight(),s>t.find("li").eq(0).outerHeight()*a&&(t.height(t.find("li").eq(0).outerHeight()*a),n=t.perfectScrollbar()),1==c?(t.css({display:"none"}),t.slideDown(300)):2==c&&(t.css({opacity:.1}),t.animate({opacity:1},300)),t.find("li").on({click:function(e){var t=$(this).index();e.stopPropagation(),o.val(o.find("option").eq(t).attr("value")),o.trigger("change"),h()}})};i.checkOpened=function(){return f},i.close=function(){h()},v()}}();
"use strict";!function(){$(function(){$.each($(".checkout"),function(){new t($(this))})});var t=function(t){var n=this,i=t,s=i.find("[data-required]"),a=i.find(".checkout__proceed .btn"),o=function(){c(),i[0].obj=n},e=function(){s.each(function(){var t=$(this);t.parents(".checkout__info-billing").length?t.parents(".checkout__info-billing").hasClass("visible")&&""===t.val()&&(t.addClass("not-touched"),h(t)):""===t.val()&&(t.addClass("not-touched"),h(t))})},c=function(){s.on({focus:function(){$(this).removeClass("not-touched")},keyup:function(){var t=$(this);t.parents(".checkout__info-billing").length?t.parents(".checkout__info-billing").hasClass("visible")&&h($(this)):h($(this))}}),a.on({click:function(){return e(),s.hasClass("not-touched")||s.hasClass("not-valid")?(i.find(".not-touched:first").focus(),i.find(".not-valid:first").focus()):($(".checkout__form").addClass("hidden"),$(".my-cart__review").addClass("visible")),!1}})},l=function(t){t.addClass("not-valid"),t.removeClass("valid")},u=function(t){t.removeClass("not-valid"),t.addClass("valid")},d=function(t){var n=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return n.test(t)},h=function(t){var n=t.attr("type");return("email"!==n&&"text"!==n||""!==t.val())&&("email"!==n||d(t.val()))?void u(t):(l(t),!1)};n.checkValid=function(){var t=!0;return s.each(function(){$(this).removeClass("not-touched"),$(this).hasClass("not-valid")&&(t=!1)}),t},o()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5tYWluLmpzIiwianF1ZXJ5LmNoZWNrb3V0LmpzIiwianF1ZXJ5LndlYnN0ZXJzLXNlbGVjdC5qcyIsImpxdWVyeS5mb3JtLnZhbGlkYXRvci5qcyJdLCJuYW1lcyI6WyJnbG9iYWxTY3JvbGxGbGFnIiwiJCIsIlByZWxvYWRlciIsImVhY2giLCJNZW51IiwidGhpcyIsIlNjcm9sbFBhbmVsIiwiU2xpZGVzIiwiRnVsbEhlaWdodCIsIlNjcm9sbFRvSGFzaCIsIm9iaiIsIl9zZWxmIiwiX3dpbmRvdyIsIndpbmRvdyIsIl9wcmVsb2FkZXIiLCJfYm9keSIsIl9hZGRFdmVudHMiLCJvbiIsImxvYWQiLCJfc2hvd1NpdGUiLCJfaW5pdCIsInByZWxvYWRlciIsImFkZENsYXNzIiwic2V0VGltZW91dCIsInJlbW92ZSIsIl9vYmoiLCJfaHRtbCIsIl9tZW51IiwiZmluZCIsIl9hY3Rpb24iLCJfYWN0aW9uMiIsIl9mbGFnSGlkZSIsImxhc3RTY3JvbGxUb3AiLCJfc2hvd01lbnVCdG4iLCJfZ2xvYmFsV2lkdGgiLCJ3aWR0aCIsInJlc2l6ZSIsInNjcm9sbFRvcCIsIl9jbG9zZU1lbnUiLCJzY3JvbGwiLCJpbm5lckhlaWdodCIsInJlbW92ZUNsYXNzIiwiaGFzQ2xhc3MiLCJET01Nb3VzZVNjcm9sbCIsImUiLCJkZWx0YSIsIm9yaWdpbmFsRXZlbnQiLCJkZXRhaWwiLCJkaXJlY3Rpb24iLCJfY2hlY2tTY3JvbGwiLCJtb3VzZXdoZWVsIiwid2hlZWxEZWx0YSIsImV2ZW50Iiwic3QiLCJjbGljayIsIl9vcGVuTWVudSIsImVsZW0iLCJjc3MiLCJvdmVyZmxvd1kiLCJfbGlua3MiLCJfZG9tIiwiX2hlYWRlciIsImN1ckl0ZW0iLCJuZXdDbGFzcyIsImF0dHIiLCJuZXh0SXRlbVRvcCIsIm9mZnNldCIsInRvcCIsInN0b3AiLCJhbmltYXRlIiwiZHVyYXRpb24iLCJwcm9ncmVzcyIsImNvbXBsZXRlIiwiY3VyU2Nyb2xsIiwid2luZG93SCIsImhlaWdodCIsInRvcFBvcyIsInRvcEluV2luZG93IiwidmlzaWJsZVBlcmNlbnQiLCJzbGlkZXMiLCJfc2V0SGVpZ2h0IiwibWluLWhlaWdodCIsIm91dGVySGVpZ2h0IiwibGVuZ3RoIiwiX3Njcm9sbFRvIiwiaGFzaCIsImxvY2F0aW9uIiwicmVwbGFjZSIsInNjcm9sbFRvIiwicGFyc2VJbnQiLCJCaWxsaW5nU2hpcHBpbmciLCJfc2hvd0NoZWNrYm94IiwiX2JpbGxpbmdJbmZvIiwiY2hhbmdlIiwicHJvcCIsIldlYnN0ZXJzU2VsZWN0Iiwib3B0aW9uVHlwZSIsInNob3dUeXBlIiwicGFyYW1zIiwiX3BvcHVwIiwiX3Njcm9sbCIsIl9vcHRpb25UeXBlIiwiX3Nob3dUeXBlIiwiX3Zpc2libGUiLCJ2aXNpYmxlIiwiX2RldmljZSIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJfdGV4dCIsIl93cmFwIiwiX29wZW5lZCIsIl9hZGRXcmFwIiwiY3VyVGV4dCIsIm9wYWNpdHkiLCJ3cmFwIiwicGFyZW50IiwiYXBwZW5kIiwiYmVmb3JlIiwidGV4dCIsImVxIiwiX2hpZGVQb3B1cCIsInNsaWRlVXAiLCJmYWRlT3V0IiwiZGlzcGxheSIsIl9jb25zdHJ1Y3RvciIsIl9zZWxlY3RWaWV3VHlwZSIsIl9vbkV2ZW50cyIsInN0b3BQcm9wYWdhdGlvbiIsIl9zaG93UG9wdXAiLCJfc2V0TW9iaWxlVmlldyIsIl9zZXRDdXN0b20xIiwic2VsZWN0cyIsImxpc3QiLCJtYXhIZWlnaHQiLCJjdXJJbmRleCIsImluZGV4IiwiaWQiLCJNYXRoIiwicm91bmQiLCJyYW5kb20iLCJjaGVja09wZW5lZCIsImNsb3NlIiwiaSIsInBlcmZlY3RTY3JvbGxiYXIiLCJzbGlkZURvd24iLCJ2YWwiLCJ0cmlnZ2VyIiwiRm9ybVZhbGlkYXRvciIsIl9maWVsZHMiLCJfYnRuIiwiX2FkZE5vdFRvdWNoZWRDbGFzcyIsInBhcmVudHMiLCJfdmFsaWRhdGVGaWVsZCIsImZvY3VzIiwia2V5dXAiLCJfbWFrZU5vdFZhbGlkIiwiZmllbGQiLCJfbWFrZVZhbGlkIiwiX3ZhbGlkYXRlRW1haWwiLCJlbWFpbCIsInJlIiwidHlwZSIsImNoZWNrVmFsaWQiLCJ2YWxpZCJdLCJtYXBwaW5ncyI6IkFBQUEsY0FDQSxXQUVJLEdBQUlBLElBQW1CLENBRXZCQyxHQUFHLFdBRUMsR0FBSUMsR0FBV0QsRUFBRSxlQUVqQkEsRUFBRUUsS0FBTUYsRUFBRyxpQkFBbUIsV0FFMUIsR0FBSUcsR0FBT0gsRUFBR0ksU0FJbEJKLEVBQUVFLEtBQU1GLEVBQUUsZUFBZ0IsV0FFdEIsR0FBSUssR0FBYUwsRUFBRUksU0FJdkJKLEVBQUVFLEtBQU1GLEVBQUUsV0FBWSxXQUVsQixHQUFJTSxHQUFRTixFQUFFSSxTQUlsQkosRUFBRUUsS0FBTUYsRUFBRSx1QkFBd0IsV0FFOUIsR0FBSU8sR0FBWVAsRUFBRUksU0FJdEJKLEVBQUVFLEtBQU1GLEVBQUUsZUFBZ0IsV0FFdEIsR0FBSVEsR0FBY1IsRUFBRUksVUFNNUIsSUFBSUgsR0FBWSxTQUFVUSxHQUd0QixHQUFJQyxHQUFRTixLQUNSTyxFQUFVWCxFQUFHWSxRQUNiQyxFQUFhSixFQUNiSyxFQUFRZCxFQUFFLFFBR1ZlLEVBQWEsV0FFVEosRUFBUUssSUFDSkMsS0FBTSxXQUVGQyxRQU1aQyxFQUFRLFdBRUpMLEVBQU0sR0FBR00sVUFBWVYsRUFDckJLLEtBR0pHLEVBQVksV0FFUkwsRUFBV1EsU0FBVSxvQkFFckJDLFdBQVcsV0FDUFQsRUFBV1UsU0FDWHZCLEVBQUUsU0FBU3FCLFNBQVUsaUJBRXZCLEtBUVZGLE1BR0FoQixFQUFPLFNBQVVNLEdBR2pCLEdBQUlDLEdBQVFOLEtBQ1JvQixFQUFPZixFQUNQRSxFQUFVWCxFQUFFWSxRQUNaYSxFQUFRekIsRUFBRSxRQUNWMEIsRUFBUUYsRUFBS0csS0FBSyxlQUVsQkMsR0FEVzVCLEVBQUUsbUJBQ0gsR0FDVjZCLEdBQVcsRUFDWEMsR0FBWSxFQUNaQyxFQUFnQixFQUNoQkMsRUFBZVIsRUFBS0csS0FBSyxtQkFDekJNLEVBQWUsRUFHZmxCLEVBQWEsV0FFVEosRUFBUUssSUFDSkMsS0FBTSxXQUVGZ0IsRUFBZXRCLEVBQVF1QixTQUczQkMsT0FBUSxXQUVBRixHQUFnQnRCLEVBQVF1QixVQUV4QkQsRUFBZXRCLEVBQVF1QixRQUFVLEVBRzdCdkIsRUFBUXVCLFNBQVcsT0FFbkJSLEVBQU1VLFVBQVUsR0FDaEJDLEVBQVlMLE1BT3hCTSxPQUFVLFdBRU5WLEVBQVVqQixFQUFReUIsYUFBb0MsRUFBckJaLEVBQUtlLGNBRWxDNUIsRUFBUXlCLGFBQWVaLEVBQUtlLGNBQWUsR0FFdkNULElBRUFBLEdBQVksRUFDWk4sRUFBS0gsU0FBVSx1QkFPbkJTLEdBQVksRUFDWk4sRUFBS2dCLFlBQWEsc0JBS2xCWixFQUVJSixFQUFLaUIsU0FBVSxzQkFFZm5CLFdBQVksV0FFUkUsRUFBS0gsU0FBVSxzQkFDZkcsRUFBS2dCLFlBQWEsc0JBRW5CLEtBS0M3QixFQUFReUIsYUFBb0MsRUFBckJaLEVBQUtlLGdCQUVwQ2YsRUFBS2dCLFlBQWEsc0JBQ2xCaEIsRUFBS2dCLFlBQWEsd0JBSWxCN0IsRUFBUXlCLGFBQWUsS0FFdkJaLEVBQUtnQixZQUFhLHNCQUNsQmhCLEVBQUtnQixZQUFhLHlCQUsxQkUsZUFBa0IsU0FBV0MsR0FFekIsR0FBSUMsR0FBUUQsRUFBRUUsY0FBY0MsTUFFNUIsSUFBS0YsRUFBUSxDQUVULEdBQUlHLEdBQWNILEVBQVEsRUFBTSxJQUVoQ0ksR0FBY0QsR0FJYkEsRUFBWSxFQUVibEIsR0FBVyxFQUlYUCxXQUFZLFdBRVJPLEdBQVcsR0FFWixNQU1Yb0IsV0FBYyxTQUFXTixHQUVyQixHQUFJQyxHQUFRRCxFQUFFRSxjQUFjSyxVQUU1QixJQUFLTixFQUFRLENBRVQsR0FBSUcsR0FBY0gsRUFBUSxLQUFXLENBRXJDSSxHQUFjRCxHQUliQSxFQUFZLEVBRWJsQixHQUFXLEVBSVhQLFdBQVksV0FFUk8sR0FBVyxHQUVaLFFBUWY3QixFQUFFWSxRQUFRMEIsT0FBTyxTQUFTYSxHQUV0QixHQUFJQyxHQUFLcEQsRUFBRUksTUFBTWdDLFdBRWpCLElBQUlnQixFQUFLckIsRUFBYyxDQUVuQmlCLEVBQWMsRUFFZCxJQUFJRCxHQUFZLE1BRWIsQ0FFSEMsS0FFQSxJQUFJRCxNQUdSaEIsRUFBZ0JxQixFQUVYTCxFQUFZLEVBRWJsQixHQUFXLEVBSVhQLFdBQVksV0FFUk8sR0FBVyxHQUVaLE9BS1hHLEVBQWFoQixJQUNUcUMsTUFBTyxXQUVDckQsRUFBR0ksTUFBT3FDLFNBQVUsVUFFcEJKLEVBQVlyQyxFQUFHSSxPQUtma0QsRUFBV3RELEVBQUdJLFdBUzlCNEMsRUFBZSxTQUFVRCxHQUVqQkEsRUFBWSxJQUFNdkIsRUFBS2lCLFNBQVUseUJBQTRCVCxFQUFhUyxTQUFVLFdBQWNiLElBQVlDLEdBRTlHTCxFQUFLSCxTQUFVLHVCQUlmMEIsRUFBWSxHQUFLdkIsRUFBS2lCLFNBQVUseUJBQTRCVCxFQUFhUyxTQUFVLFdBQWViLEdBQVdDLEdBQVk5QixHQUV6SHlCLEVBQUtnQixZQUFZLHdCQUt6QkgsRUFBYSxTQUFVa0IsR0FFbkI5QixFQUFNK0IsS0FDRkMsVUFBVyxTQUdmRixFQUFLZixZQUFhLFVBQ2xCaEIsRUFBS2dCLFlBQWEsZ0JBR3RCckIsRUFBUSxXQUNKSyxFQUFNLEdBQUlmLElBQU1DLEVBQ2hCSyxLQUVKdUMsRUFBWSxTQUFVQyxHQUVsQkEsRUFBS2xDLFNBQVUsVUFDZkcsRUFBS0gsU0FBVSxlQUVmSSxFQUFNK0IsS0FDRkMsVUFBVyxXQUt2QnRDLE1BR0FkLEVBQWMsU0FBV0ksR0FFekIsR0FBSUMsR0FBUU4sS0FDUm9CLEVBQU9mLEVBQ1BpRCxFQUFTbEMsRUFDVEMsRUFBUXpCLEVBQUUsUUFDVlcsRUFBVVgsRUFBRVksUUFDWitDLEVBQVEzRCxFQUFHLGNBQ1g0RCxFQUFVNUQsRUFBRSxpQkFHWmUsR0FGU2YsRUFBRSx3QkFFRSxXQUVUVyxFQUFRSyxJQUNKbUIsT0FBUSxhQUtSRyxPQUFVLGVBT2RvQixFQUFPMUMsSUFDSHFDLE1BQU8sV0FFSCxHQUFJUSxHQUFVN0QsRUFBR0ksTUFDYjBELEVBQVdELEVBQVFFLEtBQUssYUFDeEJDLEVBQWNoRSxFQUFHLElBQU04RCxHQUFZRyxTQUFTQyxHQW9DaEQsT0FqQ0FsRSxHQUFFLDZCQUE2QndDLFlBQVksVUFDM0NxQixFQUFReEMsU0FBUyxVQUVqQnNDLEVBQUtRLE1BQU0sR0FBTSxHQUNqQlIsRUFBS1MsU0FDRGhDLFVBQVc0QixJQUdYSyxTQUFVLElBQ1ZDLFNBQVUsV0FDTnZFLEdBQW1CLEVBQ25CNkQsRUFBUXZDLFNBQVUsd0JBRXRCa0QsU0FBVSxXQUVOakQsV0FBWSxXQUNSdkIsR0FBbUIsR0FDcEIsS0FFSHVCLFdBQVksV0FDUnZCLEdBQW1CLEdBQ3BCLFFBS1gwQixFQUFNK0IsS0FDRkMsVUFBVyxTQUdmRyxFQUFRakMsS0FBSyxtQkFBbUJhLFlBQWEsVUFDN0NvQixFQUFRcEIsWUFBYSxnQkFFZCxPQU1uQnJCLEVBQVEsV0FDSkssRUFBSyxHQUFHZixJQUFNQyxFQUNkSyxJQUdSSSxNQUdBYixFQUFTLFNBQVVHLEdBR25CLEdBQUlDLEdBQVFOLEtBQ1JvQixFQUFPZixFQUNQRSxFQUFVWCxFQUFFWSxRQUdaRyxFQUFhLFdBQ1RKLEVBQVFLLElBQ0pDLEtBQU0sV0FDRitCLEtBRUpWLE9BQVEsV0FDSlUsUUFJWkEsRUFBZSxXQUVYLEdBQUl3QixHQUFZN0QsRUFBUXlCLFlBQ3BCcUMsRUFBVTlELEVBQVErRCxTQUNsQkMsRUFBU25ELEVBQUt5QyxTQUFTQyxJQUN2QlUsRUFBY0QsRUFBT0gsRUFDckJLLEVBQWlCLEVBQUdELEVBQVlILENBRWhDSSxHQUFpQixLQUNackQsRUFBS2lCLFNBQVMsa0JBQ2ZqQixFQUFLSCxTQUFTLG1CQUsxQkYsRUFBUSxXQUNKSyxFQUFLLEdBQUdzRCxPQUFTcEUsRUFDakJLLElBU1JJLE1BR0FaLEVBQWEsU0FBVUUsR0FHdkIsR0FBSUMsR0FBUU4sS0FDUm9CLEVBQU9mLEVBQ1BFLEVBQVVYLEVBQUVZLFFBQ1pnRCxFQUFVNUQsRUFBRSxpQkFDWmlDLEVBQWUsRUFHZmxCLEVBQWEsV0FFVEosRUFBUUssSUFDSkMsS0FBTSxXQUVGZ0IsRUFBZXRCLEVBQVF1QixRQUN2QjZDLEtBR0o1QyxPQUFRLFdBRUFGLEdBQWdCdEIsRUFBUXVCLFVBRXhCRCxFQUFldEIsRUFBUXVCLFFBQVUsRUFFakM2QyxTQVFoQjVELEVBQVEsV0FDSkssRUFBTSxHQUFJZixJQUFNQyxFQUNoQkssS0FFSmdFLEVBQWEsV0FFVCxHQUFJTCxHQUFTL0QsRUFBUStELFFBRXJCbEQsR0FBS2dDLEtBQ0R3QixhQUFjTixFQUFTZCxFQUFRckIsY0FBZ0J2QyxFQUFFLHFCQUFxQmlGLGFBQVksS0FHbEZ6RCxFQUFLRyxLQUFLLGVBQWV1RCxRQUVyQnZFLEVBQVF1QixTQUFXLEtBRW5CVixFQUFLZ0MsS0FDRHdCLGFBQWMsS0FhdEJ4RCxFQUFLZ0MsS0FDRHdCLGFBQWNOLEVBQVNkLEVBQVFyQixjQUFnQnZDLEVBQUUscUJBQXFCaUYsYUFBWSxLQU9sRzlELE1BR0FYLEVBQWUsU0FBV0MsR0FFMUIsR0FBSUMsR0FBUU4sS0FDUm9CLEVBQU9mLEVBQ1BFLEVBQVVYLEVBQUVZLFFBR1pHLEdBRlFmLEVBQUUsY0FFRyxXQUVUVyxFQUFRSyxJQUNKQyxLQUFNLFdBRUZLLFdBQVksV0FFUjZELEtBRUQsVUFPZkEsRUFBWSxXQUVSLEdBQUlDLEdBQU94RSxPQUFPeUUsU0FBU0QsS0FBS0UsUUFBUSxJQUFLLEdBRTdDLElBQUlGLEVBQU8sQ0FFUCxHQUFJN0IsR0FBT3ZELEVBQUcsSUFBTVksT0FBT3lFLFNBQVNELEtBQUtFLFFBQVEsSUFBSyxJQUVsRC9CLEdBQUsyQixRQUVMdEUsT0FBTzJFLFNBQVUsRUFBR0MsU0FBVWpDLEVBQUtVLFNBQVNDLFFBT3hEL0MsRUFBUSxXQUNKSyxFQUFLLEdBQUdmLElBQU1DLEVBQ2RLLElBR1JJO0FDcGtCUixjQUNBLFdBRUksR0FBSXBCLElBQW1CLENBRXZCQyxHQUFHLFdBRUNBLEVBQUVFLEtBQU1GLEVBQUcsYUFBZSxXQUV0QixHQUFJeUYsR0FBa0J6RixFQUFHSSxVQU1qQyxJQUFJcUYsR0FBa0IsU0FBVWhGLEdBRzVCLEdBQUlDLEdBQVFOLEtBQ1JvQixFQUFPZixFQUNQa0QsRUFBUTNELEVBQUcsY0FDWDRELEVBQVU1RCxFQUFFLGlCQUNaMEYsRUFBZ0JsRSxFQUFLRyxLQUFLLGtEQUMxQmdFLEVBQWVuRSxFQUFLRyxLQUFLLDJCQUd6QlosRUFBYSxXQUVUMkUsRUFBYzFFLElBQ1Y0RSxPQUFRLFdBRWlDLEdBQWpDRixFQUFjRyxLQUFLLFlBRW5CRixFQUFhakIsT0FBUWlCLEVBQWFoRSxLQUFLLG9CQUFvQnNELGFBQVksSUFDdkVVLEVBQWF0RSxTQUFTLFdBQ3RCc0MsRUFBS1EsTUFBTSxHQUFNLEdBQ2pCUixFQUFLUyxTQUNEaEMsVUFBV3VELEVBQWExQixTQUFTQyxJQUFNbEUsRUFBRSxvQkFBb0JpRixhQUFZLEtBR3pFWixTQUFVLElBQ1ZDLFNBQVUsV0FDTnZFLEdBQW1CLEVBQ25CNkQsRUFBUXZDLFNBQVUsd0JBRXRCa0QsU0FBVSxXQUVOakQsV0FBWSxXQUNSdkIsR0FBbUIsR0FDcEIsS0FFSHVCLFdBQVksV0FDUnZCLEdBQW1CLEdBQ3BCLFVBUVg0RixFQUFhakIsT0FBUSxHQUNyQmlCLEVBQWFuRCxZQUFZLFdBQ3pCbUIsRUFBS1EsTUFBTSxHQUFNLEdBQ2pCUixFQUFLUyxTQUNEaEMsVUFBV1osRUFBS3lDLFNBQVNDLElBQU1sRSxFQUFFLG9CQUFvQmlGLGFBQVksS0FHakVaLFNBQVUsSUFDVkMsU0FBVSxXQUNOdkUsR0FBbUIsRUFDbkI2RCxFQUFRdkMsU0FBVSx3QkFFdEJrRCxTQUFVLFdBRU5qRCxXQUFZLFdBQ1J2QixHQUFtQixHQUNwQixLQUVIdUIsV0FBWSxXQUNSdkIsR0FBbUIsR0FDcEIsUUFLWDRGLEVBQWFoRSxLQUFLLG1CQUFtQnpCLEtBQU0sV0FFdkMsR0FBSTJELEdBQVU3RCxFQUFFSSxLQUVoQnlELEdBQVFyQixZQUFZLGVBQ3BCcUIsRUFBUXJCLFlBQVksb0JBVXhDckIsRUFBUSxXQUNKSyxFQUFNLEdBQUlmLElBQU1DLEVBQ2hCSyxJQUdSSTtDQzFHUixXQUVJbkIsRUFBRyxXQUNDQSxFQUFHLFVBQVdFLEtBQU0sV0FDaEIsR0FBSTRGLElBQ0FyRixJQUFLVCxFQUFHSSxNQUNSMkYsV0FBWSxFQUNaQyxTQUFVLE9BS3RCLElBQUlGLEdBQWlCLFNBQVVHLEdBRzNCLEdBV0lDLEdBQVFDLEVBWFJ6RixFQUFRTixLQUNSb0IsRUFBT3lFLEVBQU94RixJQUNkMkYsRUFBY0gsRUFBT0YsWUFBYyxFQUNuQ00sRUFBWUosRUFBT0QsVUFBWSxFQUMvQk0sRUFBV0wsRUFBT00sU0FBVyxFQUM3QkMsRUFBVSxpRUFBaUVDLEtBQU1DLFVBQVVDLFdBQzNGQyxFQUFRNUcsRUFBRywrQ0FDWDZHLEVBQVE3RyxFQUFHLHVDQUNYVyxFQUFVWCxFQUFHWSxRQUVia0csR0FEUTlHLEVBQUcsU0FDRCxHQUlWK0csRUFBVyxXQUNQLEdBQUlDLEdBQVUsRUFFZHhGLEdBQUtnQyxLQUNEeUQsUUFBUyxJQUdiekYsRUFBSzBGLEtBQU1MLEdBQ1hBLEVBQVFyRixFQUFLMkYsU0FDYk4sRUFBTU8sT0FBUSw4Q0FDZDVGLEVBQUs2RixPQUFRVCxHQUNicEYsRUFBS0csS0FBTSxVQUFXekIsS0FBTSxXQUN4QixHQUFJMkQsR0FBVTdELEVBQUdJLEtBRWlCLGFBQTlCeUQsRUFBUUUsS0FBTSxjQUNkaUQsRUFBVW5ELEVBQVF5RCxVQUlYLElBQVhOLElBQ0FBLEVBQVd4RixFQUFLRyxLQUFNLFVBQVU0RixHQUFJLEdBQUlELFFBRTVDVixFQUFNVSxLQUFNTixJQUVoQlEsRUFBYSxXQUNUVixHQUFVLEVBRUxULEVBSW1CLEdBQWJBLEVBQ1BILEVBQU8vQixNQUFNLEdBQU0sR0FBUXNELFFBQVMsSUFBSyxXQUNyQ3ZCLEVBQU8zRSxXQUVTLEdBQWI4RSxHQUNQSCxFQUFPL0IsTUFBTSxHQUFNLEdBQVF1RCxRQUFTLElBQUssV0FDckN4QixFQUFPM0UsV0FUWDJFLEVBQU8xQyxLQUNIbUUsUUFBUyxTQVlqQmQsRUFBTXJFLFlBQWEsMkJBR3ZCb0YsRUFBZSxXQUNYcEcsRUFBTSxHQUFJZixJQUFNQyxFQUVoQnFHLElBQ0FjLElBQ0FDLEtBRUpBLEVBQVksV0FDUnRHLEVBQUtSLEdBQUksU0FBVSxXQUNmNEYsRUFBTVUsS0FBTXRILEVBQUdJLE1BQU91QixLQUFNLG1CQUFvQjJGLFVBR2pDLEdBQWZsQixHQUFxQkksSUFDckJLLEVBQU03RixJQUNGcUMsTUFBUyxTQUFVVixHQUNmQSxFQUFFb0Ysa0JBRUVqQixFQUNBVSxJQUVBUSxPQU1ackgsRUFBUUssSUFDSnFDLE1BQVMsV0FDRHlELEdBQ0FVLFNBTXBCSyxFQUFrQixZQUVUekIsR0FBZUksRUFDaEJ5QixJQUNzQixHQUFmN0IsR0FDUDhCLEtBR1JBLEVBQWMsV0FDVnJCLEVBQU14RixTQUFVLDJCQUVwQjRHLEVBQWlCLFdBQ2JwQixFQUFNeEYsU0FBVSwyQkFFcEIyRyxFQUFhLFdBQ1QsR0FBSUcsR0FBVW5JLEVBQUcsVUFDYm9JLEVBQU9wSSxFQUFHLGFBR1ZxSSxHQUZZMUgsRUFBUXlCLFlBQ1h5RSxFQUFNNUMsU0FDSCxHQUNacUUsRUFBVzlHLEVBQUtHLEtBQU0sbUJBQW9CNEcsUUFDMUNDLEVBQUtDLEtBQUtDLE1BQXVCLElBQWhCRCxLQUFLRSxTQUUxQlIsR0FBUWpJLEtBQU0sV0FDTkUsT0FBU29CLEVBQU0sSUFBT3BCLEtBQUtLLElBQUltSSxlQUMvQnhJLEtBQUtLLElBQUlvSSxVQUliL0IsR0FDQVosRUFBTzNFLFNBRVh1RixHQUFVLEVBRVZaLEVBQVNsRyxFQUFHLGlFQUFtRXdJLEVBQUssWUFFcEZoSCxFQUFLRyxLQUFNLFVBQVd6QixLQUFNLFNBQVU0SSxHQUNsQyxHQUFJakYsR0FBVTdELEVBQUdJLEtBRWIwSSxJQUFLUixFQUNMRixFQUFLaEIsT0FBUSxzQkFBd0J2RCxFQUFReUQsT0FBUyxTQUV0RGMsRUFBS2hCLE9BQVEsT0FBU3ZELEVBQVF5RCxPQUFTLFdBSy9DcEIsRUFBT2tCLE9BQVFnQixHQUNmdkIsRUFBTU8sT0FBUWxCLEdBQ2RXLEVBQU14RixTQUFVLDBCQVFoQmdILEVBQVluQyxFQUFPakIsY0FDZm9ELEVBQVluQyxFQUFPdkUsS0FBTSxNQUFPNEYsR0FBSSxHQUFJdEMsY0FBZ0JxQixJQUN4REosRUFBT3hCLE9BQVF3QixFQUFPdkUsS0FBTSxNQUFPNEYsR0FBSSxHQUFJdEMsY0FBZ0JxQixHQUMzREgsRUFBVUQsRUFBTzZDLG9CQUdKLEdBQWIxQyxHQUNBSCxFQUFPMUMsS0FDSG1FLFFBQVMsU0FFYnpCLEVBQU84QyxVQUFXLE1BQ0UsR0FBYjNDLElBQ1BILEVBQU8xQyxLQUNIeUQsUUFBUyxLQUViZixFQUFPOUIsU0FBVzZDLFFBQVMsR0FBSyxNQUdwQ2YsRUFBT3ZFLEtBQU0sTUFBT1gsSUFDaEJxQyxNQUFTLFNBQVVWLEdBQ2YsR0FBSTRGLEdBQVF2SSxFQUFHSSxNQUFPbUksT0FFdEI1RixHQUFFb0Ysa0JBRUZ2RyxFQUFLeUgsSUFBS3pILEVBQUtHLEtBQU0sVUFBVzRGLEdBQUlnQixHQUFReEUsS0FBTSxVQUNsRHZDLEVBQUswSCxRQUFTLFVBQ2QxQixPQVNoQjlHLEdBQU1rSSxZQUFjLFdBQ2hCLE1BQU85QixJQUVYcEcsRUFBTW1JLE1BQVEsV0FDWnJCLEtBSUZJO0FDaE5SLGNBQ0EsV0FFSTVILEVBQUcsV0FFQ0EsRUFBRUUsS0FBTUYsRUFBRyxhQUFlLFdBRXRCLEdBQUltSixHQUFnQm5KLEVBQUdJLFVBTS9CLElBQUkrSSxHQUFnQixTQUFVMUksR0FHMUIsR0FBSUMsR0FBUU4sS0FDUm9CLEVBQU9mLEVBQ1AySSxFQUFVNUgsRUFBS0csS0FBTSxtQkFDckIwSCxFQUFPN0gsRUFBS0csS0FBTSwyQkFHbEJpRyxFQUFlLFdBRVhFLElBQ0F0RyxFQUFLLEdBQUdmLElBQU1DLEdBR2xCNEksRUFBc0IsV0FFbEJGLEVBQVFsSixLQUFNLFdBRVYsR0FBSTJELEdBQVU3RCxFQUFFSSxLQUVaeUQsR0FBUTBGLFFBQVEsMkJBQTJCckUsT0FFdkNyQixFQUFRMEYsUUFBUSwyQkFBMkI5RyxTQUFTLFlBRTlCLEtBQWxCb0IsRUFBUW9GLFFBRVJwRixFQUFReEMsU0FBVSxlQUVsQm1JLEVBQWdCM0YsSUFRRixLQUFsQkEsRUFBUW9GLFFBRVJwRixFQUFReEMsU0FBVSxlQUVsQm1JLEVBQWdCM0YsT0FVaENpRSxFQUFZLFdBQ1JzQixFQUFRcEksSUFDSnlJLE1BQU8sV0FFSHpKLEVBQUdJLE1BQU9vQyxZQUFhLGdCQUczQmtILE1BQU8sV0FFSCxHQUFJN0YsR0FBVTdELEVBQUVJLEtBRVp5RCxHQUFRMEYsUUFBUSwyQkFBMkJyRSxPQUV2Q3JCLEVBQVEwRixRQUFRLDJCQUEyQjlHLFNBQVMsWUFFcEQrRyxFQUFnQnhKLEVBQUdJLE9BTXZCb0osRUFBZ0J4SixFQUFHSSxVQU8vQmlKLEVBQUtySSxJQUNEcUMsTUFBTyxXQWdCSCxNQWRBaUcsS0FFSUYsRUFBUTNHLFNBQVMsZ0JBQWtCMkcsRUFBUTNHLFNBQVMsY0FFcERqQixFQUFLRyxLQUFLLHNCQUFzQjhILFFBQ2hDakksRUFBS0csS0FBSyxvQkFBb0I4SCxVQUk5QnpKLEVBQUUsbUJBQW1CcUIsU0FBUyxVQUM5QnJCLEVBQUUsb0JBQW9CcUIsU0FBUyxhQUk1QixNQU1uQnNJLEVBQWdCLFNBQVdDLEdBQ3ZCQSxFQUFNdkksU0FBVSxhQUNoQnVJLEVBQU1wSCxZQUFhLFVBRXZCcUgsRUFBYSxTQUFXRCxHQUNwQkEsRUFBTXBILFlBQWEsYUFDbkJvSCxFQUFNdkksU0FBVSxVQUVwQnlJLEVBQWlCLFNBQVdDLEdBQ3hCLEdBQUlDLEdBQUssd0pBQ1QsT0FBT0EsR0FBR3ZELEtBQUtzRCxJQUVuQlAsRUFBaUIsU0FBV0ksR0FDeEIsR0FBSUssR0FBT0wsRUFBTTdGLEtBQU0sT0FFdkIsUUFBYSxVQUFUa0csR0FBNkIsU0FBVEEsR0FFQSxLQUFoQkwsRUFBTVgsU0FPRCxVQUFUZ0IsR0FDS0gsRUFBZ0JGLEVBQU1YLFlBTS9CWSxHQUFZRCxJQWJKRCxFQUFlQyxJQUNSLEdBa0J2QmxKLEdBQU13SixXQUFhLFdBQ2YsR0FBSUMsSUFBUSxDQVVaLE9BUkFmLEdBQVFsSixLQUFNLFdBQ1ZGLEVBQUdJLE1BQU9vQyxZQUFhLGVBQ25CeEMsRUFBR0ksTUFBT3FDLFNBQVUsZUFDcEIwSCxHQUFRLEtBS1RBLEdBR1h2QyIsImZpbGUiOiJjaGVja291dC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbiggZnVuY3Rpb24oKXtcblxuICAgIHZhciBnbG9iYWxTY3JvbGxGbGFnID0gdHJ1ZTtcblxuICAgICQoIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBuZXcgUHJlbG9hZGVyKCAkKCcucHJlbG9hZGVyJykgKTtcblxuICAgICAgICAkLmVhY2goICQoICcuc2l0ZV9faGVhZGVyJyApLCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgbmV3IE1lbnUgKCAkKCB0aGlzICkgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICAgICAgJC5lYWNoKCAkKCdbZGF0YS1ocmVmXScpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBTY3JvbGxQYW5lbCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5zbGlkZXMnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgU2xpZGVzKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnLnNpdGVfX2NvbnRlbnQtZnVsbCcpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBGdWxsSGVpZ2h0KCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnLnNpdGVfaW5kZXgnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgU2Nyb2xsVG9IYXNoKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgfSApO1xuXG4gICAgdmFyIFByZWxvYWRlciA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyApLFxuICAgICAgICAgICAgX3ByZWxvYWRlciA9IG9iaixcbiAgICAgICAgICAgIF9ib2R5ID0gJCgnYm9keScpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICBsb2FkOiBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfc2hvd1NpdGUoKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfYm9keVswXS5wcmVsb2FkZXIgPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2hvd1NpdGUgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF9wcmVsb2FkZXIuYWRkQ2xhc3MoICdwcmVsb2FkZXJfbG9hZGVkJyApO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBfcHJlbG9hZGVyLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuc2l0ZScpLmFkZENsYXNzKCAnc2l0ZV9fbG9hZGVkJyApO1xuXG4gICAgICAgICAgICAgICAgfSw1MDApO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xuXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIE1lbnUgPSBmdW5jdGlvbiggb2JqICkge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KSxcbiAgICAgICAgICAgIF9odG1sID0gJCgnaHRtbCcpLFxuICAgICAgICAgICAgX21lbnUgPSBfb2JqLmZpbmQoJy5zaXRlX19tZW51JyksXG4gICAgICAgICAgICBfY29udGVudCA9ICQoJy5zaXRlX19jb250ZW50JyksXG4gICAgICAgICAgICBfYWN0aW9uID0gZmFsc2UsXG4gICAgICAgICAgICBfYWN0aW9uMiA9IGZhbHNlLFxuICAgICAgICAgICAgX2ZsYWdIaWRlID0gdHJ1ZSxcbiAgICAgICAgICAgIGxhc3RTY3JvbGxUb3AgPSAwLFxuICAgICAgICAgICAgX3Nob3dNZW51QnRuID0gX29iai5maW5kKCcuc2l0ZV9fbWVudS1idG4nKSxcbiAgICAgICAgICAgIF9nbG9iYWxXaWR0aCA9IDA7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfZ2xvYmFsV2lkdGggPSBfd2luZG93LndpZHRoKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfZ2xvYmFsV2lkdGggIT0gX3dpbmRvdy53aWR0aCgpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2dsb2JhbFdpZHRoID0gX3dpbmRvdy53aWR0aCgpICsgMTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSAxMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9tZW51LnNjcm9sbFRvcCgwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Nsb3NlTWVudSggX3Nob3dNZW51QnRuICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAnc2Nyb2xsJzogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfYWN0aW9uID0gX3dpbmRvdy5zY3JvbGxUb3AoKSA+PSBfb2JqLmlubmVySGVpZ2h0KCkgKiAyO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy5zY3JvbGxUb3AoKSA+PSBfb2JqLmlubmVySGVpZ2h0KCkrIDIwICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9mbGFnSGlkZSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZmxhZ0hpZGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3NpdGVfX2hlYWRlcl9oaWRlJyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZmxhZ0hpZGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZScgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfYWN0aW9uICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9vYmouaGFzQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZScgKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3NpdGVfX2hlYWRlcl9maXhlZCcgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZScgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBfd2luZG93LnNjcm9sbFRvcCgpIDw9IF9vYmouaW5uZXJIZWlnaHQoKSAqIDMgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAnc2l0ZV9faGVhZGVyX2ZpeGVkJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZGVuJyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LnNjcm9sbFRvcCgpIDw9IDEwICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3NpdGVfX2hlYWRlcl9maXhlZCcgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGRlbicgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICdET01Nb3VzZVNjcm9sbCc6IGZ1bmN0aW9uICggZSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gZS5vcmlnaW5hbEV2ZW50LmRldGFpbDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBkZWx0YSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAoIGRlbHRhID4gMCApID8gMSA6IC0xO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCBkaXJlY3Rpb24gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGRpcmVjdGlvbiA8IDAgICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FjdGlvbjIgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FjdGlvbjIgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMCApXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICdtb3VzZXdoZWVsJzogZnVuY3Rpb24gKCBlICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBlLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBkZWx0YSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAoIGRlbHRhID4gMCApID8gLTEgOiAxO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCBkaXJlY3Rpb24gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGRpcmVjdGlvbiA8IDAgICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FjdGlvbjIgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FjdGlvbjIgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMCApXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKGV2ZW50KXtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgc3QgPSAkKHRoaXMpLnNjcm9sbFRvcCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdCA+IGxhc3RTY3JvbGxUb3Ape1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoIDEgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IDFcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoIC0xICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAtMVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGFzdFNjcm9sbFRvcCA9IHN0O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICggZGlyZWN0aW9uIDwgMCAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9hY3Rpb24yID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hY3Rpb24yID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMCApXG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgX3Nob3dNZW51QnRuLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoICQoIHRoaXMgKS5oYXNDbGFzcyggJ29wZW5lZCcgKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jbG9zZU1lbnUoICQoIHRoaXMgKSApXG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vcGVuTWVudSggJCggdGhpcyApICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2hlY2tTY3JvbGwgPSBmdW5jdGlvbiggZGlyZWN0aW9uICkge1xuXG4gICAgICAgICAgICAgICAgaWYoIGRpcmVjdGlvbiA+IDAgJiYgIV9vYmouaGFzQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZGVuJyApICYmICFfc2hvd01lbnVCdG4uaGFzQ2xhc3MoICdvcGVuZWQnICkgJiYgX2FjdGlvbiAmJiAhX2FjdGlvbjIgKXtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGRlbicgKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKCBkaXJlY3Rpb24gPCAwICYmIF9vYmouaGFzQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZGVuJyApICYmICFfc2hvd01lbnVCdG4uaGFzQ2xhc3MoICdvcGVuZWQnICkgICYmIF9hY3Rpb24gJiYgX2FjdGlvbjIgJiYgZ2xvYmFsU2Nyb2xsRmxhZyApe1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoJ3NpdGVfX2hlYWRlcl9oaWRkZW4nKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jbG9zZU1lbnUgPSBmdW5jdGlvbiggZWxlbSApIHtcblxuICAgICAgICAgICAgICAgIF9odG1sLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJ1xuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIGVsZW0ucmVtb3ZlQ2xhc3MoICdvcGVuZWQnICk7XG4gICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ29wZW5lZC1tZW51JyApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfb2JqWyAwIF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vcGVuTWVudSA9IGZ1bmN0aW9uKCBlbGVtICkgIHtcblxuICAgICAgICAgICAgICAgIGVsZW0uYWRkQ2xhc3MoICdvcGVuZWQnICk7XG4gICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ29wZW5lZC1tZW51JyApO1xuXG4gICAgICAgICAgICAgICAgX2h0bWwuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2hpZGRlbidcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIFNjcm9sbFBhbmVsID0gZnVuY3Rpb24gKCBvYmogKSB7XG5cbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfbGlua3MgPSBfb2JqLFxuICAgICAgICAgICAgX2h0bWwgPSAkKCdodG1sJyksXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpLFxuICAgICAgICAgICAgX2RvbSA9ICAkKCAnaHRtbCwgYm9keScpLFxuICAgICAgICAgICAgX2hlYWRlciA9ICQoJy5zaXRlX19oZWFkZXInKSxcbiAgICAgICAgICAgIF9wb3B1cCA9ICQoJy5wb3B1cF9fY29va2llcy1pbmZvJyk7XG5cbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL19jaGFuZ2VBY3RpdmUoKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAnc2Nyb2xsJzogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL19jaGFuZ2VBY3RpdmUoKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX2xpbmtzLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKCB0aGlzICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q2xhc3MgPSBjdXJJdGVtLmF0dHIoJ2RhdGEtaHJlZicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRJdGVtVG9wID0gJCggJy4nICsgbmV3Q2xhc3MgICkub2Zmc2V0KCkudG9wO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zaXRlX19tZW51LW5hdl9hbmNob3JzIGEnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2RvbS5zdG9wKCB0cnVlLCBmYWxzZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2RvbS5hbmltYXRlKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBuZXh0SXRlbVRvcFxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxTY3JvbGxGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oZWFkZXIuYWRkQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZGVuJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbFNjcm9sbEZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjAwICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxTY3JvbGxGbGFnID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfaHRtbC5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLmZpbmQoJy5zaXRlX19tZW51LWJ0bicpLnJlbW92ZUNsYXNzKCAnb3BlbmVkJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2hlYWRlci5yZW1vdmVDbGFzcyggJ29wZW5lZC1tZW51JyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBTbGlkZXMgPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF93aW5kb3cub24oe1xuICAgICAgICAgICAgICAgICAgICBsb2FkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NoZWNrU2Nyb2xsID0gZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgIHZhciBjdXJTY3JvbGwgPSBfd2luZG93LnNjcm9sbFRvcCgpLFxuICAgICAgICAgICAgICAgICAgICB3aW5kb3dIID0gX3dpbmRvdy5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgdG9wUG9zID0gX29iai5vZmZzZXQoKS50b3AsXG4gICAgICAgICAgICAgICAgICAgIHRvcEluV2luZG93ID0gdG9wUG9zLWN1clNjcm9sbCxcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZVBlcmNlbnQgPSAxLSh0b3BJbldpbmRvdy93aW5kb3dIKTtcblxuICAgICAgICAgICAgICAgIGlmKCB2aXNpYmxlUGVyY2VudCA+IC41ICl7XG4gICAgICAgICAgICAgICAgICAgIGlmKCAhX29iai5oYXNDbGFzcygnc2xpZGVzX2FjdGl2ZScpICl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCdzbGlkZXNfYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLnNsaWRlcyA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcblxuICAgICAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xuXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIEZ1bGxIZWlnaHQgPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpLFxuICAgICAgICAgICAgX2hlYWRlciA9ICQoJy5zaXRlX19oZWFkZXInKSxcbiAgICAgICAgICAgIF9nbG9iYWxXaWR0aCA9IDA7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfZ2xvYmFsV2lkdGggPSBfd2luZG93LndpZHRoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfc2V0SGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfZ2xvYmFsV2lkdGggIT0gX3dpbmRvdy53aWR0aCgpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2dsb2JhbFdpZHRoID0gX3dpbmRvdy53aWR0aCgpICsgMTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRIZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9vYmpbIDAgXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3NldEhlaWdodCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IF93aW5kb3cuaGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6IGhlaWdodCAtIF9oZWFkZXIuaW5uZXJIZWlnaHQoKSAtICQoJy5zaXRlX19tYWluLXRpdGxlJykub3V0ZXJIZWlnaHQodHJ1ZSlcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBpZiggX29iai5maW5kKCcuY29udGFjdC11cycpLmxlbmd0aCApIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDEwMjQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21pbi1oZWlnaHQnOiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21pbi1oZWlnaHQnOiBoZWlnaHQgLSBfaGVhZGVyLmlubmVySGVpZ2h0KCkgLSAkKCcuc2l0ZV9fbWFpbi10aXRsZScpLm91dGVySGVpZ2h0KHRydWUpXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ21pbi1oZWlnaHQnOiBoZWlnaHQgLSBfaGVhZGVyLmlubmVySGVpZ2h0KCkgLSAkKCcuc2l0ZV9fbWFpbi10aXRsZScpLm91dGVySGVpZ2h0KHRydWUpXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgU2Nyb2xsVG9IYXNoID0gZnVuY3Rpb24gKCBvYmogKSB7XG5cbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpLFxuICAgICAgICAgICAgX2RvbSA9ICAkKCdodG1sLCBib2R5Jyk7XG5cbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2Nyb2xsVG8oKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3Njcm9sbFRvID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoJyMnLCAnJyk7XG5cbiAgICAgICAgICAgICAgICBpZiggaGFzaCApIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbSA9ICQoICcuJyArIHdpbmRvdy5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoJyMnLCAnJykgKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiggZWxlbS5sZW5ndGggKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyggMCwgcGFyc2VJbnQoIGVsZW0ub2Zmc2V0KCkudG9wICkgKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbn0gKSgpOyIsIlwidXNlIHN0cmljdFwiO1xuKCBmdW5jdGlvbigpe1xuXG4gICAgdmFyIGdsb2JhbFNjcm9sbEZsYWcgPSB0cnVlO1xuXG4gICAgJCggZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICQuZWFjaCggJCggJy5jaGVja291dCcgKSwgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIG5ldyBCaWxsaW5nU2hpcHBpbmcgKCAkKCB0aGlzICkgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICB9ICk7XG5cbiAgICB2YXIgQmlsbGluZ1NoaXBwaW5nID0gZnVuY3Rpb24oIG9iaiApIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9kb20gPSAgJCggJ2h0bWwsIGJvZHknKSxcbiAgICAgICAgICAgIF9oZWFkZXIgPSAkKCcuc2l0ZV9faGVhZGVyJyksXG4gICAgICAgICAgICBfc2hvd0NoZWNrYm94ID0gX29iai5maW5kKCcuY2hlY2tvdXRfX3Nob3ctYmlsbGluZyBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKSxcbiAgICAgICAgICAgIF9iaWxsaW5nSW5mbyA9IF9vYmouZmluZCgnLmNoZWNrb3V0X19pbmZvLWJpbGxpbmcnKTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX3Nob3dDaGVja2JveC5vbigge1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2U6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9zaG93Q2hlY2tib3gucHJvcCgnY2hlY2tlZCcpID09IGZhbHNlICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2JpbGxpbmdJbmZvLmhlaWdodCggX2JpbGxpbmdJbmZvLmZpbmQoJz4uY2hlY2tvdXRfX2luZm8nKS5vdXRlckhlaWdodCh0cnVlKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9iaWxsaW5nSW5mby5hZGRDbGFzcygndmlzaWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kb20uc3RvcCggdHJ1ZSwgZmFsc2UgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZG9tLmFuaW1hdGUoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBfYmlsbGluZ0luZm8ub2Zmc2V0KCkudG9wIC0gJCgnLmNoZWNrb3V0X190aXRsZScpLm91dGVySGVpZ2h0KHRydWUpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxTY3JvbGxGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLmFkZENsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGRlbicgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsU2Nyb2xsRmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjAwICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbFNjcm9sbEZsYWcgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYmlsbGluZ0luZm8uaGVpZ2h0KCAwICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2JpbGxpbmdJbmZvLnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2RvbS5zdG9wKCB0cnVlLCBmYWxzZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kb20uYW5pbWF0ZSgge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IF9vYmoub2Zmc2V0KCkudG9wIC0gJCgnLmNoZWNrb3V0X190aXRsZScpLm91dGVySGVpZ2h0KHRydWUpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxTY3JvbGxGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLmFkZENsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGRlbicgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsU2Nyb2xsRmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjAwICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbFNjcm9sbEZsYWcgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYmlsbGluZ0luZm8uZmluZCgnW2RhdGEtcmVxdWlyZWRdJykuZWFjaCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckl0ZW0ucmVtb3ZlQ2xhc3MoJ25vdC10b3VjaGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckl0ZW0ucmVtb3ZlQ2xhc3MoJ25vdC12YWxpZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG59ICkoKTsiLCIoIGZ1bmN0aW9uKCl7XG5cbiAgICAkKCBmdW5jdGlvbigpe1xuICAgICAgICAkKCAnc2VsZWN0JyApLmVhY2goIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBuZXcgV2Vic3RlcnNTZWxlY3QoIHtcbiAgICAgICAgICAgICAgICBvYmo6ICQoIHRoaXMgKSxcbiAgICAgICAgICAgICAgICBvcHRpb25UeXBlOiAxLFxuICAgICAgICAgICAgICAgIHNob3dUeXBlOiAyXG4gICAgICAgICAgICB9ICk7XG4gICAgICAgIH0gKTtcbiAgICB9ICk7XG5cbiAgICB2YXIgV2Vic3RlcnNTZWxlY3QgPSBmdW5jdGlvbiggcGFyYW1zICl7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBwYXJhbXMub2JqLFxuICAgICAgICAgICAgX29wdGlvblR5cGUgPSBwYXJhbXMub3B0aW9uVHlwZSB8fCAwLFxuICAgICAgICAgICAgX3Nob3dUeXBlID0gcGFyYW1zLnNob3dUeXBlIHx8IDAsXG4gICAgICAgICAgICBfdmlzaWJsZSA9IHBhcmFtcy52aXNpYmxlIHx8IDUsXG4gICAgICAgICAgICBfZGV2aWNlID0gL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KCBuYXZpZ2F0b3IudXNlckFnZW50ICksXG4gICAgICAgICAgICBfdGV4dCA9ICQoICc8c3BhbiBjbGFzcz1cIndlYnN0ZXJzLXNlbGVjdF9faXRlbVwiPjwvc3Bhbj4nICksXG4gICAgICAgICAgICBfd3JhcCA9ICQoICc8ZGl2IGNsYXNzPVwid2Vic3RlcnMtc2VsZWN0XCI+PC9kaXY+JyApLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyApLFxuICAgICAgICAgICAgX2JvZHkgPSAkKCAnYm9keScgKSxcbiAgICAgICAgICAgIF9vcGVuZWQgPSBmYWxzZSxcbiAgICAgICAgICAgIF9wb3B1cCwgX3Njcm9sbDtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZFdyYXAgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHZhciBjdXJUZXh0ID0gJyc7XG5cbiAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX29iai53cmFwKCBfd3JhcCApO1xuICAgICAgICAgICAgICAgIF93cmFwID0gX29iai5wYXJlbnQoKTtcbiAgICAgICAgICAgICAgICBfd3JhcC5hcHBlbmQoICc8ZGl2IGNsYXNzPVwid2Vic3RlcnMtc2VsZWN0X19hcnJvd1wiPjwvZGl2PicgKTtcbiAgICAgICAgICAgICAgICBfb2JqLmJlZm9yZSggX3RleHQgKTtcbiAgICAgICAgICAgICAgICBfb2JqLmZpbmQoICdvcHRpb24nICkuZWFjaCggZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKCB0aGlzICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIGN1ckl0ZW0uYXR0ciggJ3NlbGVjdGVkJyApID09ICdzZWxlY3RlZCcgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clRleHQgPSBjdXJJdGVtLnRleHQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIGlmKCBjdXJUZXh0ID09ICcnICl7XG4gICAgICAgICAgICAgICAgICAgIGN1clRleHQgPSAgX29iai5maW5kKCAnb3B0aW9uJykuZXEoIDAgKS50ZXh0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90ZXh0LnRleHQoIGN1clRleHQgKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaGlkZVBvcHVwID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfb3BlbmVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBpZiggIV9zaG93VHlwZSApe1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnbm9uZSdcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiggX3Nob3dUeXBlID09IDEgKXtcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLnN0b3AoIHRydWUsIGZhbHNlICkuc2xpZGVVcCggMzAwLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX3BvcHVwLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCBfc2hvd1R5cGUgPT0gMiApIHtcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLnN0b3AoIHRydWUsIGZhbHNlICkuZmFkZU91dCggMzAwLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX3BvcHVwLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgX3dyYXAucmVtb3ZlQ2xhc3MoICd3ZWJzdGVycy1zZWxlY3Rfb3BlbmVkJyApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NvbnN0cnVjdG9yID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfb2JqWyAwIF0ub2JqID0gX3NlbGY7XG5cbiAgICAgICAgICAgICAgICBfYWRkV3JhcCgpO1xuICAgICAgICAgICAgICAgIF9zZWxlY3RWaWV3VHlwZSgpO1xuICAgICAgICAgICAgICAgIF9vbkV2ZW50cygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbkV2ZW50cyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX29iai5vbiggJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGV4dC50ZXh0KCAkKCB0aGlzICkuZmluZCggJ29wdGlvbjpzZWxlY3RlZCcgKS50ZXh0KCkgKTtcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBpZiggX29wdGlvblR5cGUgPT0gMSAmJiAhX2RldmljZSApe1xuICAgICAgICAgICAgICAgICAgICBfd3JhcC5vbigge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24oIGUgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9vcGVuZWQgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGVQb3B1cCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zaG93UG9wdXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9vcGVuZWQgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGVQb3B1cCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2VsZWN0Vmlld1R5cGUgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgaWYoICFfb3B0aW9uVHlwZSB8fCBfZGV2aWNlICl7XG4gICAgICAgICAgICAgICAgICAgIF9zZXRNb2JpbGVWaWV3KCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCBfb3B0aW9uVHlwZSA9PSAxICl7XG4gICAgICAgICAgICAgICAgICAgIF9zZXRDdXN0b20xKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRDdXN0b20xID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfd3JhcC5hZGRDbGFzcyggJ3dlYnN0ZXJzLXNlbGVjdF9jdXN0b20nICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3NldE1vYmlsZVZpZXcgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF93cmFwLmFkZENsYXNzKCAnd2Vic3RlcnMtc2VsZWN0X21vYmlsZScgKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2hvd1BvcHVwID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0cyA9ICQoICdzZWxlY3QnICksXG4gICAgICAgICAgICAgICAgICAgIGxpc3QgPSAkKCAnPHVsPjwvdWw+JyksXG4gICAgICAgICAgICAgICAgICAgIGN1clNjcm9sbCA9IF93aW5kb3cuc2Nyb2xsVG9wKCksXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IF93cmFwLm9mZnNldCgpLFxuICAgICAgICAgICAgICAgICAgICBtYXhIZWlnaHQgPSAwLFxuICAgICAgICAgICAgICAgICAgICBjdXJJbmRleCA9IF9vYmouZmluZCggJ29wdGlvbjpzZWxlY3RlZCcgKS5pbmRleCgpLFxuICAgICAgICAgICAgICAgICAgICBpZCA9IE1hdGgucm91bmQoIE1hdGgucmFuZG9tKCkgKiAxMDAwICk7XG5cbiAgICAgICAgICAgICAgICBzZWxlY3RzLmVhY2goIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIGlmKCB0aGlzICE9PSBfb2JqWyAwIF0gJiYgdGhpcy5vYmouY2hlY2tPcGVuZWQoKSApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmouY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIGlmKCBfb3BlbmVkICl7XG4gICAgICAgICAgICAgICAgICAgIF9wb3B1cC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX29wZW5lZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICBfcG9wdXAgPSAkKCAnPGRpdiBjbGFzcz1cIndlYnN0ZXJzLXNlbGVjdF9fcG9wdXBcIiBpZD1cIndlYnN0ZXJzLXNlbGVjdF9fcG9wdXAnICsgaWQgKyAnXCI+PC9kaXY+JyApO1xuXG4gICAgICAgICAgICAgICAgX29iai5maW5kKCAnb3B0aW9uJyApLmVhY2goIGZ1bmN0aW9uKCBpICl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCggdGhpcyApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBpID09IGN1ckluZGV4ICl7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0LmFwcGVuZCggJzxsaSBjbGFzcz1cImFjdGl2ZVwiPicgKyBjdXJJdGVtLnRleHQoKSArICc8L2xpPicgKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QuYXBwZW5kKCAnPGxpPicgKyBjdXJJdGVtLnRleHQoKSArICc8L2xpPicgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX3BvcHVwLmFwcGVuZCggbGlzdCApO1xuICAgICAgICAgICAgICAgIF93cmFwLmFwcGVuZCggX3BvcHVwICk7XG4gICAgICAgICAgICAgICAgX3dyYXAuYWRkQ2xhc3MoICd3ZWJzdGVycy1zZWxlY3Rfb3BlbmVkJyApO1xuXG4gICAgICAgICAgICAgICAgLy9fcG9wdXAuY3NzKCB7XG4gICAgICAgICAgICAgICAgLy8gICAgd2lkdGg6IF93cmFwLm91dGVyV2lkdGgoKSxcbiAgICAgICAgICAgICAgICAvLyAgICBsZWZ0OiAtMSxcbiAgICAgICAgICAgICAgICAvLyAgICB0b3A6IF93cmFwLm91dGVySGVpZ2h0KCkgLSAzXG4gICAgICAgICAgICAgICAgLy99ICk7XG5cbiAgICAgICAgICAgICAgICBtYXhIZWlnaHQgPSBfcG9wdXAub3V0ZXJIZWlnaHQoKTtcbiAgICAgICAgICAgICAgICBpZiggbWF4SGVpZ2h0ID4gX3BvcHVwLmZpbmQoICdsaScgKS5lcSggMCApLm91dGVySGVpZ2h0KCkgKiBfdmlzaWJsZSApe1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuaGVpZ2h0KCBfcG9wdXAuZmluZCggJ2xpJyApLmVxKCAwICkub3V0ZXJIZWlnaHQoKSAqIF92aXNpYmxlICk7XG4gICAgICAgICAgICAgICAgICAgIF9zY3JvbGwgPSBfcG9wdXAucGVyZmVjdFNjcm9sbGJhcigpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKCBfc2hvd1R5cGUgPT0gMSApe1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnbm9uZSdcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuc2xpZGVEb3duKCAzMDAgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIF9zaG93VHlwZSA9PSAyICkge1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjFcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuYW5pbWF0ZSggeyBvcGFjaXR5OiAxIH0sIDMwMCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgX3BvcHVwLmZpbmQoICdsaScgKS5vbigge1xuICAgICAgICAgICAgICAgICAgICAnY2xpY2snOiBmdW5jdGlvbiggZSApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gJCggdGhpcyApLmluZGV4KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoudmFsKCBfb2JqLmZpbmQoICdvcHRpb24nICkuZXEoIGluZGV4ICkuYXR0ciggJ3ZhbHVlJyApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnRyaWdnZXIoICdjaGFuZ2UnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaGlkZVBvcHVwKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcbiAgICAgICAgX3NlbGYuY2hlY2tPcGVuZWQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgcmV0dXJuIF9vcGVuZWQ7XG4gICAgICAgIH07XG4gICAgICAgIF9zZWxmLmNsb3NlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICBfaGlkZVBvcHVwKCk7XG4gICAgICAgIH07XG5cblxuICAgICAgICBfY29uc3RydWN0b3IoKTtcblxuICAgIH07XG5cbn0gKSgpOyIsIlwidXNlIHN0cmljdFwiO1xuKCBmdW5jdGlvbigpe1xuXG4gICAgJCggZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICQuZWFjaCggJCggJy5jaGVja291dCcgKSwgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIG5ldyBGb3JtVmFsaWRhdG9yICggJCggdGhpcyApICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgfSApO1xuXG4gICAgdmFyIEZvcm1WYWxpZGF0b3IgPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfZmllbGRzID0gX29iai5maW5kKCAnW2RhdGEtcmVxdWlyZWRdJyApLFxuICAgICAgICAgICAgX2J0biA9IF9vYmouZmluZCggJy5jaGVja291dF9fcHJvY2VlZCAuYnRuJyApO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfY29uc3RydWN0b3IgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2FkZE5vdFRvdWNoZWRDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9maWVsZHMuZWFjaCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBjdXJJdGVtLnBhcmVudHMoJy5jaGVja291dF9faW5mby1iaWxsaW5nJykubGVuZ3RoICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggY3VySXRlbS5wYXJlbnRzKCcuY2hlY2tvdXRfX2luZm8tYmlsbGluZycpLmhhc0NsYXNzKCd2aXNpYmxlJykgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggY3VySXRlbS52YWwoKSA9PT0gJycgKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLmFkZENsYXNzKCAnbm90LXRvdWNoZWQnICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZhbGlkYXRlRmllbGQoIGN1ckl0ZW0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBjdXJJdGVtLnZhbCgpID09PSAnJyApe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5hZGRDbGFzcyggJ25vdC10b3VjaGVkJyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZhbGlkYXRlRmllbGQoIGN1ckl0ZW0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9maWVsZHMub24oIHtcbiAgICAgICAgICAgICAgICAgICAgZm9jdXM6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCB0aGlzICkucmVtb3ZlQ2xhc3MoICdub3QtdG91Y2hlZCcgKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBrZXl1cDogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGN1ckl0ZW0ucGFyZW50cygnLmNoZWNrb3V0X19pbmZvLWJpbGxpbmcnKS5sZW5ndGggKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggY3VySXRlbS5wYXJlbnRzKCcuY2hlY2tvdXRfX2luZm8tYmlsbGluZycpLmhhc0NsYXNzKCd2aXNpYmxlJykgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZhbGlkYXRlRmllbGQoICQoIHRoaXMgKSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZhbGlkYXRlRmllbGQoICQoIHRoaXMgKSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF9idG4ub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfYWRkTm90VG91Y2hlZENsYXNzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfZmllbGRzLmhhc0NsYXNzKCdub3QtdG91Y2hlZCcpIHx8IF9maWVsZHMuaGFzQ2xhc3MoJ25vdC12YWxpZCcpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCcubm90LXRvdWNoZWQ6Zmlyc3QnKS5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLm5vdC12YWxpZDpmaXJzdCcpLmZvY3VzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuY2hlY2tvdXRfX2Zvcm0nKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLm15LWNhcnRfX3JldmlldycpLmFkZENsYXNzKCd2aXNpYmxlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfbWFrZU5vdFZhbGlkID0gZnVuY3Rpb24gKCBmaWVsZCApIHtcbiAgICAgICAgICAgICAgICBmaWVsZC5hZGRDbGFzcyggJ25vdC12YWxpZCcgKTtcbiAgICAgICAgICAgICAgICBmaWVsZC5yZW1vdmVDbGFzcyggJ3ZhbGlkJyApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9tYWtlVmFsaWQgPSBmdW5jdGlvbiAoIGZpZWxkICkge1xuICAgICAgICAgICAgICAgIGZpZWxkLnJlbW92ZUNsYXNzKCAnbm90LXZhbGlkJyApO1xuICAgICAgICAgICAgICAgIGZpZWxkLmFkZENsYXNzKCAndmFsaWQnICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3ZhbGlkYXRlRW1haWwgPSBmdW5jdGlvbiAoIGVtYWlsICkge1xuICAgICAgICAgICAgICAgIHZhciByZSA9IC9eKChbXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKFxcLltePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfV0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvO1xuICAgICAgICAgICAgICAgIHJldHVybiByZS50ZXN0KGVtYWlsKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfdmFsaWRhdGVGaWVsZCA9IGZ1bmN0aW9uICggZmllbGQgKSB7XG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBmaWVsZC5hdHRyKCAndHlwZScgKTtcblxuICAgICAgICAgICAgICAgIGlmKCB0eXBlID09PSAnZW1haWwnIHx8IHR5cGUgPT09ICd0ZXh0JyApe1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBmaWVsZC52YWwoKSA9PT0gJycgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9tYWtlTm90VmFsaWQoIGZpZWxkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKCB0eXBlID09PSAnZW1haWwnICl7XG4gICAgICAgICAgICAgICAgICAgIGlmKCAhX3ZhbGlkYXRlRW1haWwoIGZpZWxkLnZhbCgpICkgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9tYWtlTm90VmFsaWQoIGZpZWxkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBfbWFrZVZhbGlkKCBmaWVsZCApO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xuICAgICAgICBfc2VsZi5jaGVja1ZhbGlkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHZhbGlkID0gdHJ1ZTtcblxuICAgICAgICAgICAgX2ZpZWxkcy5lYWNoKCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJCggdGhpcyApLnJlbW92ZUNsYXNzKCAnbm90LXRvdWNoZWQnICk7XG4gICAgICAgICAgICAgICAgaWYoICQoIHRoaXMgKS5oYXNDbGFzcyggJ25vdC12YWxpZCcgKSApe1xuICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICByZXR1cm4gdmFsaWQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgX2NvbnN0cnVjdG9yKCk7XG4gICAgfTtcblxufSApKCk7XG4iXX0=
