"use strict";!function(){var e=!0;$(function(){new i($(".preloader")),$.each($(".site__header"),function(){new n($(this))}),$.each($("[data-href]"),function(){new t($(this))}),$.each($(".slides"),function(){new o($(this))}),$.each($(".site__content-full"),function(){new s($(this))}),$.each($(".site_index"),function(){new a($(this))})});var i=function(e){var i=this,n=$(window),t=e,o=$("body"),s=function(){n.on({load:function(){d()}})},a=function(){o[0].preloader=i,s(),$("html").css({"overflow-y":"hidden"})},d=function(){t.addClass("preloader_loaded"),setTimeout(function(){t.remove(),$("html").css({"overflow-y":"scroll"}),$(".site").addClass("site__loaded")},500)};a()},n=function(i){var n=this,t=i,o=$(window),s=$("html"),a=t.find(".site__menu"),d=($(".site__content"),!1),l=!1,c=!0,r=0,h=t.find(".site__menu-btn"),f=0,u=function(){o.on({load:function(){f=o.width()},resize:function(){f!=o.width()&&(f=o.width()+1,o.width()>=1024&&(a.scrollTop(0),v(h)))},scroll:function(){d=o.scrollTop()>=2*t.innerHeight(),o.scrollTop()>=t.innerHeight()+20?c&&(c=!1,t.addClass("site__header_hide")):(c=!0,t.removeClass("site__header_hide")),d?t.hasClass("site__header_hide")&&setTimeout(function(){t.addClass("site__header_fixed"),t.removeClass("site__header_hide")},100):o.scrollTop()<=3*t.innerHeight()&&(t.removeClass("site__header_fixed"),t.removeClass("site__header_hidden")),o.scrollTop()<=10&&(t.removeClass("site__header_fixed"),t.removeClass("site__header_hidden"))},DOMMouseScroll:function(e){var i=e.originalEvent.detail;if(i){var n=i>0?1:-1;_(n)}n<0?l=!0:setTimeout(function(){l=!1},300)},mousewheel:function(e){var i=e.originalEvent.wheelDelta;if(i){var n=i>0?-1:1;_(n)}n<0?l=!0:setTimeout(function(){l=!1},300)}}),$(window).scroll(function(e){var i=$(this).scrollTop();if(i>r){_(1);var n=1}else{_(-1);var n=-1}r=i,n<0?l=!0:setTimeout(function(){l=!1},300)}),h.on({click:function(){$(this).hasClass("opened")?v($(this)):w($(this))}})},_=function(i){i>0&&!t.hasClass("site__header_hidden")&&!h.hasClass("opened")&&d&&!l&&t.addClass("site__header_hidden"),i<0&&t.hasClass("site__header_hidden")&&!h.hasClass("opened")&&d&&l&&e&&t.removeClass("site__header_hidden")},v=function(e){s.css({overflowY:"auto"}),e.removeClass("opened"),t.removeClass("opened-menu")},m=function(){t[0].obj=n,u()},w=function(e){e.addClass("opened"),t.addClass("opened-menu"),s.css({overflowY:"hidden"})};m()},t=function(i){var n=this,t=i,o=t,s=$("html"),a=$(window),d=$("html, body"),l=$(".site__header"),c=($(".popup__cookies-info"),function(){a.on({resize:function(){r()},scroll:function(){r()}}),o.on({click:function(){var i=$(this),n=i.attr("data-href"),t=$("."+n).offset().top;return $(".site__menu-nav_anchors a").removeClass("active"),i.addClass("active"),d.stop(!0,!1),d.animate({scrollTop:t},{duration:500,progress:function(){e=!1,l.addClass("site__header_hidden")},complete:function(){setTimeout(function(){e=!1},200),setTimeout(function(){e=!0},500)}}),s.css({overflowY:"auto"}),l.find(".site__menu-btn").removeClass("opened"),l.removeClass("opened-menu"),!1}})}),r=function(){for(var e=a.scrollTop(),i=$("body").find('[data-scroll="scroll"]'),n=(i.offset().top,0);n<i.length;n++){var t=$(i[n]),s=$(i[n]).offset().top-l.outerHeight(!0),d=$(i[n]).outerHeight(!0);if(e>s){var c=t.attr("class").split(" "),r=o.filter("[data-href="+c[0]+"]");o.removeClass("active"),r.addClass("active")}e>s+d&&o.removeClass("active")}},h=function(){t[0].obj=n,c()};h()},o=function(e){var i=this,n=e,t=$(window),o=function(){t.on({load:function(){s()},scroll:function(){s()}})},s=function(){var e=t.scrollTop(),i=t.height(),o=n.offset().top,s=o-e,a=1-s/i;a>.5&&(n.hasClass("slides_active")||n.addClass("slides_active"))},a=function(){n[0].slides=i,o()};a()},s=function(e){var i=this,n=e,t=$(window),o=$(".site__header"),s=0,a=function(){t.on({load:function(){s=t.width(),l()},resize:function(){s!=t.width()&&(s=t.width()+1,l())}})},d=function(){n[0].obj=i,a()},l=function(){var e=t.height();n.css({"min-height":e-o.innerHeight()-$(".site__main-title").outerHeight(!0)}),n.find(".contact-us").length&&t.width()>=1024?n.css({"min-height":""}):n.css({"min-height":e-o.innerHeight()-$(".site__main-title").outerHeight(!0)})};d()},a=function(e){var i=this,n=e,t=$(window),o=($("html, body"),function(){t.on({load:function(){setTimeout(function(){s()},100)}})}),s=function(){var e=window.location.hash.replace("#","");if(e){var i=$("."+window.location.hash.replace("#",""));i.length&&window.scrollTo(0,parseInt(i.offset().top)),$(".slides").addClass("slides_active")}},a=function(){n[0].obj=i,o()};a()}}();
"use strict";!function(){var t=!0;$(function(){$.each($(".checkout"),function(){new e($(this))})});var e=function(e){var i=this,o=e,n=$("html, body"),c=$(".site__header"),s=o.find('.checkout__show-billing input[type="checkbox"]'),u=o.find(".checkout__info-billing"),h=function(){s.on({change:function(){0==s.prop("checked")?(u.height(u.find(">.checkout__info").outerHeight(!0)),u.addClass("visible"),n.stop(!0,!1),n.animate({scrollTop:u.offset().top-$(".checkout__title").outerHeight(!0)},{duration:500,progress:function(){t=!1,c.addClass("site__header_hidden")},complete:function(){setTimeout(function(){t=!1},200),setTimeout(function(){t=!0},500)}})):(u.height(0),u.removeClass("visible"),n.stop(!0,!1),n.animate({scrollTop:o.offset().top-$(".checkout__title").outerHeight(!0)},{duration:500,progress:function(){t=!1,c.addClass("site__header_hidden")},complete:function(){setTimeout(function(){t=!1},200),setTimeout(function(){t=!0},500)}}),u.find("[data-required]").each(function(){var t=$(this);t.removeClass("not-touched"),t.removeClass("not-valid")})),$("#ship-to-different-address-checkbox").trigger("click")}})},a=function(){o[0].obj=i,h()};a()}}();
!function(){$(function(){$("select").each(function(){new e({obj:$(this),optionType:1,showType:2})})});var e=function(e){var t,n,i=this,o=e.obj,s=e.optionType||0,c=e.showType||0,a=e.visible||5,l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),p=$('<span class="websters-select__item"></span>'),d=$('<div class="websters-select"></div>'),r=$(window),f=($("body"),!1),u=function(){var e="";o.css({opacity:0}),o.wrap(d),d=o.parent(),d.append('<div class="websters-select__arrow"></div>'),o.before(p),o.find("option").each(function(){var t=$(this);"selected"==t.attr("selected")&&(e=t.text())}),""==e&&(e=o.find("option").eq(0).text()),p.text(e)},h=function(){f=!1,c?1==c?t.stop(!0,!1).slideUp(300,function(){t.remove()}):2==c&&t.stop(!0,!1).fadeOut(300,function(){t.remove()}):t.css({display:"none"}),d.removeClass("websters-select_opened")},v=function(){o[0].obj=i,u(),w(),b()},b=function(){o.on("change",function(){p.text($(this).find("option:selected").text())}),1!=s||l||(d.on({click:function(e){e.stopPropagation(),f?h():y()}}),r.on({click:function(){f&&h()}}))},w=function(){!s||l?_():1==s&&g()},g=function(){d.addClass("websters-select_custom")},_=function(){d.addClass("websters-select_mobile")},y=function(){var e=$("select"),i=$("<ul></ul>"),s=(r.scrollTop(),d.offset(),0),l=o.find("option:selected").index(),p=Math.round(1e3*Math.random());e.each(function(){this!==o[0]&&this.obj.checkOpened()&&this.obj.close()}),f&&t.remove(),f=!0,t=$('<div class="websters-select__popup" id="websters-select__popup'+p+'"></div>'),o.find("option").each(function(e){var t=$(this);e==l?i.append('<li class="active">'+t.text()+"</li>"):i.append("<li>"+t.text()+"</li>")}),t.append(i),d.append(t),d.addClass("websters-select_opened"),s=t.outerHeight(),s>t.find("li").eq(0).outerHeight()*a&&(t.height(t.find("li").eq(0).outerHeight()*a),n=t.perfectScrollbar()),1==c?(t.css({display:"none"}),t.slideDown(300)):2==c&&(t.css({opacity:.1}),t.animate({opacity:1},300)),t.find("li").on({click:function(e){var t=$(this).index();e.stopPropagation(),o.val(o.find("option").eq(t).attr("value")),o.trigger("change"),h()}})};i.checkOpened=function(){return f},i.close=function(){h()},v()}}();
"use strict";!function(){$(function(){$.each($(".checkout"),function(){new t($(this))})});var t=function(t){var n=this,i=t,s=i.find("[data-required]"),a=i.find(".checkout__proceed .btn"),o=function(){c(),i[0].obj=n},e=function(){s.each(function(){var t=$(this);t.parents(".checkout__info-billing").length?t.parents(".checkout__info-billing").hasClass("visible")&&""===t.val()&&(t.addClass("not-touched"),h(t)):""===t.val()&&(t.addClass("not-touched"),h(t))})},c=function(){s.on({focus:function(){$(this).removeClass("not-touched")},keyup:function(){var t=$(this);t.parents(".checkout__info-billing").length?t.parents(".checkout__info-billing").hasClass("visible")&&h($(this)):h($(this))}}),a.on({click:function(){return e(),s.hasClass("not-touched")||s.hasClass("not-valid")?(i.find(".not-touched:first").focus(),i.find(".not-valid:first").focus()):($(".checkout__form").addClass("hidden"),$(".my-cart__review").addClass("visible")),!1}})},l=function(t){t.addClass("not-valid"),t.removeClass("valid")},u=function(t){t.removeClass("not-valid"),t.addClass("valid")},d=function(t){var n=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return n.test(t)},h=function(t){var n=t.attr("type");return("email"!==n&&"text"!==n||""!==t.val())&&("email"!==n||d(t.val()))?void u(t):(l(t),!1)};n.checkValid=function(){var t=!0;return s.each(function(){$(this).removeClass("not-touched"),$(this).hasClass("not-valid")&&(t=!1)}),t},o()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5tYWluLmpzIiwianF1ZXJ5LmNoZWNrb3V0LmpzIiwianF1ZXJ5LndlYnN0ZXJzLXNlbGVjdC5qcyIsImpxdWVyeS5mb3JtLnZhbGlkYXRvci5qcyJdLCJuYW1lcyI6WyJnbG9iYWxTY3JvbGxGbGFnIiwiJCIsIlByZWxvYWRlciIsImVhY2giLCJNZW51IiwidGhpcyIsIlNjcm9sbFBhbmVsIiwiU2xpZGVzIiwiRnVsbEhlaWdodCIsIlNjcm9sbFRvSGFzaCIsIm9iaiIsIl9zZWxmIiwiX3dpbmRvdyIsIndpbmRvdyIsIl9wcmVsb2FkZXIiLCJfYm9keSIsIl9hZGRFdmVudHMiLCJvbiIsImxvYWQiLCJfc2hvd1NpdGUiLCJfaW5pdCIsInByZWxvYWRlciIsImNzcyIsIm92ZXJmbG93LXkiLCJhZGRDbGFzcyIsInNldFRpbWVvdXQiLCJyZW1vdmUiLCJfb2JqIiwiX2h0bWwiLCJfbWVudSIsImZpbmQiLCJfYWN0aW9uIiwiX2FjdGlvbjIiLCJfZmxhZ0hpZGUiLCJsYXN0U2Nyb2xsVG9wIiwiX3Nob3dNZW51QnRuIiwiX2dsb2JhbFdpZHRoIiwid2lkdGgiLCJyZXNpemUiLCJzY3JvbGxUb3AiLCJfY2xvc2VNZW51Iiwic2Nyb2xsIiwiaW5uZXJIZWlnaHQiLCJyZW1vdmVDbGFzcyIsImhhc0NsYXNzIiwiRE9NTW91c2VTY3JvbGwiLCJlIiwiZGVsdGEiLCJvcmlnaW5hbEV2ZW50IiwiZGV0YWlsIiwiZGlyZWN0aW9uIiwiX2NoZWNrU2Nyb2xsIiwibW91c2V3aGVlbCIsIndoZWVsRGVsdGEiLCJldmVudCIsInN0IiwiY2xpY2siLCJfb3Blbk1lbnUiLCJlbGVtIiwib3ZlcmZsb3dZIiwiX2xpbmtzIiwiX2RvbSIsIl9oZWFkZXIiLCJfY2hhbmdlQWN0aXZlIiwiY3VySXRlbSIsIm5ld0NsYXNzIiwiYXR0ciIsIm5leHRJdGVtVG9wIiwib2Zmc2V0IiwidG9wIiwic3RvcCIsImFuaW1hdGUiLCJkdXJhdGlvbiIsInByb2dyZXNzIiwiY29tcGxldGUiLCJpdGVtIiwiaSIsImxlbmd0aCIsImN1ciIsIml0ZW1DdXIiLCJvdXRlckhlaWdodCIsIml0ZW1IZWlnaHQiLCJjdXJDbGFzcyIsInNwbGl0IiwiY3VyTGluayIsImZpbHRlciIsImN1clNjcm9sbCIsIndpbmRvd0giLCJoZWlnaHQiLCJ0b3BQb3MiLCJ0b3BJbldpbmRvdyIsInZpc2libGVQZXJjZW50Iiwic2xpZGVzIiwiX3NldEhlaWdodCIsIm1pbi1oZWlnaHQiLCJfc2Nyb2xsVG8iLCJoYXNoIiwibG9jYXRpb24iLCJyZXBsYWNlIiwic2Nyb2xsVG8iLCJwYXJzZUludCIsIkJpbGxpbmdTaGlwcGluZyIsIl9zaG93Q2hlY2tib3giLCJfYmlsbGluZ0luZm8iLCJjaGFuZ2UiLCJwcm9wIiwidHJpZ2dlciIsIldlYnN0ZXJzU2VsZWN0Iiwib3B0aW9uVHlwZSIsInNob3dUeXBlIiwicGFyYW1zIiwiX3BvcHVwIiwiX3Njcm9sbCIsIl9vcHRpb25UeXBlIiwiX3Nob3dUeXBlIiwiX3Zpc2libGUiLCJ2aXNpYmxlIiwiX2RldmljZSIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJfdGV4dCIsIl93cmFwIiwiX29wZW5lZCIsIl9hZGRXcmFwIiwiY3VyVGV4dCIsIm9wYWNpdHkiLCJ3cmFwIiwicGFyZW50IiwiYXBwZW5kIiwiYmVmb3JlIiwidGV4dCIsImVxIiwiX2hpZGVQb3B1cCIsInNsaWRlVXAiLCJmYWRlT3V0IiwiZGlzcGxheSIsIl9jb25zdHJ1Y3RvciIsIl9zZWxlY3RWaWV3VHlwZSIsIl9vbkV2ZW50cyIsInN0b3BQcm9wYWdhdGlvbiIsIl9zaG93UG9wdXAiLCJfc2V0TW9iaWxlVmlldyIsIl9zZXRDdXN0b20xIiwic2VsZWN0cyIsImxpc3QiLCJtYXhIZWlnaHQiLCJjdXJJbmRleCIsImluZGV4IiwiaWQiLCJNYXRoIiwicm91bmQiLCJyYW5kb20iLCJjaGVja09wZW5lZCIsImNsb3NlIiwicGVyZmVjdFNjcm9sbGJhciIsInNsaWRlRG93biIsInZhbCIsIkZvcm1WYWxpZGF0b3IiLCJfZmllbGRzIiwiX2J0biIsIl9hZGROb3RUb3VjaGVkQ2xhc3MiLCJwYXJlbnRzIiwiX3ZhbGlkYXRlRmllbGQiLCJmb2N1cyIsImtleXVwIiwiX21ha2VOb3RWYWxpZCIsImZpZWxkIiwiX21ha2VWYWxpZCIsIl92YWxpZGF0ZUVtYWlsIiwiZW1haWwiLCJyZSIsInR5cGUiLCJjaGVja1ZhbGlkIiwidmFsaWQiXSwibWFwcGluZ3MiOiJBQUFBLGNBQ0EsV0FFSSxHQUFJQSxJQUFtQixDQUV2QkMsR0FBRyxXQUVDLEdBQUlDLEdBQVdELEVBQUUsZUFFakJBLEVBQUVFLEtBQU1GLEVBQUcsaUJBQW1CLFdBRTFCLEdBQUlHLEdBQU9ILEVBQUdJLFNBSWxCSixFQUFFRSxLQUFNRixFQUFFLGVBQWdCLFdBRXRCLEdBQUlLLEdBQWFMLEVBQUVJLFNBSXZCSixFQUFFRSxLQUFNRixFQUFFLFdBQVksV0FFbEIsR0FBSU0sR0FBUU4sRUFBRUksU0FJbEJKLEVBQUVFLEtBQU1GLEVBQUUsdUJBQXdCLFdBRTlCLEdBQUlPLEdBQVlQLEVBQUVJLFNBSXRCSixFQUFFRSxLQUFNRixFQUFFLGVBQWdCLFdBRXRCLEdBQUlRLEdBQWNSLEVBQUVJLFVBTTVCLElBQUlILEdBQVksU0FBVVEsR0FHdEIsR0FBSUMsR0FBUU4sS0FDUk8sRUFBVVgsRUFBR1ksUUFDYkMsRUFBYUosRUFDYkssRUFBUWQsRUFBRSxRQUdWZSxFQUFhLFdBRVRKLEVBQVFLLElBQ0pDLEtBQU0sV0FFRkMsUUFNWkMsRUFBUSxXQUVKTCxFQUFNLEdBQUdNLFVBQVlWLEVBQ3JCSyxJQUlBZixFQUFFLFFBQVFxQixLQUNOQyxhQUFjLFlBSXRCSixFQUFZLFdBRVJMLEVBQVdVLFNBQVUsb0JBRXJCQyxXQUFXLFdBQ1BYLEVBQVdZLFNBRVh6QixFQUFFLFFBQVFxQixLQUNOQyxhQUFjLFdBRWxCdEIsRUFBRSxTQUFTdUIsU0FBVSxpQkFFdkIsS0FRVkosTUFHQWhCLEVBQU8sU0FBVU0sR0FHakIsR0FBSUMsR0FBUU4sS0FDUnNCLEVBQU9q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QUFHSSxPQU12QjhKLEVBQWdCbEssRUFBR0ksVUFPL0IySixFQUFLL0ksSUFDRHVDLE1BQU8sV0FnQkgsTUFkQXlHLEtBRUlGLEVBQVFuSCxTQUFTLGdCQUFrQm1ILEVBQVFuSCxTQUFTLGNBRXBEakIsRUFBS0csS0FBSyxzQkFBc0JzSSxRQUNoQ3pJLEVBQUtHLEtBQUssb0JBQW9Cc0ksVUFJOUJuSyxFQUFFLG1CQUFtQnVCLFNBQVMsVUFDOUJ2QixFQUFFLG9CQUFvQnVCLFNBQVMsYUFJNUIsTUFNbkI4SSxFQUFnQixTQUFXQyxHQUN2QkEsRUFBTS9JLFNBQVUsYUFDaEIrSSxFQUFNNUgsWUFBYSxVQUV2QjZILEVBQWEsU0FBV0QsR0FDcEJBLEVBQU01SCxZQUFhLGFBQ25CNEgsRUFBTS9JLFNBQVUsVUFFcEJpSixFQUFpQixTQUFXQyxHQUN4QixHQUFJQyxHQUFLLHdKQUNULE9BQU9BLEdBQUdyRCxLQUFLb0QsSUFFbkJQLEVBQWlCLFNBQVdJLEdBQ3hCLEdBQUlLLEdBQU9MLEVBQU1yRyxLQUFNLE9BRXZCLFFBQWEsVUFBVDBHLEdBQTZCLFNBQVRBLEdBRUEsS0FBaEJMLEVBQU1WLFNBT0QsVUFBVGUsR0FDS0gsRUFBZ0JGLEVBQU1WLFlBTS9CVyxHQUFZRCxJQWJKRCxFQUFlQyxJQUNSLEdBa0J2QjVKLEdBQU1rSyxXQUFhLFdBQ2YsR0FBSUMsSUFBUSxDQVVaLE9BUkFmLEdBQVE1SixLQUFNLFdBQ1ZGLEVBQUdJLE1BQU9zQyxZQUFhLGVBQ25CMUMsRUFBR0ksTUFBT3VDLFNBQVUsZUFDcEJrSSxHQUFRLEtBS1RBLEdBR1hyQyIsImZpbGUiOiJjaGVja291dC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbiggZnVuY3Rpb24oKXtcblxuICAgIHZhciBnbG9iYWxTY3JvbGxGbGFnID0gdHJ1ZTtcblxuICAgICQoIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBuZXcgUHJlbG9hZGVyKCAkKCcucHJlbG9hZGVyJykgKTtcblxuICAgICAgICAkLmVhY2goICQoICcuc2l0ZV9faGVhZGVyJyApLCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgbmV3IE1lbnUgKCAkKCB0aGlzICkgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICAgICAgJC5lYWNoKCAkKCdbZGF0YS1ocmVmXScpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBTY3JvbGxQYW5lbCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5zbGlkZXMnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgU2xpZGVzKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnLnNpdGVfX2NvbnRlbnQtZnVsbCcpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBGdWxsSGVpZ2h0KCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnLnNpdGVfaW5kZXgnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgU2Nyb2xsVG9IYXNoKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgfSApO1xuXG4gICAgdmFyIFByZWxvYWRlciA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyApLFxuICAgICAgICAgICAgX3ByZWxvYWRlciA9IG9iaixcbiAgICAgICAgICAgIF9ib2R5ID0gJCgnYm9keScpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICBsb2FkOiBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfc2hvd1NpdGUoKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfYm9keVswXS5wcmVsb2FkZXIgPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG5cblxuXG4gICAgICAgICAgICAgICAgJCgnaHRtbCcpLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAnb3ZlcmZsb3cteSc6ICdoaWRkZW4nXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3Nob3dTaXRlID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfcHJlbG9hZGVyLmFkZENsYXNzKCAncHJlbG9hZGVyX2xvYWRlZCcgKTtcblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgX3ByZWxvYWRlci5yZW1vdmUoKTtcblxuICAgICAgICAgICAgICAgICAgICAkKCdodG1sJykuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnb3ZlcmZsb3cteSc6ICdzY3JvbGwnXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNpdGUnKS5hZGRDbGFzcyggJ3NpdGVfX2xvYWRlZCcgKTtcblxuICAgICAgICAgICAgICAgIH0sNTAwKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBNZW51ID0gZnVuY3Rpb24oIG9iaiApIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICBfaHRtbCA9ICQoJ2h0bWwnKSxcbiAgICAgICAgICAgIF9tZW51ID0gX29iai5maW5kKCcuc2l0ZV9fbWVudScpLFxuICAgICAgICAgICAgX2NvbnRlbnQgPSAkKCcuc2l0ZV9fY29udGVudCcpLFxuICAgICAgICAgICAgX2FjdGlvbiA9IGZhbHNlLFxuICAgICAgICAgICAgX2FjdGlvbjIgPSBmYWxzZSxcbiAgICAgICAgICAgIF9mbGFnSGlkZSA9IHRydWUsXG4gICAgICAgICAgICBsYXN0U2Nyb2xsVG9wID0gMCxcbiAgICAgICAgICAgIF9zaG93TWVudUJ0biA9IF9vYmouZmluZCgnLnNpdGVfX21lbnUtYnRuJyksXG4gICAgICAgICAgICBfZ2xvYmFsV2lkdGggPSAwO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2dsb2JhbFdpZHRoID0gX3dpbmRvdy53aWR0aCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX2dsb2JhbFdpZHRoICE9IF93aW5kb3cud2lkdGgoKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9nbG9iYWxXaWR0aCA9IF93aW5kb3cud2lkdGgoKSArIDE7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbWVudS5zY3JvbGxUb3AoMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jbG9zZU1lbnUoIF9zaG93TWVudUJ0biApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ3Njcm9sbCc6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2FjdGlvbiA9IF93aW5kb3cuc2Nyb2xsVG9wKCkgPj0gX29iai5pbm5lckhlaWdodCgpICogMjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cuc2Nyb2xsVG9wKCkgPj0gX29iai5pbm5lckhlaWdodCgpKyAyMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfZmxhZ0hpZGUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2ZsYWdIaWRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZScgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2ZsYWdIaWRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGUnICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX2FjdGlvbiApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfb2JqLmhhc0NsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGUnICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdzaXRlX19oZWFkZXJfZml4ZWQnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGUnICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggX3dpbmRvdy5zY3JvbGxUb3AoKSA8PSBfb2JqLmlubmVySGVpZ2h0KCkgKiAzICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3NpdGVfX2hlYWRlcl9maXhlZCcgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGRlbicgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy5zY3JvbGxUb3AoKSA8PSAxMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdzaXRlX19oZWFkZXJfZml4ZWQnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3NpdGVfX2hlYWRlcl9oaWRkZW4nICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAnRE9NTW91c2VTY3JvbGwnOiBmdW5jdGlvbiAoIGUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IGUub3JpZ2luYWxFdmVudC5kZXRhaWw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZGVsdGEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gKCBkZWx0YSA+IDAgKSA/IDEgOiAtMTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCggZGlyZWN0aW9uICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBkaXJlY3Rpb24gPCAwICApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hY3Rpb24yID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hY3Rpb24yID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDAgKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAnbW91c2V3aGVlbCc6IGZ1bmN0aW9uICggZSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gZS5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZGVsdGEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gKCBkZWx0YSA+IDAgKSA/IC0xIDogMTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCggZGlyZWN0aW9uICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBkaXJlY3Rpb24gPCAwICApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hY3Rpb24yID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hY3Rpb24yID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDAgKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbihldmVudCl7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0ID0gJCh0aGlzKS5zY3JvbGxUb3AoKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoc3QgPiBsYXN0U2Nyb2xsVG9wKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCAxICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAxXG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCAtMSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gLTFcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxhc3RTY3JvbGxUb3AgPSBzdDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIGRpcmVjdGlvbiA8IDAgICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfYWN0aW9uMiA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYWN0aW9uMiA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDAgKVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIF9zaG93TWVudUJ0bi5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAkKCB0aGlzICkuaGFzQ2xhc3MoICdvcGVuZWQnICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2xvc2VNZW51KCAkKCB0aGlzICkgKVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb3Blbk1lbnUoICQoIHRoaXMgKSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NoZWNrU2Nyb2xsID0gZnVuY3Rpb24oIGRpcmVjdGlvbiApIHtcblxuICAgICAgICAgICAgICAgIGlmKCBkaXJlY3Rpb24gPiAwICYmICFfb2JqLmhhc0NsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGRlbicgKSAmJiAhX3Nob3dNZW51QnRuLmhhc0NsYXNzKCAnb3BlbmVkJyApICYmIF9hY3Rpb24gJiYgIV9hY3Rpb24yICl7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3NpdGVfX2hlYWRlcl9oaWRkZW4nICk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiggZGlyZWN0aW9uIDwgMCAmJiBfb2JqLmhhc0NsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGRlbicgKSAmJiAhX3Nob3dNZW51QnRuLmhhc0NsYXNzKCAnb3BlbmVkJyApICAmJiBfYWN0aW9uICYmIF9hY3Rpb24yICYmIGdsb2JhbFNjcm9sbEZsYWcgKXtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCdzaXRlX19oZWFkZXJfaGlkZGVuJyk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2xvc2VNZW51ID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cbiAgICAgICAgICAgICAgICBfaHRtbC5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bydcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBlbGVtLnJlbW92ZUNsYXNzKCAnb3BlbmVkJyApO1xuICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdvcGVuZWQtbWVudScgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb3Blbk1lbnUgPSBmdW5jdGlvbiggZWxlbSApICB7XG5cbiAgICAgICAgICAgICAgICBlbGVtLmFkZENsYXNzKCAnb3BlbmVkJyApO1xuICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdvcGVuZWQtbWVudScgKTtcblxuICAgICAgICAgICAgICAgIF9odG1sLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdoaWRkZW4nXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBTY3JvbGxQYW5lbCA9IGZ1bmN0aW9uICggb2JqICkge1xuXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2xpbmtzID0gX29iaixcbiAgICAgICAgICAgIF9odG1sID0gJCgnaHRtbCcpLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KSxcbiAgICAgICAgICAgIF9kb20gPSAgJCggJ2h0bWwsIGJvZHknKSxcbiAgICAgICAgICAgIF9oZWFkZXIgPSAkKCcuc2l0ZV9faGVhZGVyJyksXG4gICAgICAgICAgICBfcG9wdXAgPSAkKCcucG9wdXBfX2Nvb2tpZXMtaW5mbycpO1xuXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2NoYW5nZUFjdGl2ZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICdzY3JvbGwnOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGFuZ2VBY3RpdmUoKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX2xpbmtzLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKCB0aGlzICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q2xhc3MgPSBjdXJJdGVtLmF0dHIoJ2RhdGEtaHJlZicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRJdGVtVG9wID0gJCggJy4nICsgbmV3Q2xhc3MgICkub2Zmc2V0KCkudG9wO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zaXRlX19tZW51LW5hdl9hbmNob3JzIGEnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2RvbS5zdG9wKCB0cnVlLCBmYWxzZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2RvbS5hbmltYXRlKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBuZXh0SXRlbVRvcFxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxTY3JvbGxGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oZWFkZXIuYWRkQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZGVuJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbFNjcm9sbEZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjAwICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxTY3JvbGxGbGFnID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfaHRtbC5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLmZpbmQoJy5zaXRlX19tZW51LWJ0bicpLnJlbW92ZUNsYXNzKCAnb3BlbmVkJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2hlYWRlci5yZW1vdmVDbGFzcyggJ29wZW5lZC1tZW51JyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jaGFuZ2VBY3RpdmUgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gX3dpbmRvdy5zY3JvbGxUb3AoKSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbSA9ICQoJ2JvZHknKS5maW5kKCdbZGF0YS1zY3JvbGw9XCJzY3JvbGxcIl0nKSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbVBvcyA9IGl0ZW0ub2Zmc2V0KCkudG9wO1xuXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGl0ZW0ubGVuZ3RoOyBpKysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ciA9ICQoaXRlbVtpXSksXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtQ3VyID0gJChpdGVtW2ldKS5vZmZzZXQoKS50b3AgLSBfaGVhZGVyLm91dGVySGVpZ2h0KHRydWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUhlaWdodCA9ICQoaXRlbVtpXSkub3V0ZXJIZWlnaHQodHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIHNjcm9sbFRvcCA+IGl0ZW1DdXIgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJDbGFzcyA9IGN1ci5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyTGluayA9IF9saW5rcy5maWx0ZXIoXCJbZGF0YS1ocmVmPVwiK2N1ckNsYXNzWzBdK1wiXVwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2xpbmtzLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckxpbmsuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYoIHNjcm9sbFRvcCA+ICggaXRlbUN1ciArIGl0ZW1IZWlnaHQgKSApe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfbGlua3MucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIFNsaWRlcyA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbih7XG4gICAgICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2hlY2tTY3JvbGwgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgdmFyIGN1clNjcm9sbCA9IF93aW5kb3cuc2Nyb2xsVG9wKCksXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvd0ggPSBfd2luZG93LmhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICB0b3BQb3MgPSBfb2JqLm9mZnNldCgpLnRvcCxcbiAgICAgICAgICAgICAgICAgICAgdG9wSW5XaW5kb3cgPSB0b3BQb3MtY3VyU2Nyb2xsLFxuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlUGVyY2VudCA9IDEtKHRvcEluV2luZG93L3dpbmRvd0gpO1xuXG4gICAgICAgICAgICAgICAgaWYoIHZpc2libGVQZXJjZW50ID4gLjUgKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoICFfb2JqLmhhc0NsYXNzKCdzbGlkZXNfYWN0aXZlJykgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoJ3NsaWRlc19hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9vYmpbMF0uc2xpZGVzID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgRnVsbEhlaWdodCA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICBfaGVhZGVyID0gJCgnLnNpdGVfX2hlYWRlcicpLFxuICAgICAgICAgICAgX2dsb2JhbFdpZHRoID0gMDtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICBsb2FkOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9nbG9iYWxXaWR0aCA9IF93aW5kb3cud2lkdGgoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRIZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9nbG9iYWxXaWR0aCAhPSBfd2luZG93LndpZHRoKCkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZ2xvYmFsV2lkdGggPSBfd2luZG93LndpZHRoKCkgKyAxO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NldEhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0SGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gX3dpbmRvdy5oZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICdtaW4taGVpZ2h0JzogaGVpZ2h0IC0gX2hlYWRlci5pbm5lckhlaWdodCgpIC0gJCgnLnNpdGVfX21haW4tdGl0bGUnKS5vdXRlckhlaWdodCh0cnVlKVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIGlmKCBfb2JqLmZpbmQoJy5jb250YWN0LXVzJykubGVuZ3RoICkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6IGhlaWdodCAtIF9oZWFkZXIuaW5uZXJIZWlnaHQoKSAtICQoJy5zaXRlX19tYWluLXRpdGxlJykub3V0ZXJIZWlnaHQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6IGhlaWdodCAtIF9oZWFkZXIuaW5uZXJIZWlnaHQoKSAtICQoJy5zaXRlX19tYWluLXRpdGxlJykub3V0ZXJIZWlnaHQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBTY3JvbGxUb0hhc2ggPSBmdW5jdGlvbiAoIG9iaiApIHtcblxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICBfZG9tID0gICQoJ2h0bWwsIGJvZHknKTtcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zY3JvbGxUbygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDAgKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2Nyb2xsVG8gPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIHZhciBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2gucmVwbGFjZSgnIycsICcnKTtcblxuICAgICAgICAgICAgICAgIGlmKCBoYXNoICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtID0gJCggJy4nICsgd2luZG93LmxvY2F0aW9uLmhhc2gucmVwbGFjZSgnIycsICcnKSApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBlbGVtLmxlbmd0aCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKCAwLCBwYXJzZUludCggZWxlbS5vZmZzZXQoKS50b3AgKSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAkKCcuc2xpZGVzJykuYWRkQ2xhc3MoJ3NsaWRlc19hY3RpdmUnKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxufSApKCk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG4oIGZ1bmN0aW9uKCl7XG5cbiAgICB2YXIgZ2xvYmFsU2Nyb2xsRmxhZyA9IHRydWU7XG5cbiAgICAkKCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJC5lYWNoKCAkKCAnLmNoZWNrb3V0JyApLCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgbmV3IEJpbGxpbmdTaGlwcGluZyAoICQoIHRoaXMgKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgIH0gKTtcblxuICAgIHZhciBCaWxsaW5nU2hpcHBpbmcgPSBmdW5jdGlvbiggb2JqICkge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2RvbSA9ICAkKCAnaHRtbCwgYm9keScpLFxuICAgICAgICAgICAgX2hlYWRlciA9ICQoJy5zaXRlX19oZWFkZXInKSxcbiAgICAgICAgICAgIF9zaG93Q2hlY2tib3ggPSBfb2JqLmZpbmQoJy5jaGVja291dF9fc2hvdy1iaWxsaW5nIGlucHV0W3R5cGU9XCJjaGVja2JveFwiXScpLFxuICAgICAgICAgICAgX2JpbGxpbmdJbmZvID0gX29iai5maW5kKCcuY2hlY2tvdXRfX2luZm8tYmlsbGluZycpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfc2hvd0NoZWNrYm94Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZTogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3Nob3dDaGVja2JveC5wcm9wKCdjaGVja2VkJykgPT0gZmFsc2UgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYmlsbGluZ0luZm8uaGVpZ2h0KCBfYmlsbGluZ0luZm8uZmluZCgnPi5jaGVja291dF9faW5mbycpLm91dGVySGVpZ2h0KHRydWUpICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2JpbGxpbmdJbmZvLmFkZENsYXNzKCd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2RvbS5zdG9wKCB0cnVlLCBmYWxzZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kb20uYW5pbWF0ZSgge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IF9iaWxsaW5nSW5mby5vZmZzZXQoKS50b3AgLSAkKCcuY2hlY2tvdXRfX3RpdGxlJykub3V0ZXJIZWlnaHQodHJ1ZSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbFNjcm9sbEZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oZWFkZXIuYWRkQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZGVuJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxTY3JvbGxGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsU2Nyb2xsRmxhZyA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMCApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9iaWxsaW5nSW5mby5oZWlnaHQoIDAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYmlsbGluZ0luZm8ucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZG9tLnN0b3AoIHRydWUsIGZhbHNlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2RvbS5hbmltYXRlKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogX29iai5vZmZzZXQoKS50b3AgLSAkKCcuY2hlY2tvdXRfX3RpdGxlJykub3V0ZXJIZWlnaHQodHJ1ZSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbFNjcm9sbEZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oZWFkZXIuYWRkQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZGVuJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxTY3JvbGxGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsU2Nyb2xsRmxhZyA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMCApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9iaWxsaW5nSW5mby5maW5kKCdbZGF0YS1yZXF1aXJlZF0nKS5lYWNoKCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQodGhpcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5yZW1vdmVDbGFzcygnbm90LXRvdWNoZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5yZW1vdmVDbGFzcygnbm90LXZhbGlkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3NoaXAtdG8tZGlmZmVyZW50LWFkZHJlc3MtY2hlY2tib3gnKS50cmlnZ2VyKCdjbGljaycpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9vYmpbIDAgXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxufSApKCk7IiwiKCBmdW5jdGlvbigpe1xuXG4gICAgJCggZnVuY3Rpb24oKXtcbiAgICAgICAgJCggJ3NlbGVjdCcgKS5lYWNoKCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgbmV3IFdlYnN0ZXJzU2VsZWN0KCB7XG4gICAgICAgICAgICAgICAgb2JqOiAkKCB0aGlzICksXG4gICAgICAgICAgICAgICAgb3B0aW9uVHlwZTogMSxcbiAgICAgICAgICAgICAgICBzaG93VHlwZTogMlxuICAgICAgICAgICAgfSApO1xuICAgICAgICB9ICk7XG4gICAgfSApO1xuXG4gICAgdmFyIFdlYnN0ZXJzU2VsZWN0ID0gZnVuY3Rpb24oIHBhcmFtcyApe1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gcGFyYW1zLm9iaixcbiAgICAgICAgICAgIF9vcHRpb25UeXBlID0gcGFyYW1zLm9wdGlvblR5cGUgfHwgMCxcbiAgICAgICAgICAgIF9zaG93VHlwZSA9IHBhcmFtcy5zaG93VHlwZSB8fCAwLFxuICAgICAgICAgICAgX3Zpc2libGUgPSBwYXJhbXMudmlzaWJsZSB8fCA1LFxuICAgICAgICAgICAgX2RldmljZSA9IC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdCggbmF2aWdhdG9yLnVzZXJBZ2VudCApLFxuICAgICAgICAgICAgX3RleHQgPSAkKCAnPHNwYW4gY2xhc3M9XCJ3ZWJzdGVycy1zZWxlY3RfX2l0ZW1cIj48L3NwYW4+JyApLFxuICAgICAgICAgICAgX3dyYXAgPSAkKCAnPGRpdiBjbGFzcz1cIndlYnN0ZXJzLXNlbGVjdFwiPjwvZGl2PicgKSxcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcbiAgICAgICAgICAgIF9ib2R5ID0gJCggJ2JvZHknICksXG4gICAgICAgICAgICBfb3BlbmVkID0gZmFsc2UsXG4gICAgICAgICAgICBfcG9wdXAsIF9zY3JvbGw7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRXcmFwID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICB2YXIgY3VyVGV4dCA9ICcnO1xuXG4gICAgICAgICAgICAgICAgX29iai5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF9vYmoud3JhcCggX3dyYXAgKTtcbiAgICAgICAgICAgICAgICBfd3JhcCA9IF9vYmoucGFyZW50KCk7XG4gICAgICAgICAgICAgICAgX3dyYXAuYXBwZW5kKCAnPGRpdiBjbGFzcz1cIndlYnN0ZXJzLXNlbGVjdF9fYXJyb3dcIj48L2Rpdj4nICk7XG4gICAgICAgICAgICAgICAgX29iai5iZWZvcmUoIF90ZXh0ICk7XG4gICAgICAgICAgICAgICAgX29iai5maW5kKCAnb3B0aW9uJyApLmVhY2goIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCggdGhpcyApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBjdXJJdGVtLmF0dHIoICdzZWxlY3RlZCcgKSA9PSAnc2VsZWN0ZWQnICl7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJUZXh0ID0gY3VySXRlbS50ZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBpZiggY3VyVGV4dCA9PSAnJyApe1xuICAgICAgICAgICAgICAgICAgICBjdXJUZXh0ID0gIF9vYmouZmluZCggJ29wdGlvbicpLmVxKCAwICkudGV4dCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGV4dC50ZXh0KCBjdXJUZXh0ICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2hpZGVQb3B1cCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX29wZW5lZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgaWYoICFfc2hvd1R5cGUgKXtcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ25vbmUnXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIF9zaG93VHlwZSA9PSAxICl7XG4gICAgICAgICAgICAgICAgICAgIF9wb3B1cC5zdG9wKCB0cnVlLCBmYWxzZSApLnNsaWRlVXAoIDMwMCwgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9wb3B1cC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiggX3Nob3dUeXBlID09IDIgKSB7XG4gICAgICAgICAgICAgICAgICAgIF9wb3B1cC5zdG9wKCB0cnVlLCBmYWxzZSApLmZhZGVPdXQoIDMwMCwgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9wb3B1cC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF93cmFwLnJlbW92ZUNsYXNzKCAnd2Vic3RlcnMtc2VsZWN0X29wZW5lZCcgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jb25zdHJ1Y3RvciA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xuXG4gICAgICAgICAgICAgICAgX2FkZFdyYXAoKTtcbiAgICAgICAgICAgICAgICBfc2VsZWN0Vmlld1R5cGUoKTtcbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25FdmVudHMgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF9vYmoub24oICdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RleHQudGV4dCggJCggdGhpcyApLmZpbmQoICdvcHRpb246c2VsZWN0ZWQnICkudGV4dCgpICk7XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgaWYoIF9vcHRpb25UeXBlID09IDEgJiYgIV9kZXZpY2UgKXtcbiAgICAgICAgICAgICAgICAgICAgX3dyYXAub24oIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uKCBlICl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfb3BlbmVkICl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlUG9wdXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2hvd1BvcHVwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnY2xpY2snOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfb3BlbmVkICl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlUG9wdXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3NlbGVjdFZpZXdUeXBlID0gZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgIGlmKCAhX29wdGlvblR5cGUgfHwgX2RldmljZSApe1xuICAgICAgICAgICAgICAgICAgICBfc2V0TW9iaWxlVmlldygpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiggX29wdGlvblR5cGUgPT0gMSApe1xuICAgICAgICAgICAgICAgICAgICBfc2V0Q3VzdG9tMSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0Q3VzdG9tMSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX3dyYXAuYWRkQ2xhc3MoICd3ZWJzdGVycy1zZWxlY3RfY3VzdG9tJyApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRNb2JpbGVWaWV3ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfd3JhcC5hZGRDbGFzcyggJ3dlYnN0ZXJzLXNlbGVjdF9tb2JpbGUnICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3Nob3dQb3B1cCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdHMgPSAkKCAnc2VsZWN0JyApLFxuICAgICAgICAgICAgICAgICAgICBsaXN0ID0gJCggJzx1bD48L3VsPicpLFxuICAgICAgICAgICAgICAgICAgICBjdXJTY3JvbGwgPSBfd2luZG93LnNjcm9sbFRvcCgpLFxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBfd3JhcC5vZmZzZXQoKSxcbiAgICAgICAgICAgICAgICAgICAgbWF4SGVpZ2h0ID0gMCxcbiAgICAgICAgICAgICAgICAgICAgY3VySW5kZXggPSBfb2JqLmZpbmQoICdvcHRpb246c2VsZWN0ZWQnICkuaW5kZXgoKSxcbiAgICAgICAgICAgICAgICAgICAgaWQgPSBNYXRoLnJvdW5kKCBNYXRoLnJhbmRvbSgpICogMTAwMCApO1xuXG4gICAgICAgICAgICAgICAgc2VsZWN0cy5lYWNoKCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBpZiggdGhpcyAhPT0gX29ialsgMCBdICYmIHRoaXMub2JqLmNoZWNrT3BlbmVkKCkgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2JqLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBpZiggX29wZW5lZCApe1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF9vcGVuZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgX3BvcHVwID0gJCggJzxkaXYgY2xhc3M9XCJ3ZWJzdGVycy1zZWxlY3RfX3BvcHVwXCIgaWQ9XCJ3ZWJzdGVycy1zZWxlY3RfX3BvcHVwJyArIGlkICsgJ1wiPjwvZGl2PicgKTtcblxuICAgICAgICAgICAgICAgIF9vYmouZmluZCggJ29wdGlvbicgKS5lYWNoKCBmdW5jdGlvbiggaSApe1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQoIHRoaXMgKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiggaSA9PSBjdXJJbmRleCApe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdC5hcHBlbmQoICc8bGkgY2xhc3M9XCJhY3RpdmVcIj4nICsgY3VySXRlbS50ZXh0KCkgKyAnPC9saT4nICk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0LmFwcGVuZCggJzxsaT4nICsgY3VySXRlbS50ZXh0KCkgKyAnPC9saT4nICk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF9wb3B1cC5hcHBlbmQoIGxpc3QgKTtcbiAgICAgICAgICAgICAgICBfd3JhcC5hcHBlbmQoIF9wb3B1cCApO1xuICAgICAgICAgICAgICAgIF93cmFwLmFkZENsYXNzKCAnd2Vic3RlcnMtc2VsZWN0X29wZW5lZCcgKTtcblxuICAgICAgICAgICAgICAgIC8vX3BvcHVwLmNzcygge1xuICAgICAgICAgICAgICAgIC8vICAgIHdpZHRoOiBfd3JhcC5vdXRlcldpZHRoKCksXG4gICAgICAgICAgICAgICAgLy8gICAgbGVmdDogLTEsXG4gICAgICAgICAgICAgICAgLy8gICAgdG9wOiBfd3JhcC5vdXRlckhlaWdodCgpIC0gM1xuICAgICAgICAgICAgICAgIC8vfSApO1xuXG4gICAgICAgICAgICAgICAgbWF4SGVpZ2h0ID0gX3BvcHVwLm91dGVySGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgaWYoIG1heEhlaWdodCA+IF9wb3B1cC5maW5kKCAnbGknICkuZXEoIDAgKS5vdXRlckhlaWdodCgpICogX3Zpc2libGUgKXtcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLmhlaWdodCggX3BvcHVwLmZpbmQoICdsaScgKS5lcSggMCApLm91dGVySGVpZ2h0KCkgKiBfdmlzaWJsZSApO1xuICAgICAgICAgICAgICAgICAgICBfc2Nyb2xsID0gX3BvcHVwLnBlcmZlY3RTY3JvbGxiYXIoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiggX3Nob3dUeXBlID09IDEgKXtcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ25vbmUnXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLnNsaWRlRG93biggMzAwICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCBfc2hvd1R5cGUgPT0gMiApIHtcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC4xXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLmFuaW1hdGUoIHsgb3BhY2l0eTogMSB9LCAzMDApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF9wb3B1cC5maW5kKCAnbGknICkub24oIHtcbiAgICAgICAgICAgICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24oIGUgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9ICQoIHRoaXMgKS5pbmRleCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnZhbCggX29iai5maW5kKCAnb3B0aW9uJyApLmVxKCBpbmRleCApLmF0dHIoICd2YWx1ZScgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX29iai50cmlnZ2VyKCAnY2hhbmdlJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGVQb3B1cCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG4gICAgICAgIF9zZWxmLmNoZWNrT3BlbmVkID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHJldHVybiBfb3BlbmVkO1xuICAgICAgICB9O1xuICAgICAgICBfc2VsZi5jbG9zZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgX2hpZGVQb3B1cCgpO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgX2NvbnN0cnVjdG9yKCk7XG5cbiAgICB9O1xuXG59ICkoKTsiLCJcInVzZSBzdHJpY3RcIjtcbiggZnVuY3Rpb24oKXtcblxuICAgICQoIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAkLmVhY2goICQoICcuY2hlY2tvdXQnICksIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICBuZXcgRm9ybVZhbGlkYXRvciAoICQoIHRoaXMgKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgIH0gKTtcblxuICAgIHZhciBGb3JtVmFsaWRhdG9yID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2ZpZWxkcyA9IF9vYmouZmluZCggJ1tkYXRhLXJlcXVpcmVkXScgKSxcbiAgICAgICAgICAgIF9idG4gPSBfb2JqLmZpbmQoICcuY2hlY2tvdXRfX3Byb2NlZWQgLmJ0bicgKTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2NvbnN0cnVjdG9yID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hZGROb3RUb3VjaGVkQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfZmllbGRzLmVhY2goIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiggY3VySXRlbS5wYXJlbnRzKCcuY2hlY2tvdXRfX2luZm8tYmlsbGluZycpLmxlbmd0aCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGN1ckl0ZW0ucGFyZW50cygnLmNoZWNrb3V0X19pbmZvLWJpbGxpbmcnKS5oYXNDbGFzcygndmlzaWJsZScpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGN1ckl0ZW0udmFsKCkgPT09ICcnICl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5hZGRDbGFzcyggJ25vdC10b3VjaGVkJyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92YWxpZGF0ZUZpZWxkKCBjdXJJdGVtICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggY3VySXRlbS52YWwoKSA9PT0gJycgKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckl0ZW0uYWRkQ2xhc3MoICdub3QtdG91Y2hlZCcgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92YWxpZGF0ZUZpZWxkKCBjdXJJdGVtICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbkV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfZmllbGRzLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGZvY3VzOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJCggdGhpcyApLnJlbW92ZUNsYXNzKCAnbm90LXRvdWNoZWQnICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAga2V5dXA6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQodGhpcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBjdXJJdGVtLnBhcmVudHMoJy5jaGVja291dF9faW5mby1iaWxsaW5nJykubGVuZ3RoICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGN1ckl0ZW0ucGFyZW50cygnLmNoZWNrb3V0X19pbmZvLWJpbGxpbmcnKS5oYXNDbGFzcygndmlzaWJsZScpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92YWxpZGF0ZUZpZWxkKCAkKCB0aGlzICkgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92YWxpZGF0ZUZpZWxkKCAkKCB0aGlzICkgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfYnRuLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2FkZE5vdFRvdWNoZWRDbGFzcygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX2ZpZWxkcy5oYXNDbGFzcygnbm90LXRvdWNoZWQnKSB8fCBfZmllbGRzLmhhc0NsYXNzKCdub3QtdmFsaWQnKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLm5vdC10b3VjaGVkOmZpcnN0JykuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJy5ub3QtdmFsaWQ6Zmlyc3QnKS5mb2N1cygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNoZWNrb3V0X19mb3JtJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5teS1jYXJ0X19yZXZpZXcnKS5hZGRDbGFzcygndmlzaWJsZScpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX21ha2VOb3RWYWxpZCA9IGZ1bmN0aW9uICggZmllbGQgKSB7XG4gICAgICAgICAgICAgICAgZmllbGQuYWRkQ2xhc3MoICdub3QtdmFsaWQnICk7XG4gICAgICAgICAgICAgICAgZmllbGQucmVtb3ZlQ2xhc3MoICd2YWxpZCcgKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfbWFrZVZhbGlkID0gZnVuY3Rpb24gKCBmaWVsZCApIHtcbiAgICAgICAgICAgICAgICBmaWVsZC5yZW1vdmVDbGFzcyggJ25vdC12YWxpZCcgKTtcbiAgICAgICAgICAgICAgICBmaWVsZC5hZGRDbGFzcyggJ3ZhbGlkJyApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF92YWxpZGF0ZUVtYWlsID0gZnVuY3Rpb24gKCBlbWFpbCApIHtcbiAgICAgICAgICAgICAgICB2YXIgcmUgPSAvXigoW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKyhcXC5bXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKSopfChcIi4rXCIpKUAoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31dKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLztcbiAgICAgICAgICAgICAgICByZXR1cm4gcmUudGVzdChlbWFpbCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3ZhbGlkYXRlRmllbGQgPSBmdW5jdGlvbiAoIGZpZWxkICkge1xuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gZmllbGQuYXR0ciggJ3R5cGUnICk7XG5cbiAgICAgICAgICAgICAgICBpZiggdHlwZSA9PT0gJ2VtYWlsJyB8fCB0eXBlID09PSAndGV4dCcgKXtcblxuICAgICAgICAgICAgICAgICAgICBpZiggZmllbGQudmFsKCkgPT09ICcnICl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfbWFrZU5vdFZhbGlkKCBmaWVsZCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiggdHlwZSA9PT0gJ2VtYWlsJyApe1xuICAgICAgICAgICAgICAgICAgICBpZiggIV92YWxpZGF0ZUVtYWlsKCBmaWVsZC52YWwoKSApICl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfbWFrZU5vdFZhbGlkKCBmaWVsZCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgX21ha2VWYWxpZCggZmllbGQgKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcbiAgICAgICAgX3NlbGYuY2hlY2tWYWxpZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB2YWxpZCA9IHRydWU7XG5cbiAgICAgICAgICAgIF9maWVsZHMuZWFjaCggZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQoIHRoaXMgKS5yZW1vdmVDbGFzcyggJ25vdC10b3VjaGVkJyApO1xuICAgICAgICAgICAgICAgIGlmKCAkKCB0aGlzICkuaGFzQ2xhc3MoICdub3QtdmFsaWQnICkgKXtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgcmV0dXJuIHZhbGlkO1xuICAgICAgICB9O1xuXG4gICAgICAgIF9jb25zdHJ1Y3RvcigpO1xuICAgIH07XG5cbn0gKSgpO1xuIl19
