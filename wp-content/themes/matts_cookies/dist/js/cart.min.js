"use strict";!function(){var e=!0;$(function(){new i($(".preloader")),$.each($(".site__header"),function(){new n($(this))}),$.each($("[data-href]"),function(){new t($(this))}),$.each($(".slides"),function(){new s($(this))}),$.each($(".site__content-full"),function(){new o($(this))})});var i=function(e){var i=this,n=$(window),t=e,s=$("body"),o=function(){n.on({load:function(){d()}})},a=function(){s[0].preloader=i,o()},d=function(){t.addClass("preloader_loaded"),setTimeout(function(){t.remove(),$(".site").addClass("site__loaded")},500)};a()},n=function(i){var n=this,t=i,s=$(window),o=$("html"),a=t.find(".site__menu"),d=($(".site__content"),!1),r=!1,c=!0,h=0,l=t.find(".site__menu-btn"),u=0,f=function(){s.on({load:function(){u=s.width()},resize:function(){u!=s.width()&&(u=s.width()+1,s.width()>=1024&&(a.scrollTop(0),v(l)))},scroll:function(){d=s.scrollTop()>=2*t.innerHeight(),s.scrollTop()>=t.innerHeight()+20?c&&(c=!1,t.addClass("site__header_hide")):(c=!0,t.removeClass("site__header_hide")),d?t.hasClass("site__header_hide")&&setTimeout(function(){t.addClass("site__header_fixed"),t.removeClass("site__header_hide")},100):s.scrollTop()<=3*t.innerHeight()&&(t.removeClass("site__header_fixed"),t.removeClass("site__header_hidden")),s.scrollTop()<=10&&(t.removeClass("site__header_fixed"),t.removeClass("site__header_hidden"))},DOMMouseScroll:function(e){var i=e.originalEvent.detail;if(i){var n=i>0?1:-1;_(n)}n<0?r=!0:setTimeout(function(){r=!1},300)},mousewheel:function(e){var i=e.originalEvent.wheelDelta;if(i){var n=i>0?-1:1;_(n)}n<0?r=!0:setTimeout(function(){r=!1},300)}}),$(window).scroll(function(e){var i=$(this).scrollTop();if(i>h){_(1);var n=1}else{_(-1);var n=-1}h=i,n<0?r=!0:setTimeout(function(){r=!1},300)}),l.on({click:function(){$(this).hasClass("opened")?v($(this)):w($(this))}})},_=function(i){i>0&&!t.hasClass("site__header_hidden")&&!l.hasClass("opened")&&d&&!r&&t.addClass("site__header_hidden"),i<0&&t.hasClass("site__header_hidden")&&!l.hasClass("opened")&&d&&r&&e&&t.removeClass("site__header_hidden")},v=function(e){o.css({overflowY:"auto"}),e.removeClass("opened"),t.removeClass("opened-menu")},m=function(){t[0].obj=n,f()},w=function(e){e.addClass("opened"),t.addClass("opened-menu"),o.css({overflowY:"hidden"})};m()},t=function(i){var n=this,t=i,s=t,o=$("html"),a=$(window),d=$("html, body"),r=$(".site__header"),c=($(".popup__cookies-info"),function(){a.on({resize:function(){},scroll:function(){}}),s.on({click:function(){var i=$(this),n=i.attr("data-href"),t=$("."+n).offset().top-r.innerHeight();return s.removeClass("active"),i.addClass("active"),t=$("."+n).offset().top,d.stop(!0,!1),d.animate({scrollTop:t},{duration:500,progress:function(){e=!1,r.addClass("site__header_hidden")},complete:function(){setTimeout(function(){e=!1},200),setTimeout(function(){e=!0},500)}}),o.css({overflowY:"auto"}),r.find(".site__menu-btn").removeClass("opened"),r.removeClass("opened-menu"),!1}})}),h=function(){t[0].obj=n,c()};h()},s=function(e){var i=this,n=e,t=$(window),s=function(){t.on({scroll:function(){o()}})},o=function(){var e=t.scrollTop(),i=t.height(),s=n.offset().top,o=s-e,a=1-o/i;a>.5&&(n.hasClass("slides_active")||n.addClass("slides_active"))},a=function(){n[0].slides=i,s(),o()};a()},o=function(e){var i=this,n=e,t=$(window),s=$(".site__header"),o=0,a=function(){t.on({load:function(){o=t.width(),r()},resize:function(){o!=t.width()&&(o=t.width()+1,r())}})},d=function(){n[0].obj=i,a()},r=function(){var e=t.height();n.css({"min-height":e-s.innerHeight()-$(".site__main-title").outerHeight(!0)}),n.find(".contact-us").length&&t.width()>=1024?n.css({"min-height":""}):n.css({"min-height":e-s.innerHeight()-$(".site__main-title").outerHeight(!0)})};d()}}();
!function(){$(function(){$(".popup").each(function(){new o($(this))})});var o=function(o){var n,t=this,i=40,p=$(".popup__open"),e=o,c=e.find(".popup__close, .popup__cancel"),s=e.find(".popup__wrap"),u=e.find(".popup__content"),d=$("html"),a=$(window),h=setTimeout(function(){},1),f=function(){a.height()-2*i-s.height()>0?s.css({top:(a.height()-2*i-s.height())/2}):s.css({top:0})},l=function(){var o,n=document.createElement("div");return n.className="popup__scrollbar-measure",document.body.appendChild(n),o=n.offsetWidth-n.clientWidth,document.body.removeChild(n),o},r=function(){e.css({overflowY:"hidden"}),d.css({overflowY:"auto",paddingRight:0}),e.removeClass("popup_opened"),e.addClass("popup_hide"),h=setTimeout(function(){e.css({overflowY:"scroll"}),e.removeClass("popup_hide")},300)},_=function(){e[0].obj=t,v()},v=function(){a.on({load:function(){n=a.width()},resize:function(){f(),a.width()>=1024&&n!=a.width()&&(n=a.width()+1,r())}}),p.on({click:function(){return $(this).hasClass("cookies-info_btn")?a.width()<1024?(w($(this).attr("data-popup")),!1):void 0:(w($(this).attr("data-popup")),!1)}}),s.on({click:function(o){o.stopPropagation()}}),e.on({click:function(){return r(),!1}}),c.on({click:function(){return r(),!1}})},w=function(o){m(o),d.css({overflowY:"hidden",paddingRight:l()}),e.addClass("popup_opened"),f()},m=function(o){var n=u.filter(".popup__"+o);u.css({display:"none"}),n.css({display:"block"})};_()}}();
"use strict";!function(){$(function(){$.each($(".count-product"),function(){new n($(this))})});var n=function(n){var t=this,c=n,i=c.find(".count-product__input"),u=c.find(".count-product_add"),o=c.find(".count-product_del"),e=function(){i.on({keypress:function(){46==event.which&&$(this).val().indexOf(".")==-1||!(event.which<48||event.which>57)||event.preventDefault()}}),i.on({keyup:function(){""==i.val()&&i.val(1)}}),u.on({click:function(){return f(),!1}}),o.on({click:function(){return r(),!1}})},f=function(){var n=parseInt(i.val());i.val(n+1)},r=function(){var n=parseInt(i.val());1!=n&&i.val(n-1)},a=function(){c[0].obj=t,e()};a()}}();
"use strict";!function(){$(function(){$.each($(".my-cart__product"),function(){new t($(this))}),$.each($(".product-single__info"),function(){new n($(this))})});var t=function(t){var n=this,i=t,e=i.find(".count-product__input"),o=i.find(".count-product__btn"),a=i.find(".my-cart__remove"),c=new XMLHttpRequest,r=$(".cart"),d=$(".my-cart__total"),s=$(window),u=function(){s.on({load:function(){p()},resize:function(){p()}}),e.on({keypress:function(){(46==event.which&&$(this).val().indexOf(".")==-1||!(event.which<48||event.which>57))&&_($(this).parents(".my-cart__product"))}}),o.on({click:function(){_($(this).parents(".my-cart__product"))}}),a.on({click:function(){return l($(this).parents(".my-cart__product")),!1}})},f=function(t){t.addClass("hidden"),setTimeout(function(){t.remove()},500)},l=function(t){c.abort(),c=$.ajax({url:$("body").attr("data-action"),data:{id:t.attr("data-id"),flag:"remove"},dataType:"json",type:"get",success:function(n){f(t),0==parseInt(n.cartCountProducts)?(r.find("div").remove(),r.removeClass("cart_fill"),$(".site__header").removeClass("site__header_fill-cart")):r.find("div").html(n.cartCountProducts),d.find("span").html(n.subtotal)},error:function(t){"abort"!=t.statusText&&alert("ERROR!!!")}})},_=function(t){c.abort(),c=$.ajax({url:$("body").attr("data-action"),data:{id:t.attr("data-id"),countProduct:t.find(".count-product__input").val(),flag:"changeCount"},dataType:"json",type:"get",success:function(n){t.find(".my-cart__total-price").html(n.total),d.find("span").html(n.subtotal)},error:function(t){"abort"!=t.statusText&&alert("ERROR!!!")}})},p=function(){i.each(function(){var t=$(this),n=t.find(">div");t.height(n.outerHeight(!0))})},h=function(){i[0].obj=n,u()};h()},n=function(t){var n=this,i=t,e=i.find(".count-product__input"),o=i.find(".product-single__price"),a=i.find(".product-single__add"),c=new XMLHttpRequest,r=$(".cart"),d=($(window),function(){a.on({click:function(t){return a.hasClass("adding")||(s(t),u(t,$(this).parents(".product-single__info")),a.addClass("adding")),!1}})}),s=function(t){var n=$(".gallery__top .slick-current").data("image"),i=t||window.event;i.pageX,i.pageY;console.log(n),$("body").append('<div class="site__product hidden" style="background-image: '+n+'"></div>'),$(".site__product").css({top:$(".gallery__top").offset().top+$(".gallery__top").innerHeight()/2-$(".site__product").height()/2,left:$(".gallery__top").offset().left+$(".gallery__top").innerWidth()/2-$(".site__product").width()/2}),setTimeout(function(){$(".site__product").addClass("visible"),$(".site__product").css({top:r.offset().top+r.innerHeight()/2-$(".site__product").height()/2,left:r.offset().left+r.innerWidth()/2-$(".site__product").width()/2})},100),setTimeout(function(){$(".site__product").removeClass("visible")},500),setTimeout(function(){$(".site__product").remove(),a.removeClass("adding")},700)},u=function(t){c.abort(),c=$.ajax({url:$("body").attr("data-action"),data:{id:t.attr("data-id"),countProduct:e.val(),price:o.text(),flag:"addToCart"},dataType:"json",type:"get",success:function(t){r.hasClass("cart_fill")?setTimeout(function(){r.find("div").html(t.cartCountProducts)},700):setTimeout(function(){r.append("<div></div>"),r.addClass("cart_fill"),$(".site__header").addClass("site__header_fill-cart"),setTimeout(function(){r.find("div").html(t.cartCountProducts)},100)},600)},error:function(t){"abort"!=t.statusText&&alert("ERROR!!!")}})},f=function(){i[0].obj=n,d()};f()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5tYWluLmpzIiwianF1ZXJ5LnBvcHVwLmpzIiwianF1ZXJ5Lm51bWJlci1zcGlubmVyLmpzIiwianF1ZXJ5LmFqYXgtY2FydC5qcyJdLCJuYW1lcyI6WyJnbG9iYWxTY3JvbGxGbGFnIiwiJCIsIlByZWxvYWRlciIsImVhY2giLCJNZW51IiwidGhpcyIsIlNjcm9sbFBhbmVsIiwiU2xpZGVzIiwiRnVsbEhlaWdodCIsIm9iaiIsIl9zZWxmIiwiX3dpbmRvdyIsIndpbmRvdyIsIl9wcmVsb2FkZXIiLCJfYm9keSIsIl9hZGRFdmVudHMiLCJvbiIsImxvYWQiLCJfc2hvd1NpdGUiLCJfaW5pdCIsInByZWxvYWRlciIsImFkZENsYXNzIiwic2V0VGltZW91dCIsInJlbW92ZSIsIl9vYmoiLCJfaHRtbCIsIl9tZW51IiwiZmluZCIsIl9hY3Rpb24iLCJfYWN0aW9uMiIsIl9mbGFnSGlkZSIsImxhc3RTY3JvbGxUb3AiLCJfc2hvd01lbnVCdG4iLCJfZ2xvYmFsV2lkdGgiLCJ3aWR0aCIsInJlc2l6ZSIsInNjcm9sbFRvcCIsIl9jbG9zZU1lbnUiLCJzY3JvbGwiLCJpbm5lckhlaWdodCIsInJlbW92ZUNsYXNzIiwiaGFzQ2xhc3MiLCJET01Nb3VzZVNjcm9sbCIsImUiLCJkZWx0YSIsIm9yaWdpbmFsRXZlbnQiLCJkZXRhaWwiLCJkaXJlY3Rpb24iLCJfY2hlY2tTY3JvbGwiLCJtb3VzZXdoZWVsIiwid2hlZWxEZWx0YSIsImV2ZW50Iiwic3QiLCJjbGljayIsIl9vcGVuTWVudSIsImVsZW0iLCJjc3MiLCJvdmVyZmxvd1kiLCJfbGlua3MiLCJfZG9tIiwiX2hlYWRlciIsImN1ckl0ZW0iLCJuZXdDbGFzcyIsImF0dHIiLCJuZXh0SXRlbVRvcCIsIm9mZnNldCIsInRvcCIsInN0b3AiLCJhbmltYXRlIiwiZHVyYXRpb24iLCJwcm9ncmVzcyIsImNvbXBsZXRlIiwiY3VyU2Nyb2xsIiwid2luZG93SCIsImhlaWdodCIsInRvcFBvcyIsInRvcEluV2luZG93IiwidmlzaWJsZVBlcmNlbnQiLCJzbGlkZXMiLCJfc2V0SGVpZ2h0IiwibWluLWhlaWdodCIsIm91dGVySGVpZ2h0IiwibGVuZ3RoIiwiUG9wdXAiLCJfcG9wdXBQYWRkaW5nIiwiX2J0blNob3ciLCJfYnRuQ2xvc2UiLCJfd3JhcCIsIl9jb250ZW50cyIsIl9zY3JvbGxDb250ZWluZXIiLCJfdGltZXIiLCJfY2VudGVyV3JhcCIsIl9nZXRTY3JvbGxXaWR0aCIsInNjcm9sbEJhcldpZHRoIiwic2Nyb2xsRGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYm9keSIsImFwcGVuZENoaWxkIiwib2Zmc2V0V2lkdGgiLCJjbGllbnRXaWR0aCIsInJlbW92ZUNoaWxkIiwiX2hpZGUiLCJwYWRkaW5nUmlnaHQiLCJfb25FdmVudHMiLCJfc2hvdyIsInN0b3BQcm9wYWdhdGlvbiIsIl9zZXRQb3B1cENvbnRlbnQiLCJjdXJDb250ZW50IiwiZmlsdGVyIiwiZGlzcGxheSIsIlNwaW5uZXIiLCJfaW5wdXQiLCJfYnRuVXAiLCJfYnRuRG93biIsImtleXByZXNzIiwid2hpY2giLCJ2YWwiLCJpbmRleE9mIiwicHJldmVudERlZmF1bHQiLCJrZXl1cCIsIl9hZGRDb3VudCIsIl9yZWR1Y2VDb3VudCIsInZhbHVlIiwicGFyc2VJbnQiLCJQcm9kdWN0c0luQ2FydCIsIkFkZFByb2R1Y3RzVG9DYXJ0IiwiX2J0bkNoYW5nZUNvdW50IiwiX2J0blJlbW92ZVByb2R1Y3QiLCJfcmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0IiwiX2NhcnQiLCJfdG90YWxQcmljZSIsIl9yZXF1ZXN0Q291bnRDaGFuZ2UiLCJwYXJlbnRzIiwiX3JlcXVlc3RQcm9kdWN0UmVtb3ZlIiwiX3JlbW92ZVByb2R1Y3QiLCJhYm9ydCIsImFqYXgiLCJ1cmwiLCJkYXRhIiwiaWQiLCJmbGFnIiwiZGF0YVR5cGUiLCJ0eXBlIiwic3VjY2VzcyIsIm0iLCJjYXJ0Q291bnRQcm9kdWN0cyIsImh0bWwiLCJzdWJ0b3RhbCIsImVycm9yIiwic3RhdHVzVGV4dCIsImFsZXJ0IiwiY291bnRQcm9kdWN0IiwidG90YWwiLCJjaGlsZHJlbiIsIl9wcmljZSIsIl9hZGRUb0NhcnRCdG4iLCJfYW5pbWF0ZWRBZGRpbmciLCJfcmVxdWVzdFByb2R1Y3RBZGRUb0NhcnQiLCJwaWMiLCJwYWdlWCIsInBhZ2VZIiwiY29uc29sZSIsImxvZyIsImFwcGVuZCIsImxlZnQiLCJpbm5lcldpZHRoIiwicHJpY2UiLCJ0ZXh0Il0sIm1hcHBpbmdzIjoiQUFBQSxjQUNBLFdBRUksR0FBSUEsSUFBbUIsQ0FFdkJDLEdBQUcsV0FFQyxHQUFJQyxHQUFXRCxFQUFFLGVBRWpCQSxFQUFFRSxLQUFNRixFQUFHLGlCQUFtQixXQUUxQixHQUFJRyxHQUFPSCxFQUFHSSxTQUlsQkosRUFBRUUsS0FBTUYsRUFBRSxlQUFnQixXQUV0QixHQUFJSyxHQUFhTCxFQUFFSSxTQUl2QkosRUFBRUUsS0FBTUYsRUFBRSxXQUFZLFdBRWxCLEdBQUlNLEdBQVFOLEVBQUVJLFNBSWxCSixFQUFFRSxLQUFNRixFQUFFLHVCQUF3QixXQUU5QixHQUFJTyxHQUFZUCxFQUFFSSxVQU0xQixJQUFJSCxHQUFZLFNBQVVPLEdBR3RCLEdBQUlDLEdBQVFMLEtBQ1JNLEVBQVVWLEVBQUdXLFFBQ2JDLEVBQWFKLEVBQ2JLLEVBQVFiLEVBQUUsUUFHVmMsRUFBYSxXQUVUSixFQUFRSyxJQUNKQyxLQUFNLFdBRUZDLFFBTVpDLEVBQVEsV0FFSkwsRUFBTSxHQUFHTSxVQUFZVixFQUNyQkssS0FHSkcsRUFBWSxXQUVSTCxFQUFXUSxTQUFVLG9CQUVyQkMsV0FBVyxXQUNQVCxFQUFXVSxTQUNYdEIsRUFBRSxTQUFTb0IsU0FBVSxpQkFFdkIsS0FRVkYsTUFHQWYsRUFBTyxTQUFVSyxHQUdqQixHQUFJQyxHQUFRTCxLQUNSbUIsRUFBT2YsRUFDUEUsRUFBVVYsRUFBRVcsUUFDWmEsRUFBUXhCLEVBQUUsUUFDVnlCLEVBQVFGLEVBQUtHLEtBQUssZUFFbEJDLEdBRFczQixFQUFFLG1CQUNI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QUFXekcsR0FFbEMyRSxFQUFTUSxRQUNUUixFQUFXakksRUFBRTBJLE1BQ1RDLElBQUszSSxFQUFFLFFBQVE4RCxLQUFLLGVBQ3BCOEUsTUFDSUMsR0FBSXZGLEVBQUtRLEtBQUssV0FDZDJGLGFBQWN6QyxFQUFPSyxNQUNyQm1ELE1BQU9aLEVBQU9hLE9BQ2QzQixLQUFNLGFBRVZDLFNBQVUsT0FDVkMsS0FBTSxNQUNOQyxRQUFTLFNBQVVDLEdBRVJmLEVBQU0zRixTQUFTLGFBa0JsQm5CLFdBQVksV0FFUjhHLEVBQU16RyxLQUFLLE9BQU8wSCxLQUFLRixFQUFFQyxvQkFFMUIsS0FwQkg5SCxXQUFZLFdBRVI4RyxFQUFNa0MsT0FBTyxlQUNibEMsRUFBTS9HLFNBQVMsYUFDZnBCLEVBQUUsaUJBQWlCb0IsU0FBUywwQkFFNUJDLFdBQVksV0FFUjhHLEVBQU16RyxLQUFLLE9BQU8wSCxLQUFLRixFQUFFQyxvQkFFMUIsTUFFSixNQWFYRyxNQUFPLFNBQVVwQixHQUNxQixTQUE3QkEsRUFBZXFCLFlBQ2hCQyxNQUFNLGdCQU10QnRJLEVBQVEsV0FDSkssRUFBSyxHQUFHZixJQUFNQyxFQUNkSyxJQVFSSSIsImZpbGUiOiJjYXJ0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuKCBmdW5jdGlvbigpe1xuXG4gICAgdmFyIGdsb2JhbFNjcm9sbEZsYWcgPSB0cnVlO1xuXG4gICAgJCggZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIG5ldyBQcmVsb2FkZXIoICQoJy5wcmVsb2FkZXInKSApO1xuXG4gICAgICAgICQuZWFjaCggJCggJy5zaXRlX19oZWFkZXInICksIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICBuZXcgTWVudSAoICQoIHRoaXMgKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJ1tkYXRhLWhyZWZdJyksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IFNjcm9sbFBhbmVsKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnLnNsaWRlcycpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBTbGlkZXMoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcuc2l0ZV9fY29udGVudC1mdWxsJyksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IEZ1bGxIZWlnaHQoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICB9ICk7XG5cbiAgICB2YXIgUHJlbG9hZGVyID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXG4gICAgICAgICAgICBfcHJlbG9hZGVyID0gb2JqLFxuICAgICAgICAgICAgX2JvZHkgPSAkKCdib2R5Jyk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9zaG93U2l0ZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9ib2R5WzBdLnByZWxvYWRlciA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zaG93U2l0ZSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX3ByZWxvYWRlci5hZGRDbGFzcyggJ3ByZWxvYWRlcl9sb2FkZWQnICk7XG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIF9wcmVsb2FkZXIucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5zaXRlJykuYWRkQ2xhc3MoICdzaXRlX19sb2FkZWQnICk7XG5cbiAgICAgICAgICAgICAgICB9LDUwMCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgTWVudSA9IGZ1bmN0aW9uKCBvYmogKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpLFxuICAgICAgICAgICAgX2h0bWwgPSAkKCdodG1sJyksXG4gICAgICAgICAgICBfbWVudSA9IF9vYmouZmluZCgnLnNpdGVfX21lbnUnKSxcbiAgICAgICAgICAgIF9jb250ZW50ID0gJCgnLnNpdGVfX2NvbnRlbnQnKSxcbiAgICAgICAgICAgIF9hY3Rpb24gPSBmYWxzZSxcbiAgICAgICAgICAgIF9hY3Rpb24yID0gZmFsc2UsXG4gICAgICAgICAgICBfZmxhZ0hpZGUgPSB0cnVlLFxuICAgICAgICAgICAgbGFzdFNjcm9sbFRvcCA9IDAsXG4gICAgICAgICAgICBfc2hvd01lbnVCdG4gPSBfb2JqLmZpbmQoJy5zaXRlX19tZW51LWJ0bicpLFxuICAgICAgICAgICAgX2dsb2JhbFdpZHRoID0gMDtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICBsb2FkOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9nbG9iYWxXaWR0aCA9IF93aW5kb3cud2lkdGgoKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9nbG9iYWxXaWR0aCAhPSBfd2luZG93LndpZHRoKCkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZ2xvYmFsV2lkdGggPSBfd2luZG93LndpZHRoKCkgKyAxO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDEwMjQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX21lbnUuc2Nyb2xsVG9wKDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2xvc2VNZW51KCBfc2hvd01lbnVCdG4gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICdzY3JvbGwnOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9hY3Rpb24gPSBfd2luZG93LnNjcm9sbFRvcCgpID49IF9vYmouaW5uZXJIZWlnaHQoKSAqIDI7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LnNjcm9sbFRvcCgpID49IF9vYmouaW5uZXJIZWlnaHQoKSsgMjAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX2ZsYWdIaWRlICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9mbGFnSGlkZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGUnICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9mbGFnSGlkZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3NpdGVfX2hlYWRlcl9oaWRlJyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9hY3Rpb24gKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX29iai5oYXNDbGFzcyggJ3NpdGVfX2hlYWRlcl9oaWRlJyApICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAnc2l0ZV9faGVhZGVyX2ZpeGVkJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3NpdGVfX2hlYWRlcl9oaWRlJyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMCApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIF93aW5kb3cuc2Nyb2xsVG9wKCkgPD0gX29iai5pbm5lckhlaWdodCgpICogMyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdzaXRlX19oZWFkZXJfZml4ZWQnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3NpdGVfX2hlYWRlcl9oaWRkZW4nICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cuc2Nyb2xsVG9wKCkgPD0gMTAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAnc2l0ZV9faGVhZGVyX2ZpeGVkJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZGVuJyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ0RPTU1vdXNlU2Nyb2xsJzogZnVuY3Rpb24gKCBlICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBlLm9yaWdpbmFsRXZlbnQuZGV0YWlsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGRlbHRhICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9ICggZGVsdGEgPiAwICkgPyAxIDogLTE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoIGRpcmVjdGlvbiApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZGlyZWN0aW9uIDwgMCAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYWN0aW9uMiA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYWN0aW9uMiA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwIClcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ21vdXNld2hlZWwnOiBmdW5jdGlvbiAoIGUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IGUub3JpZ2luYWxFdmVudC53aGVlbERlbHRhO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGRlbHRhICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9ICggZGVsdGEgPiAwICkgPyAtMSA6IDE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoIGRpcmVjdGlvbiApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZGlyZWN0aW9uIDwgMCAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYWN0aW9uMiA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYWN0aW9uMiA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwIClcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oZXZlbnQpe1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdCA9ICQodGhpcykuc2Nyb2xsVG9wKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0ID4gbGFzdFNjcm9sbFRvcCl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCggMSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gMVxuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCggLTEgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IC0xXG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsYXN0U2Nyb2xsVG9wID0gc3Q7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCBkaXJlY3Rpb24gPCAwICApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2FjdGlvbjIgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FjdGlvbjIgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwIClcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBfc2hvd01lbnVCdG4ub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggJCggdGhpcyApLmhhc0NsYXNzKCAnb3BlbmVkJyApICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Nsb3NlTWVudSggJCggdGhpcyApIClcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29wZW5NZW51KCAkKCB0aGlzICkgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jaGVja1Njcm9sbCA9IGZ1bmN0aW9uKCBkaXJlY3Rpb24gKSB7XG5cbiAgICAgICAgICAgICAgICBpZiggZGlyZWN0aW9uID4gMCAmJiAhX29iai5oYXNDbGFzcyggJ3NpdGVfX2hlYWRlcl9oaWRkZW4nICkgJiYgIV9zaG93TWVudUJ0bi5oYXNDbGFzcyggJ29wZW5lZCcgKSAmJiBfYWN0aW9uICYmICFfYWN0aW9uMiApe1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZGVuJyApO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYoIGRpcmVjdGlvbiA8IDAgJiYgX29iai5oYXNDbGFzcyggJ3NpdGVfX2hlYWRlcl9oaWRkZW4nICkgJiYgIV9zaG93TWVudUJ0bi5oYXNDbGFzcyggJ29wZW5lZCcgKSAgJiYgX2FjdGlvbiAmJiBfYWN0aW9uMiAmJiBnbG9iYWxTY3JvbGxGbGFnICl7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcygnc2l0ZV9faGVhZGVyX2hpZGRlbicpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2Nsb3NlTWVudSA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXG4gICAgICAgICAgICAgICAgX2h0bWwuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2F1dG8nXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgZWxlbS5yZW1vdmVDbGFzcyggJ29wZW5lZCcgKTtcbiAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAnb3BlbmVkLW1lbnUnICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9vYmpbIDAgXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29wZW5NZW51ID0gZnVuY3Rpb24oIGVsZW0gKSAge1xuXG4gICAgICAgICAgICAgICAgZWxlbS5hZGRDbGFzcyggJ29wZW5lZCcgKTtcbiAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAnb3BlbmVkLW1lbnUnICk7XG5cbiAgICAgICAgICAgICAgICBfaHRtbC5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnaGlkZGVuJ1xuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgU2Nyb2xsUGFuZWwgPSBmdW5jdGlvbiAoIG9iaiApIHtcblxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9saW5rcyA9IF9vYmosXG4gICAgICAgICAgICBfaHRtbCA9ICQoJ2h0bWwnKSxcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICBfZG9tID0gICQoICdodG1sLCBib2R5JyksXG4gICAgICAgICAgICBfaGVhZGVyID0gJCgnLnNpdGVfX2hlYWRlcicpLFxuICAgICAgICAgICAgX3BvcHVwID0gJCgnLnBvcHVwX19jb29raWVzLWluZm8nKTtcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vX2NoYW5nZUFjdGl2ZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICdzY3JvbGwnOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vX2NoYW5nZUFjdGl2ZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfbGlua3Mub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQoIHRoaXMgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdDbGFzcyA9IGN1ckl0ZW0uYXR0cignZGF0YS1ocmVmJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEl0ZW1Ub3AgPSAkKCAnLicgKyBuZXdDbGFzcyAgKS5vZmZzZXQoKS50b3AgLSBfaGVhZGVyLmlubmVySGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9saW5rcy5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEl0ZW1Ub3AgPSAkKCAnLicgKyBuZXdDbGFzcyAgKS5vZmZzZXQoKS50b3A7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgX2RvbS5zdG9wKCB0cnVlLCBmYWxzZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2RvbS5hbmltYXRlKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBuZXh0SXRlbVRvcFxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxTY3JvbGxGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oZWFkZXIuYWRkQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZGVuJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbFNjcm9sbEZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjAwICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxTY3JvbGxGbGFnID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfaHRtbC5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLmZpbmQoJy5zaXRlX19tZW51LWJ0bicpLnJlbW92ZUNsYXNzKCAnb3BlbmVkJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2hlYWRlci5yZW1vdmVDbGFzcyggJ29wZW5lZC1tZW51JyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jaGFuZ2VBY3RpdmUgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpLFxuICAgICAgICAgICAgICAgICAgICBpdGVtID0gJCgnYm9keScpLmZpbmQoJ1tkYXRhLXNjcm9sbD1cInNjcm9sbFwiXScpLFxuICAgICAgICAgICAgICAgICAgICBpdGVtUG9zID0gaXRlbS5vZmZzZXQoKS50b3A7XG5cbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgaXRlbS5sZW5ndGg7IGkrKyApIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VyID0gJChpdGVtW2ldKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1DdXIgPSAkKGl0ZW1baV0pLm9mZnNldCgpLnRvcCAtIF9oZWFkZXIub3V0ZXJIZWlnaHQodHJ1ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtSGVpZ2h0ID0gJChpdGVtW2ldKS5vdXRlckhlaWdodCh0cnVlKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiggc2Nyb2xsVG9wID4gaXRlbUN1ciApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckNsYXNzID0gY3VyLmF0dHIoJ2NsYXNzJykuc3BsaXQoJyAnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJMaW5rID0gX2xpbmtzLmZpbHRlcihcIltkYXRhLWhyZWY9XCIrY3VyQ2xhc3NbMF0rXCJdXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfbGlua3MucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyTGluay5hZGRDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiggc2Nyb2xsVG9wID4gKCBpdGVtQ3VyICsgaXRlbUhlaWdodCApICl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9saW5rcy5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgICAgIC8vX2NoYW5nZUFjdGl2ZSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgU2xpZGVzID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKHtcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jaGVja1Njcm9sbCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgdmFyIGN1clNjcm9sbCA9IF93aW5kb3cuc2Nyb2xsVG9wKCksXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvd0ggPSBfd2luZG93LmhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICB0b3BQb3MgPSBfb2JqLm9mZnNldCgpLnRvcCxcbiAgICAgICAgICAgICAgICAgICAgdG9wSW5XaW5kb3cgPSB0b3BQb3MtY3VyU2Nyb2xsLFxuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlUGVyY2VudCA9IDEtKHRvcEluV2luZG93L3dpbmRvd0gpO1xuXG4gICAgICAgICAgICAgICAgaWYoIHZpc2libGVQZXJjZW50ID4gLjUgKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoICFfb2JqLmhhc0NsYXNzKCdzbGlkZXNfYWN0aXZlJykgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoJ3NsaWRlc19hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9vYmpbMF0uc2xpZGVzID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xuXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIEZ1bGxIZWlnaHQgPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpLFxuICAgICAgICAgICAgX2hlYWRlciA9ICQoJy5zaXRlX19oZWFkZXInKSxcbiAgICAgICAgICAgIF9nbG9iYWxXaWR0aCA9IDA7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfZ2xvYmFsV2lkdGggPSBfd2luZG93LndpZHRoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfc2V0SGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfZ2xvYmFsV2lkdGggIT0gX3dpbmRvdy53aWR0aCgpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2dsb2JhbFdpZHRoID0gX3dpbmRvdy53aWR0aCgpICsgMTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRIZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9vYmpbIDAgXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3NldEhlaWdodCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IF93aW5kb3cuaGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6IGhlaWdodCAtIF9oZWFkZXIuaW5uZXJIZWlnaHQoKSAtICQoJy5zaXRlX19tYWluLXRpdGxlJykub3V0ZXJIZWlnaHQodHJ1ZSlcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBpZiggX29iai5maW5kKCcuY29udGFjdC11cycpLmxlbmd0aCApIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDEwMjQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21pbi1oZWlnaHQnOiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21pbi1oZWlnaHQnOiBoZWlnaHQgLSBfaGVhZGVyLmlubmVySGVpZ2h0KCkgLSAkKCcuc2l0ZV9fbWFpbi10aXRsZScpLm91dGVySGVpZ2h0KHRydWUpXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ21pbi1oZWlnaHQnOiBoZWlnaHQgLSBfaGVhZGVyLmlubmVySGVpZ2h0KCkgLSAkKCcuc2l0ZV9fbWFpbi10aXRsZScpLm91dGVySGVpZ2h0KHRydWUpXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbn0gKSgpOyIsIiggZnVuY3Rpb24oKXtcblxuICAgICQoIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgJCggJy5wb3B1cCcgKS5lYWNoKGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgIG5ldyBQb3B1cCgkKHRoaXMpKTtcblxuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG4gICAgdmFyIFBvcHVwID0gZnVuY3Rpb24oIG9iaiApe1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfcG9wdXBQYWRkaW5nID0gNDAsXG4gICAgICAgICAgICBfYnRuU2hvdyA9ICAkKCAnLnBvcHVwX19vcGVuJyApLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9idG5DbG9zZSA9IF9vYmouZmluZCggJy5wb3B1cF9fY2xvc2UsIC5wb3B1cF9fY2FuY2VsJyApLFxuICAgICAgICAgICAgX3dyYXAgPSBfb2JqLmZpbmQoICcucG9wdXBfX3dyYXAnICksXG4gICAgICAgICAgICBfY29udGVudHMgPSBfb2JqLmZpbmQoICcucG9wdXBfX2NvbnRlbnQnICksXG4gICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyID0gJCggJ2h0bWwnICksXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXG4gICAgICAgICAgICBfZ2xvYmFsV2lkdGgsXG4gICAgICAgICAgICBfdGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpe30sIDEgKTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2NlbnRlcldyYXAgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGlmICggX3dpbmRvdy5oZWlnaHQoKSAtICggX3BvcHVwUGFkZGluZyAqIDIgKSAtIF93cmFwLmhlaWdodCgpID4gMCApIHtcbiAgICAgICAgICAgICAgICAgICAgX3dyYXAuY3NzKCB7IHRvcDogKCAoIF93aW5kb3cuaGVpZ2h0KCkgLSAoIF9wb3B1cFBhZGRpbmcgKiAyICkgKSAtIF93cmFwLmhlaWdodCgpICkgLyAyIH0gKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfd3JhcC5jc3MoIHsgdG9wOiAwIH0gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2dldFNjcm9sbFdpZHRoID0gZnVuY3Rpb24gKCl7XG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnKSxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsQmFyV2lkdGg7XG5cbiAgICAgICAgICAgICAgICBzY3JvbGxEaXYuY2xhc3NOYW1lID0gJ3BvcHVwX19zY3JvbGxiYXItbWVhc3VyZSc7XG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCBzY3JvbGxEaXYgKTtcblxuICAgICAgICAgICAgICAgIHNjcm9sbEJhcldpZHRoID0gc2Nyb2xsRGl2Lm9mZnNldFdpZHRoIC0gc2Nyb2xsRGl2LmNsaWVudFdpZHRoO1xuXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JvbGxEaXYpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbEJhcldpZHRoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9oaWRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdoaWRkZW4nXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9zY3JvbGxDb250ZWluZXIuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2F1dG8nLFxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6IDBcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAncG9wdXBfb3BlbmVkJyApO1xuICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdwb3B1cF9oaWRlJyApO1xuXG4gICAgICAgICAgICAgICAgX3RpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLmNzcyAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnc2Nyb2xsJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAncG9wdXBfaGlkZScgKTtcbiAgICAgICAgICAgICAgICB9LCAzMDAgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfb2JqWyAwIF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uRXZlbnRzID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2dsb2JhbFdpZHRoID0gX3dpbmRvdy53aWR0aCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jZW50ZXJXcmFwKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfZ2xvYmFsV2lkdGggIT0gX3dpbmRvdy53aWR0aCgpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9nbG9iYWxXaWR0aCA9IF93aW5kb3cud2lkdGgoKSArIDE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX2J0blNob3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAkKHRoaXMpLmhhc0NsYXNzKCdjb29raWVzLWluZm9fYnRuJykgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpIDwgMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2hvdyggJCggdGhpcyApLmF0dHIoICdkYXRhLXBvcHVwJyApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zaG93KCAkKCB0aGlzICkuYXR0ciggJ2RhdGEtcG9wdXAnICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF93cmFwLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiggZSApe1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfb2JqLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfYnRuQ2xvc2Uub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zaG93ID0gZnVuY3Rpb24oIGNsYXNzTmFtZSApe1xuICAgICAgICAgICAgICAgIF9zZXRQb3B1cENvbnRlbnQoIGNsYXNzTmFtZSApO1xuXG4gICAgICAgICAgICAgICAgX3Njcm9sbENvbnRlaW5lci5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnaGlkZGVuJyxcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiBfZ2V0U2Nyb2xsV2lkdGgoKVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAncG9wdXBfb3BlbmVkJyApO1xuICAgICAgICAgICAgICAgIF9jZW50ZXJXcmFwKCk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0UG9wdXBDb250ZW50ID0gZnVuY3Rpb24oIGNsYXNzTmFtZSApe1xuICAgICAgICAgICAgICAgIHZhciBjdXJDb250ZW50ID0gX2NvbnRlbnRzLmZpbHRlciggJy5wb3B1cF9fJyArIGNsYXNzTmFtZSApO1xuXG4gICAgICAgICAgICAgICAgX2NvbnRlbnRzLmNzcyggeyBkaXNwbGF5OiAnbm9uZScgfSApO1xuICAgICAgICAgICAgICAgIGN1ckNvbnRlbnQuY3NzKCB7IGRpc3BsYXk6ICdibG9jaycgfSApO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xuXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG59ICkoKTtcblxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4oIGZ1bmN0aW9uKCl7XG5cbiAgICAkKCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcuY291bnQtcHJvZHVjdCcpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBTcGlubmVyKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgfSApO1xuXG4gICAgdmFyIFNwaW5uZXIgPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfaW5wdXQgPSBfb2JqLmZpbmQoJy5jb3VudC1wcm9kdWN0X19pbnB1dCcpLFxuICAgICAgICAgICAgX2J0blVwID0gX29iai5maW5kKCcuY291bnQtcHJvZHVjdF9hZGQnKSxcbiAgICAgICAgICAgIF9idG5Eb3duID0gX29iai5maW5kKCcuY291bnQtcHJvZHVjdF9kZWwnKTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9pbnB1dC5vbigge1xuICAgICAgICAgICAgICAgICAgICBrZXlwcmVzczogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoICggZXZlbnQud2hpY2ggIT0gNDYgfHwgJCggdGhpcyApLnZhbCgpLmluZGV4T2YoICcuJyApICE9IC0xICkgJiYgKCBldmVudC53aGljaCA8IDQ4IHx8IGV2ZW50LndoaWNoID4gNTcgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfaW5wdXQub24oIHtcbiAgICAgICAgICAgICAgICAgICAga2V5dXA6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9pbnB1dC52YWwoKSA9PSAnJyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pbnB1dC52YWwoIDEgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfYnRuVXAub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2FkZENvdW50KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX2J0bkRvd24ub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlZHVjZUNvdW50KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2FkZENvdW50ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBwYXJzZUludCggX2lucHV0LnZhbCgpICk7XG5cbiAgICAgICAgICAgICAgICBfaW5wdXQudmFsKCB2YWx1ZSArIDEgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9yZWR1Y2VDb3VudCA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBwYXJzZUludCggX2lucHV0LnZhbCgpICk7XG5cbiAgICAgICAgICAgICAgICBpZiggdmFsdWUgIT0gMSApIHtcblxuICAgICAgICAgICAgICAgICAgICBfaW5wdXQudmFsKCB2YWx1ZSAtIDEgKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xuXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG59ICkoKTsiLCJcInVzZSBzdHJpY3RcIjtcbiggZnVuY3Rpb24oKXtcblxuICAgICQoIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAkLmVhY2goICQoJy5teS1jYXJ0X19wcm9kdWN0JyksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IFByb2R1Y3RzSW5DYXJ0KCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnLnByb2R1Y3Qtc2luZ2xlX19pbmZvJyksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IEFkZFByb2R1Y3RzVG9DYXJ0KCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgfSApO1xuXG4gICAgdmFyIFByb2R1Y3RzSW5DYXJ0ID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2lucHV0ID0gX29iai5maW5kKCcuY291bnQtcHJvZHVjdF9faW5wdXQnKSxcbiAgICAgICAgICAgIF9idG5DaGFuZ2VDb3VudCA9IF9vYmouZmluZCgnLmNvdW50LXByb2R1Y3RfX2J0bicpLFxuICAgICAgICAgICAgX2J0blJlbW92ZVByb2R1Y3QgPSBfb2JqLmZpbmQoJy5teS1jYXJ0X19yZW1vdmUnKSxcbiAgICAgICAgICAgIF9yZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksXG4gICAgICAgICAgICBfY2FydCA9ICQoJy5jYXJ0JyksXG4gICAgICAgICAgICBfdG90YWxQcmljZSA9ICQoJy5teS1jYXJ0X190b3RhbCcpLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRIZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX3NldEhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfaW5wdXQub24oIHtcbiAgICAgICAgICAgICAgICAgICAga2V5cHJlc3M6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAhKCggZXZlbnQud2hpY2ggIT0gNDYgfHwgJCggdGhpcyApLnZhbCgpLmluZGV4T2YoICcuJyApICE9IC0xICkgJiYgKCBldmVudC53aGljaCA8IDQ4IHx8IGV2ZW50LndoaWNoID4gNTcgKSkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVxdWVzdENvdW50Q2hhbmdlKCAkKHRoaXMpLnBhcmVudHMoJy5teS1jYXJ0X19wcm9kdWN0JykgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfYnRuQ2hhbmdlQ291bnQub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlcXVlc3RDb3VudENoYW5nZSggJCh0aGlzKS5wYXJlbnRzKCcubXktY2FydF9fcHJvZHVjdCcpICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF9idG5SZW1vdmVQcm9kdWN0Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZXF1ZXN0UHJvZHVjdFJlbW92ZSggJCh0aGlzKS5wYXJlbnRzKCcubXktY2FydF9fcHJvZHVjdCcpICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3JlbW92ZVByb2R1Y3QgPSBmdW5jdGlvbiggZWxlbSApIHtcblxuICAgICAgICAgICAgICAgIGVsZW0uYWRkQ2xhc3MoJ2hpZGRlbicpO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZWxlbS5yZW1vdmUoKTtcblxuICAgICAgICAgICAgICAgIH0sIDUwMCApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3JlcXVlc3RQcm9kdWN0UmVtb3ZlID0gZnVuY3Rpb24gKCBlbGVtICkge1xuXG4gICAgICAgICAgICAgICAgX3JlcXVlc3QuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICBfcmVxdWVzdCA9ICQuYWpheCgge1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICQoJ2JvZHknKS5hdHRyKCdkYXRhLWFjdGlvbicpLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogZWxlbS5hdHRyKCdkYXRhLWlkJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBmbGFnOiAncmVtb3ZlJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImdldFwiLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAobSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVtb3ZlUHJvZHVjdCggZWxlbSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggcGFyc2VJbnQobS5jYXJ0Q291bnRQcm9kdWN0cykgPT0gMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jYXJ0LmZpbmQoJ2RpdicpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jYXJ0LnJlbW92ZUNsYXNzKCdjYXJ0X2ZpbGwnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuc2l0ZV9faGVhZGVyJykucmVtb3ZlQ2xhc3MoJ3NpdGVfX2hlYWRlcl9maWxsLWNhcnQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jYXJ0LmZpbmQoJ2RpdicpLmh0bWwoIG0uY2FydENvdW50UHJvZHVjdHMgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX3RvdGFsUHJpY2UuZmluZCgnc3BhbicpLmh0bWwoIG0uc3VidG90YWwgKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKFhNTEh0dHBSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIFhNTEh0dHBSZXF1ZXN0LnN0YXR1c1RleHQgIT0gXCJhYm9ydFwiICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiRVJST1IhISFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfcmVxdWVzdENvdW50Q2hhbmdlID0gZnVuY3Rpb24gKCBlbGVtICkge1xuXG4gICAgICAgICAgICAgICAgX3JlcXVlc3QuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICBfcmVxdWVzdCA9ICQuYWpheCgge1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICQoJ2JvZHknKS5hdHRyKCdkYXRhLWFjdGlvbicpLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogZWxlbS5hdHRyKCdkYXRhLWlkJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudFByb2R1Y3Q6IGVsZW0uZmluZCgnLmNvdW50LXByb2R1Y3RfX2lucHV0JykudmFsKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBmbGFnOiAnY2hhbmdlQ291bnQnXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChtKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0uZmluZCgnLm15LWNhcnRfX3RvdGFsLXByaWNlJykuaHRtbCggbS50b3RhbCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RvdGFsUHJpY2UuZmluZCgnc3BhbicpLmh0bWwoIG0uc3VidG90YWwgKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKFhNTEh0dHBSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIFhNTEh0dHBSZXF1ZXN0LnN0YXR1c1RleHQgIT0gXCJhYm9ydFwiICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiRVJST1IhISFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0SGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfb2JqLmVhY2goIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuID0gY3VySXRlbS5maW5kKCc+ZGl2Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5oZWlnaHQoIGNoaWxkcmVuLm91dGVySGVpZ2h0KHRydWUpICk7XG5cbiAgICAgICAgICAgICAgICB9IClcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xuXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIEFkZFByb2R1Y3RzVG9DYXJ0ID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2lucHV0ID0gX29iai5maW5kKCcuY291bnQtcHJvZHVjdF9faW5wdXQnKSxcbiAgICAgICAgICAgIF9wcmljZSA9IF9vYmouZmluZCgnLnByb2R1Y3Qtc2luZ2xlX19wcmljZScpLFxuICAgICAgICAgICAgX2FkZFRvQ2FydEJ0biA9IF9vYmouZmluZCgnLnByb2R1Y3Qtc2luZ2xlX19hZGQnKSxcbiAgICAgICAgICAgIF9yZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksXG4gICAgICAgICAgICBfY2FydCA9ICQoJy5jYXJ0JyksXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX2FkZFRvQ2FydEJ0bi5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCBldmVudCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoICEoIF9hZGRUb0NhcnRCdG4uaGFzQ2xhc3MoJ2FkZGluZycpICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYW5pbWF0ZWRBZGRpbmcoIGV2ZW50ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlcXVlc3RQcm9kdWN0QWRkVG9DYXJ0KCBldmVudCwgJCh0aGlzKS5wYXJlbnRzKCcucHJvZHVjdC1zaW5nbGVfX2luZm8nKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hZGRUb0NhcnRCdG4uYWRkQ2xhc3MoJ2FkZGluZycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2FuaW1hdGVkQWRkaW5nID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHBpYyA9ICQoJy5nYWxsZXJ5X190b3AgLnNsaWNrLWN1cnJlbnQnKS5kYXRhKCdpbWFnZScpLFxuXG4gICAgICAgICAgICAgICAgZSA9IGV2ZW50IHx8IHdpbmRvdy5ldmVudDtcblxuICAgICAgICAgICAgICAgIHZhciBwYWdlWCA9IGUucGFnZVgsXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VZID0gZS5wYWdlWTtcblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBpYyk7XG5cbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwic2l0ZV9fcHJvZHVjdCBoaWRkZW5cIiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6ICcrIHBpYyArJ1wiPjwvZGl2PicpO1xuICAgICAgICAgICAgICAgICQoJy5zaXRlX19wcm9kdWN0JykuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogJCgnLmdhbGxlcnlfX3RvcCcpLm9mZnNldCgpLnRvcCArICQoJy5nYWxsZXJ5X190b3AnKS5pbm5lckhlaWdodCgpLzIgLSAkKCcuc2l0ZV9fcHJvZHVjdCcpLmhlaWdodCgpLzIgLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiAkKCcuZ2FsbGVyeV9fdG9wJykub2Zmc2V0KCkubGVmdCArICQoJy5nYWxsZXJ5X190b3AnKS5pbm5lcldpZHRoKCkvMiAtICQoJy5zaXRlX19wcm9kdWN0Jykud2lkdGgoKS8yXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgJCgnLnNpdGVfX3Byb2R1Y3QnKS5hZGRDbGFzcygndmlzaWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuc2l0ZV9fcHJvZHVjdCcpLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBfY2FydC5vZmZzZXQoKS50b3AgKyBfY2FydC5pbm5lckhlaWdodCgpLzIgLSAkKCcuc2l0ZV9fcHJvZHVjdCcpLmhlaWdodCgpLzIgLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogX2NhcnQub2Zmc2V0KCkubGVmdCArIF9jYXJ0LmlubmVyV2lkdGgoKS8yIC0gJCgnLnNpdGVfX3Byb2R1Y3QnKS53aWR0aCgpLzJcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgfSwgMTAwICk7XG5cblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICQoJy5zaXRlX19wcm9kdWN0JykucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcblxuICAgICAgICAgICAgICAgIH0sIDUwMCApO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgJCgnLnNpdGVfX3Byb2R1Y3QnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgX2FkZFRvQ2FydEJ0bi5yZW1vdmVDbGFzcygnYWRkaW5nJyk7XG5cbiAgICAgICAgICAgICAgICB9LCA3MDAgKTtcblxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3JlcXVlc3RQcm9kdWN0QWRkVG9DYXJ0ID0gZnVuY3Rpb24gKCBlbGVtICkge1xuXG4gICAgICAgICAgICAgICAgX3JlcXVlc3QuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICBfcmVxdWVzdCA9ICQuYWpheCgge1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICQoJ2JvZHknKS5hdHRyKCdkYXRhLWFjdGlvbicpLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogZWxlbS5hdHRyKCdkYXRhLWlkJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudFByb2R1Y3Q6IF9pbnB1dC52YWwoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlOiBfcHJpY2UudGV4dCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhZzogJ2FkZFRvQ2FydCdcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJnZXRcIixcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKG0pIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoICEoIF9jYXJ0Lmhhc0NsYXNzKCdjYXJ0X2ZpbGwnKSApICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NhcnQuYXBwZW5kKCc8ZGl2PjwvZGl2PicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2FydC5hZGRDbGFzcygnY2FydF9maWxsJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zaXRlX19oZWFkZXInKS5hZGRDbGFzcygnc2l0ZV9faGVhZGVyX2ZpbGwtY2FydCcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2FydC5maW5kKCdkaXYnKS5odG1sKG0uY2FydENvdW50UHJvZHVjdHMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMCApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgNjAwICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2FydC5maW5kKCdkaXYnKS5odG1sKG0uY2FydENvdW50UHJvZHVjdHMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgNzAwICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKFhNTEh0dHBSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIFhNTEh0dHBSZXF1ZXN0LnN0YXR1c1RleHQgIT0gXCJhYm9ydFwiICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiRVJST1IhISFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxufSApKCk7Il19
