"use strict";!function(){$(function(){new e($(".preloader")),$.each($(".site__header"),function(){new o($(this))}),$.each($(".site__menu-nav_anchors"),function(){new s($(this))}),$.each($(".slides"),function(){new i($(this))})});var e=function(e){var o=this,s=$(window),i=e,n=$("body"),t=function(){s.on({load:function(){d()}})},a=function(){n[0].preloader=o,t()},d=function(){i.addClass("preloader_loaded"),setTimeout(function(){i.remove(),$(".site").addClass("site__loaded")},500)};a()},o=function(e){var o=this,s=e,i=$(window),n=$("html"),t=s.find(".site__menu"),a=($(".site__content"),!1),d=!1,l=!0,r=0,c=s.find(".site__menu-btn"),f=0,h=function(){i.on({load:function(){f=i.width()},resize:function(){f!=i.width()&&(f=i.width()+1,i.width()>=1024&&(t.scrollTop(0),_(c)))},scroll:function(){a=i.scrollTop()>=2*s.innerHeight(),i.scrollTop()>=s.innerHeight()?l&&(l=!1,s.addClass("site__header_hide")):(l=!0,s.removeClass("site__header_hide")),a?s.hasClass("site__header_hide")&&setTimeout(function(){s.addClass("site__header_fixed"),s.removeClass("site__header_hide")},100):i.scrollTop()<=3*s.innerHeight()&&s.removeClass("site__header_fixed")},DOMMouseScroll:function(e){var o=e.originalEvent.detail;if(o){var s=o>0?1:-1;u(s)}s<0?d=!0:setTimeout(function(){d=!1},300)},mousewheel:function(e){var o=e.originalEvent.wheelDelta;if(o){var s=o>0?-1:1;u(s)}s<0?d=!0:setTimeout(function(){d=!1},300)}}),$(window).scroll(function(e){var o=$(this).scrollTop();if(o>r){u(1);var s=1}else{u(-1);var s=-1}r=o,s<0?d=!0:setTimeout(function(){d=!1},300)}),c.on({click:function(){$(this).hasClass("opened")?_($(this)):p($(this))}})},u=function(e){e>0&&!s.hasClass("site__header_hidden")&&!c.hasClass("opened")&&a&&!d&&s.addClass("site__header_hidden"),e<0&&s.hasClass("site__header_hidden")&&!c.hasClass("opened")&&a&&d&&s.removeClass("site__header_hidden")},_=function(e){n.css({overflowY:"auto"}),e.removeClass("opened"),s.removeClass("opened-menu")},v=function(){s[0].obj=o,h()},p=function(e){e.addClass("opened"),s.addClass("opened-menu"),n.css({overflowY:"hidden"})};v()},s=function(e){var o=this,s=e,i=s.find(".site__menu-link"),n=$("html"),t=$(window),a=$("html, body"),d=$(".site__header"),l=($(".popup__cookies-info"),function(){t.on({resize:function(){r()},scroll:function(){r()}}),i.on({click:function(){var e=$(this),o=e.attr("data-href"),s=$("."+o).offset().top-d.innerHeight();return i.removeClass("active"),e.addClass("active"),s=t.width()>=1024?$("."+o).offset().top-91:$("."+o).offset().top-64,a.stop(!0,!1),a.animate({scrollTop:s},300),n.css({overflowY:"auto"}),d.find(".site__menu-btn").removeClass("opened"),d.removeClass("opened-menu"),!1}})}),r=function(){for(var e=$(window).scrollTop(),o=$("body").find('[data-scroll="scroll"]'),s=(o.offset().top,0);s<o.length;s++){var n=$(o[s]),t=$(o[s]).offset().top-d.outerHeight(!0),a=$(o[s]).outerHeight(!0);if(e>t){var l=n.attr("class").split(" "),r=i.filter("[data-href="+l[0]+"]");i.removeClass("active"),r.addClass("active")}e>t+a&&i.removeClass("active")}},c=function(){s[0].obj=o,l(),r()};c()},i=function(e){var o=this,s=e,i=$(window),n=function(){i.on({scroll:function(){t()}})},t=function(){var e=i.scrollTop(),o=i.height(),n=s.offset().top,t=n-e,a=1-t/o;a>.5&&(s.hasClass("slides_active")||s.addClass("slides_active"))},a=function(){s[0].slides=o,n(),t()};a()}}();
"use strict";!function(){$(function(){$.each($(".contact-us"),function(){new t($(this))}),$.each($(".contact-us__map"),function(){new n($(this))})});var t=function(t){var n=this,e=t,o=$(window),a=$(".site__header"),i=0,g=function(){o.on({load:function(){i=o.width(),s()},resize:function(){i!=o.width()&&(i=o.width()+1,s())}})},c=function(){e[0].obj=n,g()},s=function(){var t=o.height();e.css({"min-height":t-a.innerHeight()-parseInt(e.css("padding-bottom"))-parseInt(e.css("padding-top"))+$(".site__main-title").outerHeight(!0)})};c()},n=function(t){var n,e=t,o=(e.attr("id"),e.data("map-lat")),a=e.data("map-lng"),i=e.data("icon-path"),g=e.data("map-zoom"),c={lat:e.data("map-lat"),lng:e.data("map-lng")},s=$(window),r=function(){google.maps.event.addDomListener(window,"resize",function(){n.setCenter(c),s.width()>=1024?l(n.getCenter(),0,0):l(n.getCenter(),0,-50)})},d=function(){n=new google.maps.Map(document.getElementById("contact-google-map"),{zoom:g,scrollwheel:!1,center:{lat:o,lng:a}});var t={url:i,scaledSize:new google.maps.Size(98,91)};new google.maps.Marker({position:{lat:o,lng:a},map:n,icon:t});google.maps.event.addListenerOnce(n,"idle",function(){n.setCenter(c),s.width()>=1024?l(n.getCenter(),0,0):l(n.getCenter(),0,-50)})},l=function(t,e,o){var a=Math.pow(2,n.getZoom()),i=n.getProjection().fromLatLngToPoint(t),g=new google.maps.Point(e/a||0,o/a||0),c=new google.maps.Point(i.x-g.x,i.y+g.y),s=n.getProjection().fromPointToLatLng(c);n.setCenter(s)},m=function(){google.maps.event.addDomListener(window,"load",d),r()};m()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5tYWluLmpzIiwianF1ZXJ5LmxvY2F0aW9uLmpzIl0sIm5hbWVzIjpbIiQiLCJQcmVsb2FkZXIiLCJlYWNoIiwiTWVudSIsInRoaXMiLCJTY3JvbGxQYW5lbCIsIlNsaWRlcyIsIm9iaiIsIl9zZWxmIiwiX3dpbmRvdyIsIndpbmRvdyIsIl9wcmVsb2FkZXIiLCJfYm9keSIsIl9hZGRFdmVudHMiLCJvbiIsImxvYWQiLCJfc2hvd1NpdGUiLCJfaW5pdCIsInByZWxvYWRlciIsImFkZENsYXNzIiwic2V0VGltZW91dCIsInJlbW92ZSIsIl9vYmoiLCJfaHRtbCIsIl9tZW51IiwiZmluZCIsIl9hY3Rpb24iLCJfYWN0aW9uMiIsIl9mbGFnSGlkZSIsImxhc3RTY3JvbGxUb3AiLCJfc2hvd01lbnVCdG4iLCJfZ2xvYmFsV2lkdGgiLCJ3aWR0aCIsInJlc2l6ZSIsInNjcm9sbFRvcCIsIl9jbG9zZU1lbnUiLCJzY3JvbGwiLCJpbm5lckhlaWdodCIsInJlbW92ZUNsYXNzIiwiaGFzQ2xhc3MiLCJET01Nb3VzZVNjcm9sbCIsImUiLCJkZWx0YSIsIm9yaWdpbmFsRXZlbnQiLCJkZXRhaWwiLCJkaXJlY3Rpb24iLCJfY2hlY2tTY3JvbGwiLCJtb3VzZXdoZWVsIiwid2hlZWxEZWx0YSIsImV2ZW50Iiwic3QiLCJjbGljayIsIl9vcGVuTWVudSIsImVsZW0iLCJjc3MiLCJvdmVyZmxvd1kiLCJfbGlua3MiLCJfZG9tIiwiX2hlYWRlciIsIl9jaGFuZ2VBY3RpdmUiLCJjdXJJdGVtIiwibmV3Q2xhc3MiLCJhdHRyIiwibmV4dEl0ZW1Ub3AiLCJvZmZzZXQiLCJ0b3AiLCJzdG9wIiwiYW5pbWF0ZSIsIml0ZW0iLCJpIiwibGVuZ3RoIiwiY3VyIiwiaXRlbUN1ciIsIm91dGVySGVpZ2h0IiwiaXRlbUhlaWdodCIsImN1ckNsYXNzIiwic3BsaXQiLCJjdXJMaW5rIiwiZmlsdGVyIiwiY3VyU2Nyb2xsIiwid2luZG93SCIsImhlaWdodCIsInRvcFBvcyIsInRvcEluV2luZG93IiwidmlzaWJsZVBlcmNlbnQiLCJzbGlkZXMiLCJDb250YWN0SGVpZ2h0IiwiTG9jYXRpb24iLCJfc2V0SGVpZ2h0IiwibWluLWhlaWdodCIsInBhcnNlSW50IiwibWFwIiwibWFwTGF0IiwiZGF0YSIsIm1hcExuZyIsImljb25QYXRoIiwibWFwWm9vbSIsIm15TGF0TG5nIiwibGF0IiwibG5nIiwiZ29vZ2xlIiwibWFwcyIsImFkZERvbUxpc3RlbmVyIiwic2V0Q2VudGVyIiwiX29mZnNldENlbnRlciIsImdldENlbnRlciIsIl9pbml0TWFwIiwiTWFwIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInpvb20iLCJzY3JvbGx3aGVlbCIsImNlbnRlciIsImltYWdlIiwidXJsIiwic2NhbGVkU2l6ZSIsIlNpemUiLCJNYXJrZXIiLCJwb3NpdGlvbiIsImljb24iLCJhZGRMaXN0ZW5lck9uY2UiLCJsYXRsbmciLCJvZmZzZXR4Iiwib2Zmc2V0eSIsInNjYWxlIiwiTWF0aCIsInBvdyIsImdldFpvb20iLCJ3b3JsZENvb3JkaW5hdGVDZW50ZXIiLCJnZXRQcm9qZWN0aW9uIiwiZnJvbUxhdExuZ1RvUG9pbnQiLCJwaXhlbE9mZnNldCIsIlBvaW50Iiwid29ybGRDb29yZGluYXRlTmV3Q2VudGVyIiwieCIsInkiLCJuZXdDZW50ZXIiLCJmcm9tUG9pbnRUb0xhdExuZyJdLCJtYXBwaW5ncyI6IkFBQUEsY0FDQSxXQUVJQSxFQUFHLFdBRUMsR0FBSUMsR0FBV0QsRUFBRSxlQUVqQkEsRUFBRUUsS0FBTUYsRUFBRyxpQkFBbUIsV0FFMUIsR0FBSUcsR0FBT0gsRUFBR0ksU0FJbEJKLEVBQUVFLEtBQU1GLEVBQUUsMkJBQTRCLFdBRWxDLEdBQUlLLEdBQWFMLEVBQUVJLFNBSXZCSixFQUFFRSxLQUFNRixFQUFFLFdBQVksV0FFbEIsR0FBSU0sR0FBUU4sRUFBRUksVUFNdEIsSUFBSUgsR0FBWSxTQUFVTSxHQUd0QixHQUFJQyxHQUFRSixLQUNSSyxFQUFVVCxFQUFHVSxRQUNiQyxFQUFh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QUloQixRQUFPQyxLQUFLZ0IsUUFDOUJDLFVBQVlwQixJQUFLTixFQUFRTyxJQUFLTCxHQUM5QkgsSUFBS0EsRUFDTDRCLEtBQU1OLEdBR1ZiLFFBQU9DLEtBQUtwRCxNQUFNdUUsZ0JBQWdCN0IsRUFBSyxPQUFRLFdBRTNDQSxFQUFJWSxVQUFXTixHQUVYeEYsRUFBUXVCLFNBQVcsS0FFbkJ3RSxFQUFlYixFQUFJYyxZQUFhLEVBQUcsR0FJbkNELEVBQWViLEVBQUljLFlBQWEsVUFPNUNELEVBQWdCLFNBQVdpQixFQUFRQyxFQUFTQyxHQUV4QyxHQUFJQyxHQUFRQyxLQUFLQyxJQUFLLEVBQUduQyxFQUFJb0MsV0FDekJDLEVBQXdCckMsRUFBSXNDLGdCQUFnQkMsa0JBQW1CVCxHQUMvRFUsRUFBYyxHQUFJL0IsUUFBT0MsS0FBSytCLE1BQVNWLEVBQVFFLEdBQVcsRUFBS0QsRUFBUUMsR0FBVyxHQUNsRlMsRUFBMkIsR0FBSWpDLFFBQU9DLEtBQUsrQixNQUV2Q0osRUFBc0JNLEVBQUlILEVBQVlHLEVBQ3RDTixFQUFzQk8sRUFBSUosRUFBWUksR0FJMUNDLEVBQVk3QyxFQUFJc0MsZ0JBQWdCUSxrQkFBbUJKLEVBRXZEMUMsR0FBSVksVUFBV2lDLElBR25CdkgsRUFBUSxXQUVKbUYsT0FBT0MsS0FBS3BELE1BQU1xRCxlQUFnQjVGLE9BQVEsT0FBUWdHLEdBQ2xEN0YsSUFJUkkiLCJmaWxlIjoiY29udGFjdC11cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbiggZnVuY3Rpb24oKXtcblxuICAgICQoIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBuZXcgUHJlbG9hZGVyKCAkKCcucHJlbG9hZGVyJykgKTtcblxuICAgICAgICAkLmVhY2goICQoICcuc2l0ZV9faGVhZGVyJyApLCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgbmV3IE1lbnUgKCAkKCB0aGlzICkgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcuc2l0ZV9fbWVudS1uYXZfYW5jaG9ycycpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBTY3JvbGxQYW5lbCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5zbGlkZXMnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgU2xpZGVzKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgfSApO1xuXG4gICAgdmFyIFByZWxvYWRlciA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyApLFxuICAgICAgICAgICAgX3ByZWxvYWRlciA9IG9iaixcbiAgICAgICAgICAgIF9ib2R5ID0gJCgnYm9keScpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICBsb2FkOiBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfc2hvd1NpdGUoKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfYm9keVswXS5wcmVsb2FkZXIgPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2hvd1NpdGUgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF9wcmVsb2FkZXIuYWRkQ2xhc3MoICdwcmVsb2FkZXJfbG9hZGVkJyApO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBfcHJlbG9hZGVyLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuc2l0ZScpLmFkZENsYXNzKCAnc2l0ZV9fbG9hZGVkJyApO1xuXG4gICAgICAgICAgICAgICAgfSw1MDApO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xuXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIE1lbnUgPSBmdW5jdGlvbiggb2JqICkge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KSxcbiAgICAgICAgICAgIF9odG1sID0gJCgnaHRtbCcpLFxuICAgICAgICAgICAgX21lbnUgPSBfb2JqLmZpbmQoJy5zaXRlX19tZW51JyksXG4gICAgICAgICAgICBfY29udGVudCA9ICQoJy5zaXRlX19jb250ZW50JyksXG4gICAgICAgICAgICBfYWN0aW9uID0gZmFsc2UsXG4gICAgICAgICAgICBfYWN0aW9uMiA9IGZhbHNlLFxuICAgICAgICAgICAgX2ZsYWdIaWRlID0gdHJ1ZSxcbiAgICAgICAgICAgIGxhc3RTY3JvbGxUb3AgPSAwLFxuICAgICAgICAgICAgX3Nob3dNZW51QnRuID0gX29iai5maW5kKCcuc2l0ZV9fbWVudS1idG4nKSxcbiAgICAgICAgICAgIF9nbG9iYWxXaWR0aCA9IDA7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfZ2xvYmFsV2lkdGggPSBfd2luZG93LndpZHRoKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfZ2xvYmFsV2lkdGggIT0gX3dpbmRvdy53aWR0aCgpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2dsb2JhbFdpZHRoID0gX3dpbmRvdy53aWR0aCgpICsgMTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSAxMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9tZW51LnNjcm9sbFRvcCgwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Nsb3NlTWVudSggX3Nob3dNZW51QnRuICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAnc2Nyb2xsJzogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfYWN0aW9uID0gX3dpbmRvdy5zY3JvbGxUb3AoKSA+PSBfb2JqLmlubmVySGVpZ2h0KCkgKiAyO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy5zY3JvbGxUb3AoKSA+PSBfb2JqLmlubmVySGVpZ2h0KCkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX2ZsYWdIaWRlICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9mbGFnSGlkZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGUnICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9mbGFnSGlkZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3NpdGVfX2hlYWRlcl9oaWRlJyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9hY3Rpb24gKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX29iai5oYXNDbGFzcyggJ3NpdGVfX2hlYWRlcl9oaWRlJyApICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAnc2l0ZV9faGVhZGVyX2ZpeGVkJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3NpdGVfX2hlYWRlcl9oaWRlJyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMCApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIF93aW5kb3cuc2Nyb2xsVG9wKCkgPD0gX29iai5pbm5lckhlaWdodCgpICogMyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdzaXRlX19oZWFkZXJfZml4ZWQnICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAnRE9NTW91c2VTY3JvbGwnOiBmdW5jdGlvbiAoIGUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IGUub3JpZ2luYWxFdmVudC5kZXRhaWw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZGVsdGEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gKCBkZWx0YSA+IDAgKSA/IDEgOiAtMTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCggZGlyZWN0aW9uICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBkaXJlY3Rpb24gPCAwICApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hY3Rpb24yID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hY3Rpb24yID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDAgKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAnbW91c2V3aGVlbCc6IGZ1bmN0aW9uICggZSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gZS5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZGVsdGEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gKCBkZWx0YSA+IDAgKSA/IC0xIDogMTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCggZGlyZWN0aW9uICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBkaXJlY3Rpb24gPCAwICApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hY3Rpb24yID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hY3Rpb24yID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDAgKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbihldmVudCl7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0ID0gJCh0aGlzKS5zY3JvbGxUb3AoKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoc3QgPiBsYXN0U2Nyb2xsVG9wKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCAxICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAxXG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCAtMSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gLTFcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxhc3RTY3JvbGxUb3AgPSBzdDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIGRpcmVjdGlvbiA8IDAgICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfYWN0aW9uMiA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYWN0aW9uMiA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDAgKVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIF9zaG93TWVudUJ0bi5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAkKCB0aGlzICkuaGFzQ2xhc3MoICdvcGVuZWQnICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2xvc2VNZW51KCAkKCB0aGlzICkgKVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb3Blbk1lbnUoICQoIHRoaXMgKSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NoZWNrU2Nyb2xsID0gZnVuY3Rpb24oIGRpcmVjdGlvbiApIHtcblxuICAgICAgICAgICAgICAgIGlmKCBkaXJlY3Rpb24gPiAwICYmICFfb2JqLmhhc0NsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGRlbicgKSAmJiAhX3Nob3dNZW51QnRuLmhhc0NsYXNzKCAnb3BlbmVkJyApICYmIF9hY3Rpb24gJiYgIV9hY3Rpb24yICl7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3NpdGVfX2hlYWRlcl9oaWRkZW4nICk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiggZGlyZWN0aW9uIDwgMCAmJiBfb2JqLmhhc0NsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGRlbicgKSAmJiAhX3Nob3dNZW51QnRuLmhhc0NsYXNzKCAnb3BlbmVkJyApICAmJiBfYWN0aW9uICYmIF9hY3Rpb24yICl7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcygnc2l0ZV9faGVhZGVyX2hpZGRlbicpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2Nsb3NlTWVudSA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXG4gICAgICAgICAgICAgICAgX2h0bWwuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2F1dG8nXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgZWxlbS5yZW1vdmVDbGFzcyggJ29wZW5lZCcgKTtcbiAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAnb3BlbmVkLW1lbnUnICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9vYmpbIDAgXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29wZW5NZW51ID0gZnVuY3Rpb24oIGVsZW0gKSAge1xuXG4gICAgICAgICAgICAgICAgZWxlbS5hZGRDbGFzcyggJ29wZW5lZCcgKTtcbiAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAnb3BlbmVkLW1lbnUnICk7XG5cbiAgICAgICAgICAgICAgICBfaHRtbC5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnaGlkZGVuJ1xuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgU2Nyb2xsUGFuZWwgPSBmdW5jdGlvbiAoIG9iaiApIHtcblxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9saW5rcyA9IF9vYmouZmluZCgnLnNpdGVfX21lbnUtbGluaycpLFxuICAgICAgICAgICAgX2h0bWwgPSAkKCdodG1sJyksXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpLFxuICAgICAgICAgICAgX2RvbSA9ICAkKCAnaHRtbCwgYm9keScpLFxuICAgICAgICAgICAgX2hlYWRlciA9ICQoJy5zaXRlX19oZWFkZXInKSxcbiAgICAgICAgICAgIF9wb3B1cCA9ICQoJy5wb3B1cF9fY29va2llcy1pbmZvJyk7XG5cbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2hhbmdlQWN0aXZlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ3Njcm9sbCc6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2NoYW5nZUFjdGl2ZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfbGlua3Mub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQoIHRoaXMgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdDbGFzcyA9IGN1ckl0ZW0uYXR0cignZGF0YS1ocmVmJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEl0ZW1Ub3AgPSAkKCAnLicgKyBuZXdDbGFzcyAgKS5vZmZzZXQoKS50b3AgLSBfaGVhZGVyLmlubmVySGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9saW5rcy5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSAxMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEl0ZW1Ub3AgPSAkKCAnLicgKyBuZXdDbGFzcyAgKS5vZmZzZXQoKS50b3AgLSA5MTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRJdGVtVG9wID0gJCggJy4nICsgbmV3Q2xhc3MgICkub2Zmc2V0KCkudG9wIC0gNjQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF9kb20uc3RvcCggdHJ1ZSwgZmFsc2UgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kb20uYW5pbWF0ZSggeyBzY3JvbGxUb3A6IG5leHRJdGVtVG9wICB9LCAzMDAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2h0bWwuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2hlYWRlci5maW5kKCcuc2l0ZV9fbWVudS1idG4nKS5yZW1vdmVDbGFzcyggJ29wZW5lZCcgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9oZWFkZXIucmVtb3ZlQ2xhc3MoICdvcGVuZWQtbWVudScgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2hhbmdlQWN0aXZlID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbFRvcCA9ICQod2luZG93KS5zY3JvbGxUb3AoKSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbSA9ICQoJ2JvZHknKS5maW5kKCdbZGF0YS1zY3JvbGw9XCJzY3JvbGxcIl0nKSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbVBvcyA9IGl0ZW0ub2Zmc2V0KCkudG9wO1xuXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGl0ZW0ubGVuZ3RoOyBpKysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ciA9ICQoaXRlbVtpXSksXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtQ3VyID0gJChpdGVtW2ldKS5vZmZzZXQoKS50b3AgLSBfaGVhZGVyLm91dGVySGVpZ2h0KHRydWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUhlaWdodCA9ICQoaXRlbVtpXSkub3V0ZXJIZWlnaHQodHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIHNjcm9sbFRvcCA+IGl0ZW1DdXIgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJDbGFzcyA9IGN1ci5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyTGluayA9IF9saW5rcy5maWx0ZXIoXCJbZGF0YS1ocmVmPVwiK2N1ckNsYXNzWzBdK1wiXVwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2xpbmtzLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckxpbmsuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYoIHNjcm9sbFRvcCA+ICggaXRlbUN1ciArIGl0ZW1IZWlnaHQgKSApe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfbGlua3MucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfY2hhbmdlQWN0aXZlKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBTbGlkZXMgPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF93aW5kb3cub24oe1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NoZWNrU2Nyb2xsID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICB2YXIgY3VyU2Nyb2xsID0gX3dpbmRvdy5zY3JvbGxUb3AoKSxcbiAgICAgICAgICAgICAgICAgICAgd2luZG93SCA9IF93aW5kb3cuaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgICAgIHRvcFBvcyA9IF9vYmoub2Zmc2V0KCkudG9wLFxuICAgICAgICAgICAgICAgICAgICB0b3BJbldpbmRvdyA9IHRvcFBvcy1jdXJTY3JvbGwsXG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVQZXJjZW50ID0gMS0odG9wSW5XaW5kb3cvd2luZG93SCk7XG5cbiAgICAgICAgICAgICAgICBpZiggdmlzaWJsZVBlcmNlbnQgPiAuNSApe1xuICAgICAgICAgICAgICAgICAgICBpZiggIV9vYmouaGFzQ2xhc3MoJ3NsaWRlc19hY3RpdmUnKSApe1xuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcygnc2xpZGVzX2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX29ialswXS5zbGlkZXMgPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbn0gKSgpOyIsIlwidXNlIHN0cmljdFwiO1xuKCBmdW5jdGlvbigpe1xuXG4gICAgJCggZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICQuZWFjaCggJCggJy5jb250YWN0LXVzJyApLCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgbmV3IENvbnRhY3RIZWlnaHQgKCAkKCB0aGlzICkgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcuY29udGFjdC11c19fbWFwJyksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IExvY2F0aW9uKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgfSApO1xuXG4gICAgdmFyIENvbnRhY3RIZWlnaHQgPSBmdW5jdGlvbiggb2JqICkge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KSxcbiAgICAgICAgICAgIF9oZWFkZXIgPSAkKCcuc2l0ZV9faGVhZGVyJyksXG4gICAgICAgICAgICBfZ2xvYmFsV2lkdGggPSAwO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2dsb2JhbFdpZHRoID0gX3dpbmRvdy53aWR0aCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3NldEhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX2dsb2JhbFdpZHRoICE9IF93aW5kb3cud2lkdGgoKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9nbG9iYWxXaWR0aCA9IF93aW5kb3cud2lkdGgoKSArIDE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2V0SGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfb2JqWyAwIF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRIZWlnaHQgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBfd2luZG93LmhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgX29iai5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgJ21pbi1oZWlnaHQnOiBoZWlnaHQgLSBfaGVhZGVyLmlubmVySGVpZ2h0KCkgLSBwYXJzZUludCggX29iai5jc3MoJ3BhZGRpbmctYm90dG9tJykgKSAtIHBhcnNlSW50KCBfb2JqLmNzcygncGFkZGluZy10b3AnKSApICsgJCgnLnNpdGVfX21haW4tdGl0bGUnKS5vdXRlckhlaWdodCh0cnVlKVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgTG9jYXRpb24gPSBmdW5jdGlvbiAoIG9iaiApIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIG1hcE5hbWUgPSBfb2JqLmF0dHIoJ2lkJyksXG4gICAgICAgICAgICBtYXBMYXQgPSBfb2JqLmRhdGEoJ21hcC1sYXQnKSxcbiAgICAgICAgICAgIG1hcExuZyA9IF9vYmouZGF0YSgnbWFwLWxuZycpLFxuICAgICAgICAgICAgaWNvblBhdGggPSBfb2JqLmRhdGEoJ2ljb24tcGF0aCcpLFxuICAgICAgICAgICAgbWFwWm9vbSA9IF9vYmouZGF0YSgnbWFwLXpvb20nKSxcbiAgICAgICAgICAgIG15TGF0TG5nID0geyBsYXQ6IF9vYmouZGF0YSgnbWFwLWxhdCcpLCBsbmc6IF9vYmouZGF0YSgnbWFwLWxuZycpIH0sXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXG4gICAgICAgICAgICBtYXAsXG4gICAgICAgICAgICB0aWxlTGlzdGVuZXIsXG4gICAgICAgICAgICBtYXJrZXIsXG4gICAgICAgICAgICBkZWx0YVkgPSAxLjQ7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGREb21MaXN0ZW5lciggd2luZG93LCAncmVzaXplJywgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgbWFwLnNldENlbnRlciggbXlMYXRMbmcgKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDEwMjQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9vZmZzZXRDZW50ZXIoIG1hcC5nZXRDZW50ZXIoKSwgMCwgMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX29mZnNldENlbnRlciggbWFwLmdldENlbnRlcigpLCAwLCAtNTAgKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdE1hcCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250YWN0LWdvb2dsZS1tYXAnKSwge1xuICAgICAgICAgICAgICAgICAgICB6b29tOiBtYXBab29tLFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGx3aGVlbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNlbnRlcjogeyBsYXQ6IG1hcExhdCwgbG5nOiBtYXBMbmcgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIHZhciBpbWFnZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBpY29uUGF0aCxcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVkU2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoOTgsIDkxKVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB2YXIgYmVhY2hNYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKCB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB7IGxhdDogbWFwTGF0LCBsbmc6IG1hcExuZyB9LFxuICAgICAgICAgICAgICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogaW1hZ2VcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lck9uY2UobWFwLCAnaWRsZScsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIG1hcC5zZXRDZW50ZXIoIG15TGF0TG5nICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSAxMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfb2Zmc2V0Q2VudGVyKCBtYXAuZ2V0Q2VudGVyKCksIDAsIDApO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9vZmZzZXRDZW50ZXIoIG1hcC5nZXRDZW50ZXIoKSwgMCwgLTUwICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29mZnNldENlbnRlciA9IGZ1bmN0aW9uICggbGF0bG5nLCBvZmZzZXR4LCBvZmZzZXR5ICkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gTWF0aC5wb3coIDIsIG1hcC5nZXRab29tKCkgKSxcbiAgICAgICAgICAgICAgICAgICAgd29ybGRDb29yZGluYXRlQ2VudGVyID0gbWFwLmdldFByb2plY3Rpb24oKS5mcm9tTGF0TG5nVG9Qb2ludCggbGF0bG5nICksXG4gICAgICAgICAgICAgICAgICAgIHBpeGVsT2Zmc2V0ID0gbmV3IGdvb2dsZS5tYXBzLlBvaW50KCAoIG9mZnNldHgvc2NhbGUgKSB8fCAwLCAoIG9mZnNldHkvc2NhbGUgKSB8fCAwICksXG4gICAgICAgICAgICAgICAgICAgIHdvcmxkQ29vcmRpbmF0ZU5ld0NlbnRlciA9IG5ldyBnb29nbGUubWFwcy5Qb2ludChcblxuICAgICAgICAgICAgICAgICAgICAgICAgd29ybGRDb29yZGluYXRlQ2VudGVyLnggLSBwaXhlbE9mZnNldC54LFxuICAgICAgICAgICAgICAgICAgICAgICAgd29ybGRDb29yZGluYXRlQ2VudGVyLnkgKyBwaXhlbE9mZnNldC55XG5cbiAgICAgICAgICAgICAgICAgICAgKSxcblxuICAgICAgICAgICAgICAgICAgICBuZXdDZW50ZXIgPSBtYXAuZ2V0UHJvamVjdGlvbigpLmZyb21Qb2ludFRvTGF0TG5nKCB3b3JsZENvb3JkaW5hdGVOZXdDZW50ZXIgKTtcblxuICAgICAgICAgICAgICAgIG1hcC5zZXRDZW50ZXIoIG5ld0NlbnRlciApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGREb21MaXN0ZW5lciggd2luZG93LCAnbG9hZCcsIF9pbml0TWFwICk7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxufSApKCk7Il19
