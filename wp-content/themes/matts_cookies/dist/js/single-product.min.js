"use strict";!function(){$(function(){new e($(".preloader")),$.each($(".site__header"),function(){new i($(this))}),$.each($(".site__menu-nav_anchors"),function(){new n($(this))}),$.each($(".slides"),function(){new t($(this))}),$.each($(".site__content-full"),function(){new s($(this))})});var e=function(e){var i=this,n=$(window),t=e,s=$("body"),o=function(){n.on({load:function(){d()}})},a=function(){s[0].preloader=i,o()},d=function(){t.addClass("preloader_loaded"),setTimeout(function(){t.remove(),$(".site").addClass("site__loaded")},500)};a()},i=function(e){var i=this,n=e,t=$(window),s=$("html"),o=n.find(".site__menu"),a=($(".site__content"),!1),d=!1,c=!0,h=0,l=n.find(".site__menu-btn"),r=0,f=function(){t.on({load:function(){r=t.width()},resize:function(){r!=t.width()&&(r=t.width()+1,t.width()>=1024&&(o.scrollTop(0),_(l)))},scroll:function(){a=t.scrollTop()>=2*n.innerHeight(),t.scrollTop()>=n.innerHeight()?c&&(c=!1,n.addClass("site__header_hide")):(c=!0,n.removeClass("site__header_hide")),a?n.hasClass("site__header_hide")&&setTimeout(function(){n.addClass("site__header_fixed"),n.removeClass("site__header_hide")},100):t.scrollTop()<=3*n.innerHeight()&&n.removeClass("site__header_fixed")},DOMMouseScroll:function(e){var i=e.originalEvent.detail;if(i){var n=i>0?1:-1;u(n)}n<0?d=!0:setTimeout(function(){d=!1},300)},mousewheel:function(e){var i=e.originalEvent.wheelDelta;if(i){var n=i>0?-1:1;u(n)}n<0?d=!0:setTimeout(function(){d=!1},300)}}),$(window).scroll(function(e){var i=$(this).scrollTop();if(i>h){u(1);var n=1}else{u(-1);var n=-1}h=i,n<0?d=!0:setTimeout(function(){d=!1},300)}),l.on({click:function(){$(this).hasClass("opened")?_($(this)):m($(this))}})},u=function(e){e>0&&!n.hasClass("site__header_hidden")&&!l.hasClass("opened")&&a&&!d&&n.addClass("site__header_hidden"),e<0&&n.hasClass("site__header_hidden")&&!l.hasClass("opened")&&a&&d&&n.removeClass("site__header_hidden")},_=function(e){s.css({overflowY:"auto"}),e.removeClass("opened"),n.removeClass("opened-menu")},v=function(){n[0].obj=i,f()},m=function(e){e.addClass("opened"),n.addClass("opened-menu"),s.css({overflowY:"hidden"})};v()},n=function(e){var i=this,n=e,t=n.find(".site__menu-link[data-href]"),s=$("html"),o=$(window),a=$("html, body"),d=$(".site__header"),c=($(".popup__cookies-info"),function(){o.on({resize:function(){},scroll:function(){}}),t.on({click:function(){var e=$(this),i=e.attr("data-href"),n=$("."+i).offset().top-d.innerHeight();return t.removeClass("active"),e.addClass("active"),n=o.width()>=1024?$("."+i).offset().top-91:$("."+i).offset().top-64,a.stop(!0,!1),a.animate({scrollTop:n},300),s.css({overflowY:"auto"}),d.find(".site__menu-btn").removeClass("opened"),d.removeClass("opened-menu"),!1}})}),h=function(){n[0].obj=i,c()};h()},t=function(e){var i=this,n=e,t=$(window),s=function(){t.on({scroll:function(){o()}})},o=function(){var e=t.scrollTop(),i=t.height(),s=n.offset().top,o=s-e,a=1-o/i;a>.5&&(n.hasClass("slides_active")||n.addClass("slides_active"))},a=function(){n[0].slides=i,s(),o()};a()},s=function(e){var i=this,n=e,t=$(window),s=$(".site__header"),o=0,a=function(){t.on({load:function(){o=t.width(),c()},resize:function(){o!=t.width()&&(o=t.width()+1,c())}})},d=function(){n[0].obj=i,a()},c=function(){var e=t.height();n.css({"min-height":e-s.innerHeight()-$(".site__main-title").outerHeight(!0)}),n.find(".contact-us").length&&t.width()>=1024?n.css({"min-height":""}):n.css({"min-height":e-s.innerHeight()-$(".site__main-title").outerHeight(!0)})};d()}}();
"use strict";!function(){$(function(){$.each($(".product-single__gallery"),function(){new s($(this))})});var s=function(s){var o=s.find(".gallery__top"),l=s.find(".gallery__thumbs"),e=function(){o.slick({slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!0,asNavFor:".gallery__thumbs",responsive:[{breakpoint:768,settings:{fade:!1}}]}),l.slick({slidesToShow:2,slidesToScroll:1,asNavFor:".gallery__top",dots:!1,arrows:!1,focusOnSelect:!0})},i=function(){e()};i()}}();
!function(){$(function(){$(".popup").each(function(){new o($(this))})});var o=function(o){var n,t=this,i=40,p=$(".popup__open"),e=o,c=e.find(".popup__close, .popup__cancel"),s=e.find(".popup__wrap"),u=e.find(".popup__content"),d=$("html"),a=$(window),h=setTimeout(function(){},1),f=function(){a.height()-2*i-s.height()>0?s.css({top:(a.height()-2*i-s.height())/2}):s.css({top:0})},l=function(){var o,n=document.createElement("div");return n.className="popup__scrollbar-measure",document.body.appendChild(n),o=n.offsetWidth-n.clientWidth,document.body.removeChild(n),o},r=function(){e.css({overflowY:"hidden"}),d.css({overflowY:"auto",paddingRight:0}),e.removeClass("popup_opened"),e.addClass("popup_hide"),h=setTimeout(function(){e.css({overflowY:"scroll"}),e.removeClass("popup_hide")},300)},_=function(){e[0].obj=t,v()},v=function(){a.on({load:function(){n=a.width()},resize:function(){f(),a.width()>=1024&&n!=a.width()&&(n=a.width()+1,r())}}),p.on({click:function(){return $(this).hasClass("cookies-info_btn")?a.width()<1024?(w($(this).attr("data-popup")),!1):void 0:(w($(this).attr("data-popup")),!1)}}),s.on({click:function(o){o.stopPropagation()}}),e.on({click:function(){return r(),!1}}),c.on({click:function(){return r(),!1}})},w=function(o){m(o),d.css({overflowY:"hidden",paddingRight:l()}),e.addClass("popup_opened"),f()},m=function(o){var n=u.filter(".popup__"+o);u.css({display:"none"}),n.css({display:"block"})};_()}}();
"use strict";!function(){$(function(){$.each($(".count-product"),function(){new n($(this))})});var n=function(n){var t=this,c=n,i=c.find(".count-product__input"),u=c.find(".count-product_add"),o=c.find(".count-product_del"),e=function(){i.on({keypress:function(){46==event.which&&$(this).val().indexOf(".")==-1||!(event.which<48||event.which>57)||event.preventDefault()}}),i.on({keyup:function(){""==i.val()&&i.val(1)}}),u.on({click:function(){return f(),!1}}),o.on({click:function(){return r(),!1}})},f=function(){var n=parseInt(i.val());i.val(n+1)},r=function(){var n=parseInt(i.val());1!=n&&i.val(n-1)},a=function(){c[0].obj=t,e()};a()}}();
"use strict";!function(){$(function(){$.each($(".my-cart__product"),function(){new t($(this))}),$.each($(".product-single__info"),function(){new e($(this))})});var t=function(t){var e=this,n=t,i=n.find(".count-product__input"),o=n.find(".count-product__btn"),a=n.find(".my-cart__remove"),s=new XMLHttpRequest,d=$(".cart"),r=$(".my-cart__total"),c=$(window),u=function(){c.on({load:function(){p()},resize:function(){p()}}),i.on({keypress:function(){(46==event.which&&$(this).val().indexOf(".")==-1||!(event.which<48||event.which>57))&&_($(this).parents(".my-cart__product"))}}),o.on({click:function(){_($(this).parents(".my-cart__product"))}}),a.on({click:function(){return l($(this).parents(".my-cart__product")),!1}})},f=function(t){t.addClass("hidden"),setTimeout(function(){t.remove()},500)},l=function(t){s.abort(),s=$.ajax({url:$("body").attr("data-action"),data:{id:t.attr("data-id"),flag:"remove"},dataType:"json",type:"get",success:function(e){f(t),0==parseInt(e.cartCountProducts)?(d.find("div").remove(),d.removeClass("cart_fill"),$(".site__header").removeClass("site__header_fill-cart")):d.find("div").html(e.cartCountProducts),r.find("span").html(e.subtotal)},error:function(t){"abort"!=t.statusText&&alert("ERROR!!!")}})},_=function(t){s.abort(),s=$.ajax({url:$("body").attr("data-action"),data:{id:t.attr("data-id"),countProduct:t.find(".count-product__input").val(),flag:"changeCount"},dataType:"json",type:"get",success:function(e){t.find(".my-cart__total-price").html(e.total),r.find("span").html(e.subtotal)},error:function(t){"abort"!=t.statusText&&alert("ERROR!!!")}})},p=function(){n.each(function(){var t=$(this),e=t.find(">div");t.height(e.outerHeight(!0))})},h=function(){n[0].obj=e,u()};h()},e=function(t){var e=this,n=t,i=n.find(".count-product__input"),o=n.find(".product-single__price"),a=n.find(".product-single__add"),s=new XMLHttpRequest,d=$(".cart"),r=($(window),function(){a.on({click:function(t){return a.hasClass("adding")||(f(t,$(this).parents(".product-single__info")),a.addClass("adding")),!1}})}),c=function(t){var e=$(".gallery__top .slick-current").data("image"),n=t||window.event;n.pageX,n.pageY;console.log(e),$("body").append('<div class="site__product hidden"><img src="'+e+'" alt=""></div>'),$(".site__product").css({top:$(".gallery__top").offset().top+$(".gallery__top").innerHeight()/2-$(".site__product").height()/2,left:$(".gallery__top").offset().left+$(".gallery__top").innerWidth()/2-$(".site__product").width()/2}),setTimeout(function(){$(".site__product").addClass("visible"),$(".site__product").css({top:d.offset().top+d.innerHeight()/2-$(".site__product").height()/2,left:d.offset().left+d.innerWidth()/2-$(".site__product").width()/2})},100),setTimeout(function(){$(".site__product").removeClass("visible")},500),setTimeout(function(){$(".site__product").remove(),a.removeClass("adding")},700)},u=function(){var t="";t=1==parseInt(i.val())?" item":" items",$(".product-single").append('<div class="product-single__info-message hidden">'+i.val()+t+" added to cart</div>"),$(".product-single__info-message ").css({top:a.offset().top+a.innerHeight()+10,left:a.offset().left}),setTimeout(function(){$(".product-single__info-message").addClass("visible")},200),setTimeout(function(){$(".product-single__info-message").remove(),a.removeClass("adding")},3e3)},f=function(t,e){s.abort(),s=$.ajax({url:$("body").attr("data-action"),data:{action:"single_add_product",id:e.attr("data-id"),countProduct:i.val(),price:o.text(),flag:"addToCart"},dataType:"json",type:"get",success:function(e){parseInt(e.cartCountProducts)!=parseInt(d.find("div").text())?(c(t),setTimeout(function(){d.hasClass("cart_fill")||d.append("<div></div>"),d.addClass("cart_fill"),$(".site__header").addClass("site__header_fill-cart"),setTimeout(function(){d.find("div").html(e.cartCountProducts)},100)},600)):u()},error:function(t){"abort"!=t.statusText&&alert("ERROR!!!")}})},l=function(){n[0].obj=e,r()};l()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5tYWluLmpzIiwianF1ZXJ5LnNpbmdsZS1wcm9kdWN0LmpzIiwianF1ZXJ5LnBvcHVwLmpzIiwianF1ZXJ5Lm51bWJlci1zcGlubmVyLmpzIiwianF1ZXJ5LmFqYXgtY2FydC5qcyJdLCJuYW1lcyI6WyIkIiwiUHJlbG9hZGVyIiwiZWFjaCIsIk1lbnUiLCJ0aGlzIiwiU2Nyb2xsUGFuZWwiLCJTbGlkZXMiLCJGdWxsSGVpZ2h0Iiwib2JqIiwiX3NlbGYiLCJfd2luZG93Iiwid2luZG93IiwiX3ByZWxvYWRlciIsIl9ib2R5IiwiX2FkZEV2ZW50cyIsIm9uIiwibG9hZCIsIl9zaG93U2l0ZSIsIl9pbml0IiwicHJlbG9hZGVyIiwiYWRkQ2xhc3MiLCJzZXRUaW1lb3V0IiwicmVtb3ZlIiwiX29iaiIsIl9odG1sIiwiX21lbnUiLCJmaW5kIiwiX2FjdGlvbiIsIl9hY3Rpb24yIiwiX2ZsYWdIaWRlIiwibGFzdFNjcm9sbFRvcCIsIl9zaG93TWVudUJ0biIsIl9nbG9iYWxXaWR0aCIsIndpZHRoIiwicmVzaXplIiwic2Nyb2xsVG9wIiwiX2Nsb3NlTWVudSIsInNjcm9sbCIsImlubmVySGVpZ2h0IiwicmVtb3ZlQ2xhc3MiLCJoYXNDbGFzcyIsIkRPTU1vdXNlU2Nyb2xsIiwiZSIsImRlbHRhIiwib3JpZ2luYWxFdmVudCIsImRldGFpbCIsImRpcmVjdGlvbiIsIl9jaGVja1Njcm9sbCIsIm1vdXNld2hlZWwiLCJ3aGVlbERlbHRhIiwiZXZlbnQiLCJzdCIsImNsaWNrIiwiX29wZW5NZW51IiwiZWxlbSIsImNzcyIsIm92ZXJmbG93WSIsIl9saW5rcyIsIl9kb20iLCJfaGVhZGVyIiwiY3VySXRlbSIsIm5ld0NsYXNzIiwiYXR0ciIsIm5leHRJdGVtVG9wIiwib2Zmc2V0IiwidG9wIiwic3RvcCIsImFuaW1hdGUiLCJjdXJTY3JvbGwiLCJ3aW5kb3dIIiwiaGVpZ2h0IiwidG9wUG9zIiwidG9wSW5XaW5kb3ciLCJ2aXNpYmxlUGVyY2VudCIsInNsaWRlcyIsIl9zZXRIZWlnaHQiLCJtaW4taGVpZ2h0Iiwib3V0ZXJIZWlnaHQiLCJsZW5ndGgiLCJTd2lwZXJHYWxsZXJ5IiwiX2dhbGxlcnlUb3AiLCJfZ2FsbGVyeVRodW1icyIsIl9pbml0U2xpY2siLCJzbGljayIsInNsaWRlc1RvU2hvdyIsInNsaWRlc1RvU2Nyb2xsIiwiYXJyb3dzIiwiZmFkZSIsImFzTmF2Rm9yIiwicmVzcG9uc2l2ZSIsImJyZWFrcG9pbnQiLCJzZXR0aW5ncyIsImRvdHMiLCJmb2N1c09uU2VsZWN0IiwiUG9wdXAiLCJfcG9wdXBQYWRkaW5nIiwiX2J0blNob3ciLCJfYnRuQ2xvc2UiLCJfd3JhcCIsIl9jb250ZW50cyIsIl9zY3JvbGxDb250ZWluZXIiLCJfdGltZXIiLCJfY2VudGVyV3JhcCIsIl9nZXRTY3JvbGxXaWR0aCIsInNjcm9sbEJhcldpZHRoIiwic2Nyb2xsRGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYm9keSIsImFwcGVuZENoaWxkIiwib2Zmc2V0V2lkdGgiLCJjbGllbnRXaWR0aCIsInJlbW92ZUNoaWxkIiwiX2hpZGUiLCJwYWRkaW5nUmlnaHQiLCJfb25FdmVudHMiLCJfc2hvdyIsInN0b3BQcm9wYWdhdGlvbiIsIl9zZXRQb3B1cENvbnRlbnQiLCJjdXJDb250ZW50IiwiZmlsdGVyIiwiZGlzcGxheSIsIlNwaW5uZXIiLCJfaW5wdXQiLCJfYnRuVXAiLCJfYnRuRG93biIsImtleXByZXNzIiwid2hpY2giLCJ2YWwiLCJpbmRleE9mIiwicHJldmVudERlZmF1bHQiLCJrZXl1cCIsIl9hZGRDb3VudCIsIl9yZWR1Y2VDb3VudCIsInZhbHVlIiwicGFyc2VJbnQiLCJQcm9kdWN0c0luQ2FydCIsIkFkZFByb2R1Y3RzVG9DYXJ0IiwiX2J0bkNoYW5nZUNvdW50IiwiX2J0blJlbW92ZVByb2R1Y3QiLCJfcmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0IiwiX2NhcnQiLCJfdG90YWxQcmljZSIsIl9yZXF1ZXN0Q291bnRDaGFuZ2UiLCJwYXJlbnRzIiwiX3JlcXVlc3RQcm9kdWN0UmVtb3ZlIiwiX3JlbW92ZVByb2R1Y3QiLCJhYm9ydCIsImFqYXgiLCJ1cmwiLCJkYXRhIiwiaWQiLCJmbGFnIiwiZGF0YVR5cGUiLCJ0eXBlIiwic3VjY2VzcyIsIm0iLCJjYXJ0Q291bnRQcm9kdWN0cyIsImh0bWwiLCJzdWJ0b3RhbCIsImVycm9yIiwic3RhdHVzVGV4dCIsImFsZXJ0IiwiY291bnRQcm9kdWN0IiwidG90YWwiLCJjaGlsZHJlbiIsIl9wcmljZSIsIl9hZGRUb0NhcnRCdG4iLCJfcmVxdWVzdFByb2R1Y3RBZGRUb0NhcnQiLCJfYW5pbWF0ZWRBZGRpbmciLCJwaWMiLCJwYWdlWCIsInBhZ2VZIiwiY29uc29sZSIsImxvZyIsImFwcGVuZCIsImxlZnQiLCJpbm5lcldpZHRoIiwiX2luZm9BZGRpbmciLCJpdGVtVGV4dCIsImFjdGlvbiIsInByaWNlIiwidGV4dCJdLCJtYXBwaW5ncyI6IkFBQUEsY0FDQSxXQUVJQSxFQUFHLFdBRUMsR0FBSUMsR0FBV0QsRUFBRSxlQUVqQkEsRUFBRUUsS0FBTUYsRUFBRyxpQkFBbUIsV0FFMUIsR0FBSUcsR0FBT0gsRUFBR0ksU0FJbEJKLEVBQUVFLEtBQU1GLEVBQUUsMkJBQTRCLFdBRWxDLEdBQUlLLEdBQWFMLEVBQUVJLFNBSXZCSixFQUFFRSxLQUFNRixFQUFFLFdBQVksV0FFbEIsR0FBSU0sR0FBUU4sRUFBRUksU0FJbEJKLEVBQUVFLEtBQU1GLEVBQUUsdUJBQXdCLFdBRTlCLEdBQUlPLEdBQVlQLEVBQUVJLFVBTTFCLElBQUlILEdBQVksU0FBVU8sR0FHdEIsR0FBSUMsR0FBUUwsS0FDUk0sRUFBVVYsRUFBR1csUUFDYkMsRUFBYUosRUFDYkssRUFBUWIsRUFBRSxRQUdWYyxFQUFhLFdBRVRKLEVBQVFLLElBQ0pDLEtBQU0sV0FFRkMsUUFNWkMsRUFBUSxXQUVKTCxFQUFNLEdBQUdNLFVBQVlWLEVBQ3JCSyxLQUdKRyxFQUFZLFdBRVJMLEVBQVdRLFNBQVUsb0JBRXJCQyxXQUFXLFdB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Z0IsT0FDZDlCLEtBQU0sYUFFVkMsU0FBVSxPQUNWQyxLQUFNLE1BQ05DLFFBQVMsU0FBVUMsR0FFWHRCLFNBQVNzQixFQUFFQyxvQkFBc0J2QixTQUFTTyxFQUFNckgsS0FBSyxPQUFPOEosU0FFeERiLEVBQWlCekgsR0FFakI3QixXQUFZLFdBQ0QwSCxFQUFNdkcsU0FBUyxjQUN0QnVHLEVBQU1rQyxPQUFPLGVBRWJsQyxFQUFNM0gsU0FBUyxhQUNmcEIsRUFBRSxpQkFBaUJvQixTQUFTLDBCQUU1QkMsV0FBWSxXQUVSMEgsRUFBTXJILEtBQUssT0FBT3NJLEtBQUtGLEVBQUVDLG9CQUcxQixNQUVKLE1BT1BxQixLQUtSbEIsTUFBTyxTQUFVcEIsR0FDcUIsU0FBN0JBLEVBQWVxQixZQUNoQkMsTUFBTSxnQkFNdEJsSixFQUFRLFdBQ0pLLEVBQUssR0FBR2YsSUFBTUMsRUFDZEssSUFRUkkiLCJmaWxlIjoic2luZ2xlLXByb2R1Y3QubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4oIGZ1bmN0aW9uKCl7XG5cbiAgICAkKCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgbmV3IFByZWxvYWRlciggJCgnLnByZWxvYWRlcicpICk7XG5cbiAgICAgICAgJC5lYWNoKCAkKCAnLnNpdGVfX2hlYWRlcicgKSwgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIG5ldyBNZW51ICggJCggdGhpcyApICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnLnNpdGVfX21lbnUtbmF2X2FuY2hvcnMnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgU2Nyb2xsUGFuZWwoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcuc2xpZGVzJyksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IFNsaWRlcyggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5zaXRlX19jb250ZW50LWZ1bGwnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgRnVsbEhlaWdodCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgIH0gKTtcblxuICAgIHZhciBQcmVsb2FkZXIgPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcbiAgICAgICAgICAgIF9wcmVsb2FkZXIgPSBvYmosXG4gICAgICAgICAgICBfYm9keSA9ICQoJ2JvZHknKTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX3Nob3dTaXRlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX2JvZHlbMF0ucHJlbG9hZGVyID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3Nob3dTaXRlID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfcHJlbG9hZGVyLmFkZENsYXNzKCAncHJlbG9hZGVyX2xvYWRlZCcgKTtcblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgX3ByZWxvYWRlci5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNpdGUnKS5hZGRDbGFzcyggJ3NpdGVfX2xvYWRlZCcgKTtcblxuICAgICAgICAgICAgICAgIH0sNTAwKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBNZW51ID0gZnVuY3Rpb24oIG9iaiApIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICBfaHRtbCA9ICQoJ2h0bWwnKSxcbiAgICAgICAgICAgIF9tZW51ID0gX29iai5maW5kKCcuc2l0ZV9fbWVudScpLFxuICAgICAgICAgICAgX2NvbnRlbnQgPSAkKCcuc2l0ZV9fY29udGVudCcpLFxuICAgICAgICAgICAgX2FjdGlvbiA9IGZhbHNlLFxuICAgICAgICAgICAgX2FjdGlvbjIgPSBmYWxzZSxcbiAgICAgICAgICAgIF9mbGFnSGlkZSA9IHRydWUsXG4gICAgICAgICAgICBsYXN0U2Nyb2xsVG9wID0gMCxcbiAgICAgICAgICAgIF9zaG93TWVudUJ0biA9IF9vYmouZmluZCgnLnNpdGVfX21lbnUtYnRuJyksXG4gICAgICAgICAgICBfZ2xvYmFsV2lkdGggPSAwO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2dsb2JhbFdpZHRoID0gX3dpbmRvdy53aWR0aCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX2dsb2JhbFdpZHRoICE9IF93aW5kb3cud2lkdGgoKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9nbG9iYWxXaWR0aCA9IF93aW5kb3cud2lkdGgoKSArIDE7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbWVudS5zY3JvbGxUb3AoMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jbG9zZU1lbnUoIF9zaG93TWVudUJ0biApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ3Njcm9sbCc6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2FjdGlvbiA9IF93aW5kb3cuc2Nyb2xsVG9wKCkgPj0gX29iai5pbm5lckhlaWdodCgpICogMjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cuc2Nyb2xsVG9wKCkgPj0gX29iai5pbm5lckhlaWdodCgpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9mbGFnSGlkZSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZmxhZ0hpZGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3NpdGVfX2hlYWRlcl9oaWRlJyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZmxhZ0hpZGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZScgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfYWN0aW9uICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9vYmouaGFzQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZScgKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3NpdGVfX2hlYWRlcl9maXhlZCcgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZScgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBfd2luZG93LnNjcm9sbFRvcCgpIDw9IF9vYmouaW5uZXJIZWlnaHQoKSAqIDMgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAnc2l0ZV9faGVhZGVyX2ZpeGVkJyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ0RPTU1vdXNlU2Nyb2xsJzogZnVuY3Rpb24gKCBlICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBlLm9yaWdpbmFsRXZlbnQuZGV0YWlsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGRlbHRhICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9ICggZGVsdGEgPiAwICkgPyAxIDogLTE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoIGRpcmVjdGlvbiApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZGlyZWN0aW9uIDwgMCAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYWN0aW9uMiA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYWN0aW9uMiA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwIClcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ21vdXNld2hlZWwnOiBmdW5jdGlvbiAoIGUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IGUub3JpZ2luYWxFdmVudC53aGVlbERlbHRhO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGRlbHRhICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9ICggZGVsdGEgPiAwICkgPyAtMSA6IDE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoIGRpcmVjdGlvbiApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZGlyZWN0aW9uIDwgMCAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYWN0aW9uMiA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYWN0aW9uMiA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwIClcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oZXZlbnQpe1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdCA9ICQodGhpcykuc2Nyb2xsVG9wKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0ID4gbGFzdFNjcm9sbFRvcCl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCggMSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gMVxuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCggLTEgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IC0xXG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsYXN0U2Nyb2xsVG9wID0gc3Q7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCBkaXJlY3Rpb24gPCAwICApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2FjdGlvbjIgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FjdGlvbjIgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwIClcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBfc2hvd01lbnVCdG4ub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggJCggdGhpcyApLmhhc0NsYXNzKCAnb3BlbmVkJyApICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Nsb3NlTWVudSggJCggdGhpcyApIClcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29wZW5NZW51KCAkKCB0aGlzICkgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jaGVja1Njcm9sbCA9IGZ1bmN0aW9uKCBkaXJlY3Rpb24gKSB7XG5cbiAgICAgICAgICAgICAgICBpZiggZGlyZWN0aW9uID4gMCAmJiAhX29iai5oYXNDbGFzcyggJ3NpdGVfX2hlYWRlcl9oaWRkZW4nICkgJiYgIV9zaG93TWVudUJ0bi5oYXNDbGFzcyggJ29wZW5lZCcgKSAmJiBfYWN0aW9uICYmICFfYWN0aW9uMiApe1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZGVuJyApO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYoIGRpcmVjdGlvbiA8IDAgJiYgX29iai5oYXNDbGFzcyggJ3NpdGVfX2hlYWRlcl9oaWRkZW4nICkgJiYgIV9zaG93TWVudUJ0bi5oYXNDbGFzcyggJ29wZW5lZCcgKSAgJiYgX2FjdGlvbiAmJiBfYWN0aW9uMiApe1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoJ3NpdGVfX2hlYWRlcl9oaWRkZW4nKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jbG9zZU1lbnUgPSBmdW5jdGlvbiggZWxlbSApIHtcblxuICAgICAgICAgICAgICAgIF9odG1sLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJ1xuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIGVsZW0ucmVtb3ZlQ2xhc3MoICdvcGVuZWQnICk7XG4gICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ29wZW5lZC1tZW51JyApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfb2JqWyAwIF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vcGVuTWVudSA9IGZ1bmN0aW9uKCBlbGVtICkgIHtcblxuICAgICAgICAgICAgICAgIGVsZW0uYWRkQ2xhc3MoICdvcGVuZWQnICk7XG4gICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ29wZW5lZC1tZW51JyApO1xuXG4gICAgICAgICAgICAgICAgX2h0bWwuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2hpZGRlbidcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIFNjcm9sbFBhbmVsID0gZnVuY3Rpb24gKCBvYmogKSB7XG5cbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfbGlua3MgPSBfb2JqLmZpbmQoJy5zaXRlX19tZW51LWxpbmtbZGF0YS1ocmVmXScpLFxuICAgICAgICAgICAgX2h0bWwgPSAkKCdodG1sJyksXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpLFxuICAgICAgICAgICAgX2RvbSA9ICAkKCAnaHRtbCwgYm9keScpLFxuICAgICAgICAgICAgX2hlYWRlciA9ICQoJy5zaXRlX19oZWFkZXInKSxcbiAgICAgICAgICAgIF9wb3B1cCA9ICQoJy5wb3B1cF9fY29va2llcy1pbmZvJyk7XG5cbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL19jaGFuZ2VBY3RpdmUoKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAnc2Nyb2xsJzogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL19jaGFuZ2VBY3RpdmUoKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX2xpbmtzLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKCB0aGlzICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q2xhc3MgPSBjdXJJdGVtLmF0dHIoJ2RhdGEtaHJlZicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRJdGVtVG9wID0gJCggJy4nICsgbmV3Q2xhc3MgICkub2Zmc2V0KCkudG9wIC0gX2hlYWRlci5pbm5lckhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfbGlua3MucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5hZGRDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRJdGVtVG9wID0gJCggJy4nICsgbmV3Q2xhc3MgICkub2Zmc2V0KCkudG9wIC0gOTE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0SXRlbVRvcCA9ICQoICcuJyArIG5ld0NsYXNzICApLm9mZnNldCgpLnRvcCAtIDY0O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBfZG9tLnN0b3AoIHRydWUsIGZhbHNlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZG9tLmFuaW1hdGUoIHsgc2Nyb2xsVG9wOiBuZXh0SXRlbVRvcCAgfSwgMzAwICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9odG1sLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2F1dG8nXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9oZWFkZXIuZmluZCgnLnNpdGVfX21lbnUtYnRuJykucmVtb3ZlQ2xhc3MoICdvcGVuZWQnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLnJlbW92ZUNsYXNzKCAnb3BlbmVkLW1lbnUnICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NoYW5nZUFjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCksXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0gPSAkKCdib2R5JykuZmluZCgnW2RhdGEtc2Nyb2xsPVwic2Nyb2xsXCJdJyksXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1Qb3MgPSBpdGVtLm9mZnNldCgpLnRvcDtcblxuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBpdGVtLmxlbmd0aDsgaSsrICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXIgPSAkKGl0ZW1baV0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUN1ciA9ICQoaXRlbVtpXSkub2Zmc2V0KCkudG9wIC0gX2hlYWRlci5vdXRlckhlaWdodCh0cnVlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1IZWlnaHQgPSAkKGl0ZW1baV0pLm91dGVySGVpZ2h0KHRydWUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBzY3JvbGxUb3AgPiBpdGVtQ3VyICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VyQ2xhc3MgPSBjdXIuYXR0cignY2xhc3MnKS5zcGxpdCgnICcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckxpbmsgPSBfbGlua3MuZmlsdGVyKFwiW2RhdGEtaHJlZj1cIitjdXJDbGFzc1swXStcIl1cIik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9saW5rcy5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJMaW5rLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKCBzY3JvbGxUb3AgPiAoIGl0ZW1DdXIgKyBpdGVtSGVpZ2h0ICkgKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2xpbmtzLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgLy9fY2hhbmdlQWN0aXZlKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBTbGlkZXMgPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF93aW5kb3cub24oe1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NoZWNrU2Nyb2xsID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICB2YXIgY3VyU2Nyb2xsID0gX3dpbmRvdy5zY3JvbGxUb3AoKSxcbiAgICAgICAgICAgICAgICAgICAgd2luZG93SCA9IF93aW5kb3cuaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgICAgIHRvcFBvcyA9IF9vYmoub2Zmc2V0KCkudG9wLFxuICAgICAgICAgICAgICAgICAgICB0b3BJbldpbmRvdyA9IHRvcFBvcy1jdXJTY3JvbGwsXG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVQZXJjZW50ID0gMS0odG9wSW5XaW5kb3cvd2luZG93SCk7XG5cbiAgICAgICAgICAgICAgICBpZiggdmlzaWJsZVBlcmNlbnQgPiAuNSApe1xuICAgICAgICAgICAgICAgICAgICBpZiggIV9vYmouaGFzQ2xhc3MoJ3NsaWRlc19hY3RpdmUnKSApe1xuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcygnc2xpZGVzX2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX29ialswXS5zbGlkZXMgPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgRnVsbEhlaWdodCA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICBfaGVhZGVyID0gJCgnLnNpdGVfX2hlYWRlcicpLFxuICAgICAgICAgICAgX2dsb2JhbFdpZHRoID0gMDtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICBsb2FkOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9nbG9iYWxXaWR0aCA9IF93aW5kb3cud2lkdGgoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRIZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9nbG9iYWxXaWR0aCAhPSBfd2luZG93LndpZHRoKCkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZ2xvYmFsV2lkdGggPSBfd2luZG93LndpZHRoKCkgKyAxO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NldEhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0SGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gX3dpbmRvdy5oZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICdtaW4taGVpZ2h0JzogaGVpZ2h0IC0gX2hlYWRlci5pbm5lckhlaWdodCgpIC0gJCgnLnNpdGVfX21haW4tdGl0bGUnKS5vdXRlckhlaWdodCh0cnVlKVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIGlmKCBfb2JqLmZpbmQoJy5jb250YWN0LXVzJykubGVuZ3RoICkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6IGhlaWdodCAtIF9oZWFkZXIuaW5uZXJIZWlnaHQoKSAtICQoJy5zaXRlX19tYWluLXRpdGxlJykub3V0ZXJIZWlnaHQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6IGhlaWdodCAtIF9oZWFkZXIuaW5uZXJIZWlnaHQoKSAtICQoJy5zaXRlX19tYWluLXRpdGxlJykub3V0ZXJIZWlnaHQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxufSApKCk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG4oIGZ1bmN0aW9uKCl7XG5cbiAgICAkKCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcucHJvZHVjdC1zaW5nbGVfX2dhbGxlcnknICksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IFN3aXBlckdhbGxlcnkoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICB9ICk7XG5cbiAgICB2YXIgU3dpcGVyR2FsbGVyeSA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX2dhbGxlcnlUb3AgPSBvYmouZmluZCgnLmdhbGxlcnlfX3RvcCcpLFxuICAgICAgICAgICAgX2dhbGxlcnlUaHVtYnMgPSBvYmouZmluZCgnLmdhbGxlcnlfX3RodW1icycpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfaW5pdFNsaWNrID0gZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgIF9nYWxsZXJ5VG9wLnNsaWNrKCB7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gICAgICAgICAgICAgICAgICAgIGFycm93czogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGZhZGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGFzTmF2Rm9yOiAnLmdhbGxlcnlfX3RodW1icycsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNpdmU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50OiA3NjgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFkZTogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfZ2FsbGVyeVRodW1icy5zbGljaygge1xuICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDIsXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxuICAgICAgICAgICAgICAgICAgICBhc05hdkZvcjogJy5nYWxsZXJ5X190b3AnLFxuICAgICAgICAgICAgICAgICAgICBkb3RzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgYXJyb3dzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZm9jdXNPblNlbGVjdDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9pbml0U2xpY2soKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG59ICkoKTsiLCIoIGZ1bmN0aW9uKCl7XG5cbiAgICAkKCBmdW5jdGlvbigpe1xuXG4gICAgICAgICQoICcucG9wdXAnICkuZWFjaChmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICBuZXcgUG9wdXAoJCh0aGlzKSk7XG5cbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIHZhciBQb3B1cCA9IGZ1bmN0aW9uKCBvYmogKXtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX3BvcHVwUGFkZGluZyA9IDQwLFxuICAgICAgICAgICAgX2J0blNob3cgPSAgJCggJy5wb3B1cF9fb3BlbicgKSxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfYnRuQ2xvc2UgPSBfb2JqLmZpbmQoICcucG9wdXBfX2Nsb3NlLCAucG9wdXBfX2NhbmNlbCcgKSxcbiAgICAgICAgICAgIF93cmFwID0gX29iai5maW5kKCAnLnBvcHVwX193cmFwJyApLFxuICAgICAgICAgICAgX2NvbnRlbnRzID0gX29iai5maW5kKCAnLnBvcHVwX19jb250ZW50JyApLFxuICAgICAgICAgICAgX3Njcm9sbENvbnRlaW5lciA9ICQoICdodG1sJyApLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyApLFxuICAgICAgICAgICAgX2dsb2JhbFdpZHRoLFxuICAgICAgICAgICAgX3RpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKXt9LCAxICk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9jZW50ZXJXcmFwID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBpZiAoIF93aW5kb3cuaGVpZ2h0KCkgLSAoIF9wb3B1cFBhZGRpbmcgKiAyICkgLSBfd3JhcC5oZWlnaHQoKSA+IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgIF93cmFwLmNzcyggeyB0b3A6ICggKCBfd2luZG93LmhlaWdodCgpIC0gKCBfcG9wdXBQYWRkaW5nICogMiApICkgLSBfd3JhcC5oZWlnaHQoKSApIC8gMiB9ICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX3dyYXAuY3NzKCB7IHRvcDogMCB9ICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9nZXRTY3JvbGxXaWR0aCA9IGZ1bmN0aW9uICgpe1xuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyksXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbEJhcldpZHRoO1xuXG4gICAgICAgICAgICAgICAgc2Nyb2xsRGl2LmNsYXNzTmFtZSA9ICdwb3B1cF9fc2Nyb2xsYmFyLW1lYXN1cmUnO1xuXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCggc2Nyb2xsRGl2ICk7XG5cbiAgICAgICAgICAgICAgICBzY3JvbGxCYXJXaWR0aCA9IHNjcm9sbERpdi5vZmZzZXRXaWR0aCAtIHNjcm9sbERpdi5jbGllbnRXaWR0aDtcblxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2Nyb2xsRGl2KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxCYXJXaWR0aDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaGlkZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX29iai5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnaGlkZGVuJ1xuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJyxcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiAwXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3BvcHVwX29wZW5lZCcgKTtcbiAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAncG9wdXBfaGlkZScgKTtcblxuICAgICAgICAgICAgICAgIF90aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5jc3MgKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ3Njcm9sbCdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3BvcHVwX2hpZGUnICk7XG4gICAgICAgICAgICAgICAgfSwgMzAwICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9vbkV2ZW50cygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbkV2ZW50cyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICBsb2FkOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9nbG9iYWxXaWR0aCA9IF93aW5kb3cud2lkdGgoKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2VudGVyV3JhcCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDEwMjQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX2dsb2JhbFdpZHRoICE9IF93aW5kb3cud2lkdGgoKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZ2xvYmFsV2lkdGggPSBfd2luZG93LndpZHRoKCkgKyAxO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9idG5TaG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggJCh0aGlzKS5oYXNDbGFzcygnY29va2llcy1pbmZvX2J0bicpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA8IDEwMjQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3Nob3coICQoIHRoaXMgKS5hdHRyKCAnZGF0YS1wb3B1cCcgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2hvdyggJCggdGhpcyApLmF0dHIoICdkYXRhLXBvcHVwJyApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfd3JhcC5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oIGUgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX29iai5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX2J0bkNsb3NlLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2hvdyA9IGZ1bmN0aW9uKCBjbGFzc05hbWUgKXtcbiAgICAgICAgICAgICAgICBfc2V0UG9wdXBDb250ZW50KCBjbGFzc05hbWUgKTtcblxuICAgICAgICAgICAgICAgIF9zY3JvbGxDb250ZWluZXIuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2hpZGRlbicsXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogX2dldFNjcm9sbFdpZHRoKClcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3BvcHVwX29wZW5lZCcgKTtcbiAgICAgICAgICAgICAgICBfY2VudGVyV3JhcCgpO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3NldFBvcHVwQ29udGVudCA9IGZ1bmN0aW9uKCBjbGFzc05hbWUgKXtcbiAgICAgICAgICAgICAgICB2YXIgY3VyQ29udGVudCA9IF9jb250ZW50cy5maWx0ZXIoICcucG9wdXBfXycgKyBjbGFzc05hbWUgKTtcblxuICAgICAgICAgICAgICAgIF9jb250ZW50cy5jc3MoIHsgZGlzcGxheTogJ25vbmUnIH0gKTtcbiAgICAgICAgICAgICAgICBjdXJDb250ZW50LmNzcyggeyBkaXNwbGF5OiAnYmxvY2snIH0gKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxufSApKCk7XG5cbiIsIlwidXNlIHN0cmljdFwiO1xuKCBmdW5jdGlvbigpe1xuXG4gICAgJCggZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICQuZWFjaCggJCgnLmNvdW50LXByb2R1Y3QnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgU3Bpbm5lciggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgIH0gKTtcblxuICAgIHZhciBTcGlubmVyID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2lucHV0ID0gX29iai5maW5kKCcuY291bnQtcHJvZHVjdF9faW5wdXQnKSxcbiAgICAgICAgICAgIF9idG5VcCA9IF9vYmouZmluZCgnLmNvdW50LXByb2R1Y3RfYWRkJyksXG4gICAgICAgICAgICBfYnRuRG93biA9IF9vYmouZmluZCgnLmNvdW50LXByb2R1Y3RfZGVsJyk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfaW5wdXQub24oIHtcbiAgICAgICAgICAgICAgICAgICAga2V5cHJlc3M6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAoIGV2ZW50LndoaWNoICE9IDQ2IHx8ICQoIHRoaXMgKS52YWwoKS5pbmRleE9mKCAnLicgKSAhPSAtMSApICYmICggZXZlbnQud2hpY2ggPCA0OCB8fCBldmVudC53aGljaCA+IDU3ICkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX2lucHV0Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGtleXVwOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfaW5wdXQudmFsKCkgPT0gJycgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaW5wdXQudmFsKCAxICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX2J0blVwLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9hZGRDb3VudCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF9idG5Eb3duLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWR1Y2VDb3VudCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hZGRDb3VudCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcGFyc2VJbnQoIF9pbnB1dC52YWwoKSApO1xuXG4gICAgICAgICAgICAgICAgX2lucHV0LnZhbCggdmFsdWUgKyAxICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfcmVkdWNlQ291bnQgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcGFyc2VJbnQoIF9pbnB1dC52YWwoKSApO1xuXG4gICAgICAgICAgICAgICAgaWYoIHZhbHVlICE9IDEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX2lucHV0LnZhbCggdmFsdWUgLSAxICk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxufSApKCk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG4oIGZ1bmN0aW9uKCl7XG5cbiAgICAkKCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcubXktY2FydF9fcHJvZHVjdCcpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBQcm9kdWN0c0luQ2FydCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5wcm9kdWN0LXNpbmdsZV9faW5mbycpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBBZGRQcm9kdWN0c1RvQ2FydCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgIH0gKTtcblxuICAgIHZhciBQcm9kdWN0c0luQ2FydCA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9pbnB1dCA9IF9vYmouZmluZCgnLmNvdW50LXByb2R1Y3RfX2lucHV0JyksXG4gICAgICAgICAgICBfYnRuQ2hhbmdlQ291bnQgPSBfb2JqLmZpbmQoJy5jb3VudC1wcm9kdWN0X19idG4nKSxcbiAgICAgICAgICAgIF9idG5SZW1vdmVQcm9kdWN0ID0gX29iai5maW5kKCcubXktY2FydF9fcmVtb3ZlJyksXG4gICAgICAgICAgICBfcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxuICAgICAgICAgICAgX2NhcnQgPSAkKCcuY2FydCcpLFxuICAgICAgICAgICAgX3RvdGFsUHJpY2UgPSAkKCcubXktY2FydF9fdG90YWwnKSxcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfc2V0SGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRIZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX2lucHV0Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGtleXByZXNzOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggISgoIGV2ZW50LndoaWNoICE9IDQ2IHx8ICQoIHRoaXMgKS52YWwoKS5pbmRleE9mKCAnLicgKSAhPSAtMSApICYmICggZXZlbnQud2hpY2ggPCA0OCB8fCBldmVudC53aGljaCA+IDU3ICkpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlcXVlc3RDb3VudENoYW5nZSggJCh0aGlzKS5wYXJlbnRzKCcubXktY2FydF9fcHJvZHVjdCcpICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX2J0bkNoYW5nZUNvdW50Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZXF1ZXN0Q291bnRDaGFuZ2UoICQodGhpcykucGFyZW50cygnLm15LWNhcnRfX3Byb2R1Y3QnKSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfYnRuUmVtb3ZlUHJvZHVjdC5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVxdWVzdFByb2R1Y3RSZW1vdmUoICQodGhpcykucGFyZW50cygnLm15LWNhcnRfX3Byb2R1Y3QnKSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9yZW1vdmVQcm9kdWN0ID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cbiAgICAgICAgICAgICAgICBlbGVtLmFkZENsYXNzKCdoaWRkZW4nKTtcblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGVsZW0ucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgICAgICB9LCA1MDAgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9yZXF1ZXN0UHJvZHVjdFJlbW92ZSA9IGZ1bmN0aW9uICggZWxlbSApIHtcblxuICAgICAgICAgICAgICAgIF9yZXF1ZXN0LmFib3J0KCk7XG4gICAgICAgICAgICAgICAgX3JlcXVlc3QgPSAkLmFqYXgoIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAkKCdib2R5JykuYXR0cignZGF0YS1hY3Rpb24nKSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW0uYXR0cignZGF0YS1pZCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhZzogJ3JlbW92ZSdcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJnZXRcIixcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKG0pIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlbW92ZVByb2R1Y3QoIGVsZW0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIHBhcnNlSW50KG0uY2FydENvdW50UHJvZHVjdHMpID09IDAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2FydC5maW5kKCdkaXYnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2FydC5yZW1vdmVDbGFzcygnY2FydF9maWxsJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnNpdGVfX2hlYWRlcicpLnJlbW92ZUNsYXNzKCdzaXRlX19oZWFkZXJfZmlsbC1jYXJ0Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2FydC5maW5kKCdkaXYnKS5odG1sKCBtLmNhcnRDb3VudFByb2R1Y3RzICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF90b3RhbFByaWNlLmZpbmQoJ3NwYW4nKS5odG1sKCBtLnN1YnRvdGFsICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChYTUxIdHRwUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBYTUxIdHRwUmVxdWVzdC5zdGF0dXNUZXh0ICE9IFwiYWJvcnRcIiApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIkVSUk9SISEhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3JlcXVlc3RDb3VudENoYW5nZSA9IGZ1bmN0aW9uICggZWxlbSApIHtcblxuICAgICAgICAgICAgICAgIF9yZXF1ZXN0LmFib3J0KCk7XG4gICAgICAgICAgICAgICAgX3JlcXVlc3QgPSAkLmFqYXgoIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAkKCdib2R5JykuYXR0cignZGF0YS1hY3Rpb24nKSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW0uYXR0cignZGF0YS1pZCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRQcm9kdWN0OiBlbGVtLmZpbmQoJy5jb3VudC1wcm9kdWN0X19pbnB1dCcpLnZhbCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhZzogJ2NoYW5nZUNvdW50J1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImdldFwiLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAobSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtLmZpbmQoJy5teS1jYXJ0X190b3RhbC1wcmljZScpLmh0bWwoIG0udG90YWwgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90b3RhbFByaWNlLmZpbmQoJ3NwYW4nKS5odG1sKCBtLnN1YnRvdGFsICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChYTUxIdHRwUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBYTUxIdHRwUmVxdWVzdC5zdGF0dXNUZXh0ICE9IFwiYWJvcnRcIiApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIkVSUk9SISEhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3NldEhlaWdodCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX29iai5lYWNoKCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbiA9IGN1ckl0ZW0uZmluZCgnPmRpdicpO1xuXG4gICAgICAgICAgICAgICAgICAgIGN1ckl0ZW0uaGVpZ2h0KCBjaGlsZHJlbi5vdXRlckhlaWdodCh0cnVlKSApO1xuXG4gICAgICAgICAgICAgICAgfSApXG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBBZGRQcm9kdWN0c1RvQ2FydCA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9pbnB1dCA9IF9vYmouZmluZCgnLmNvdW50LXByb2R1Y3RfX2lucHV0JyksXG4gICAgICAgICAgICBfcHJpY2UgPSBfb2JqLmZpbmQoJy5wcm9kdWN0LXNpbmdsZV9fcHJpY2UnKSxcbiAgICAgICAgICAgIF9hZGRUb0NhcnRCdG4gPSBfb2JqLmZpbmQoJy5wcm9kdWN0LXNpbmdsZV9fYWRkJyksXG4gICAgICAgICAgICBfcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxuICAgICAgICAgICAgX2NhcnQgPSAkKCcuY2FydCcpLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9hZGRUb0NhcnRCdG4ub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICggZXZlbnQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAhKCBfYWRkVG9DYXJ0QnRuLmhhc0NsYXNzKCdhZGRpbmcnKSApICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlcXVlc3RQcm9kdWN0QWRkVG9DYXJ0KCBldmVudCwgJCh0aGlzKS5wYXJlbnRzKCcucHJvZHVjdC1zaW5nbGVfX2luZm8nKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hZGRUb0NhcnRCdG4uYWRkQ2xhc3MoJ2FkZGluZycpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfYW5pbWF0ZWRBZGRpbmcgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgcGljID0gJCgnLmdhbGxlcnlfX3RvcCAuc2xpY2stY3VycmVudCcpLmRhdGEoJ2ltYWdlJyksXG5cbiAgICAgICAgICAgICAgICBlID0gZXZlbnQgfHwgd2luZG93LmV2ZW50O1xuXG4gICAgICAgICAgICAgICAgdmFyIHBhZ2VYID0gZS5wYWdlWCxcbiAgICAgICAgICAgICAgICAgICAgcGFnZVkgPSBlLnBhZ2VZO1xuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocGljKTtcblxuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJzaXRlX19wcm9kdWN0IGhpZGRlblwiPjxpbWcgc3JjPVwiJysgcGljICsnXCIgYWx0PVwiXCI+PC9kaXY+Jyk7XG4gICAgICAgICAgICAgICAgJCgnLnNpdGVfX3Byb2R1Y3QnKS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAkKCcuZ2FsbGVyeV9fdG9wJykub2Zmc2V0KCkudG9wICsgJCgnLmdhbGxlcnlfX3RvcCcpLmlubmVySGVpZ2h0KCkvMiAtICQoJy5zaXRlX19wcm9kdWN0JykuaGVpZ2h0KCkvMiAsXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6ICQoJy5nYWxsZXJ5X190b3AnKS5vZmZzZXQoKS5sZWZ0ICsgJCgnLmdhbGxlcnlfX3RvcCcpLmlubmVyV2lkdGgoKS8yIC0gJCgnLnNpdGVfX3Byb2R1Y3QnKS53aWR0aCgpLzJcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAkKCcuc2l0ZV9fcHJvZHVjdCcpLmFkZENsYXNzKCd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5zaXRlX19wcm9kdWN0JykuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IF9jYXJ0Lm9mZnNldCgpLnRvcCArIF9jYXJ0LmlubmVySGVpZ2h0KCkvMiAtICQoJy5zaXRlX19wcm9kdWN0JykuaGVpZ2h0KCkvMiAsXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiBfY2FydC5vZmZzZXQoKS5sZWZ0ICsgX2NhcnQuaW5uZXJXaWR0aCgpLzIgLSAkKCcuc2l0ZV9fcHJvZHVjdCcpLndpZHRoKCkvMlxuICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICB9LCAxMDAgKTtcblxuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgJCgnLnNpdGVfX3Byb2R1Y3QnKS5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xuXG4gICAgICAgICAgICAgICAgfSwgNTAwICk7XG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAkKCcuc2l0ZV9fcHJvZHVjdCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICBfYWRkVG9DYXJ0QnRuLnJlbW92ZUNsYXNzKCdhZGRpbmcnKTtcblxuICAgICAgICAgICAgICAgIH0sIDcwMCApO1xuXG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5mb0FkZGluZyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1UZXh0ID0gJyc7XG5cbiAgICAgICAgICAgICAgICBpZiggcGFyc2VJbnQoIF9pbnB1dC52YWwoKSApID09IDEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaXRlbVRleHQgPSAnIGl0ZW0nO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBpdGVtVGV4dCA9ICcgaXRlbXMnO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJCgnLnByb2R1Y3Qtc2luZ2xlJykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwicHJvZHVjdC1zaW5nbGVfX2luZm8tbWVzc2FnZSBoaWRkZW5cIj4nKyBfaW5wdXQudmFsKCkgKyBpdGVtVGV4dCArJyBhZGRlZCB0byBjYXJ0PC9kaXY+Jyk7XG4gICAgICAgICAgICAgICAgJCgnLnByb2R1Y3Qtc2luZ2xlX19pbmZvLW1lc3NhZ2UgJykuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogX2FkZFRvQ2FydEJ0bi5vZmZzZXQoKS50b3AgKyBfYWRkVG9DYXJ0QnRuLmlubmVySGVpZ2h0KCkgKyAxMCxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogX2FkZFRvQ2FydEJ0bi5vZmZzZXQoKS5sZWZ0XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgJCgnLnByb2R1Y3Qtc2luZ2xlX19pbmZvLW1lc3NhZ2UnKS5hZGRDbGFzcygndmlzaWJsZScpO1xuXG4gICAgICAgICAgICAgICAgfSwgMjAwICk7XG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAkKCcucHJvZHVjdC1zaW5nbGVfX2luZm8tbWVzc2FnZScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICBfYWRkVG9DYXJ0QnRuLnJlbW92ZUNsYXNzKCdhZGRpbmcnKTtcblxuICAgICAgICAgICAgICAgIH0sIDMwMDAgKTtcblxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3JlcXVlc3RQcm9kdWN0QWRkVG9DYXJ0ID0gZnVuY3Rpb24gKCBldmVudCwgZWxlbSApIHtcblxuICAgICAgICAgICAgICAgIF9yZXF1ZXN0LmFib3J0KCk7XG4gICAgICAgICAgICAgICAgX3JlcXVlc3QgPSAkLmFqYXgoIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAkKCdib2R5JykuYXR0cignZGF0YS1hY3Rpb24nKSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnc2luZ2xlX2FkZF9wcm9kdWN0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtLmF0dHIoJ2RhdGEtaWQnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50UHJvZHVjdDogX2lucHV0LnZhbCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2U6IF9wcmljZS50ZXh0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICBmbGFnOiAnYWRkVG9DYXJ0J1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImdldFwiLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAobSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggcGFyc2VJbnQobS5jYXJ0Q291bnRQcm9kdWN0cykgIT0gcGFyc2VJbnQoX2NhcnQuZmluZCgnZGl2JykudGV4dCgpKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYW5pbWF0ZWRBZGRpbmcoIGV2ZW50ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggISggX2NhcnQuaGFzQ2xhc3MoJ2NhcnRfZmlsbCcpICkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2FydC5hcHBlbmQoJzxkaXY+PC9kaXY+Jyk7IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NhcnQuYWRkQ2xhc3MoJ2NhcnRfZmlsbCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnNpdGVfX2hlYWRlcicpLmFkZENsYXNzKCdzaXRlX19oZWFkZXJfZmlsbC1jYXJ0Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NhcnQuZmluZCgnZGl2JykuaHRtbChtLmNhcnRDb3VudFByb2R1Y3RzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA2MDAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pbmZvQWRkaW5nKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKFhNTEh0dHBSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIFhNTEh0dHBSZXF1ZXN0LnN0YXR1c1RleHQgIT0gXCJhYm9ydFwiICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiRVJST1IhISFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxufSApKCk7Il19
