"use strict";!function(){var e=!0;$(function(){new n($(".preloader")),$.each($(".site__header"),function(){new i($(this))}),$.each($("[data-href]"),function(){new t($(this))}),$.each($(".slides"),function(){new o($(this))}),$.each($(".site__content-full"),function(){new s($(this))}),$.each($(".site_index"),function(){new a($(this))})});var n=function(e){var n=this,i=$(window),t=e,o=$("body"),s=function(){i.on({load:function(){d()}})},a=function(){o[0].preloader=n,s()},d=function(){t.addClass("preloader_loaded"),setTimeout(function(){t.remove(),$(".site").addClass("site__loaded")},500)};a()},i=function(n){var i=this,t=n,o=$(window),s=$("html"),a=t.find(".site__menu"),d=($(".site__content"),!1),c=!1,l=!0,r=0,h=t.find(".site__menu-btn"),f=0,u=function(){o.on({load:function(){f=o.width()},resize:function(){f!=o.width()&&(f=o.width()+1,o.width()>=1024&&(a.scrollTop(0),v(h)))},scroll:function(){d=o.scrollTop()>=2*t.innerHeight(),o.scrollTop()>=t.innerHeight()+20?l&&(l=!1,t.addClass("site__header_hide")):(l=!0,t.removeClass("site__header_hide")),d?t.hasClass("site__header_hide")&&setTimeout(function(){t.addClass("site__header_fixed"),t.removeClass("site__header_hide")},100):o.scrollTop()<=3*t.innerHeight()&&(t.removeClass("site__header_fixed"),t.removeClass("site__header_hidden")),o.scrollTop()<=10&&(t.removeClass("site__header_fixed"),t.removeClass("site__header_hidden"))},DOMMouseScroll:function(e){var n=e.originalEvent.detail;if(n){var i=n>0?1:-1;_(i)}i<0?c=!0:setTimeout(function(){c=!1},300)},mousewheel:function(e){var n=e.originalEvent.wheelDelta;if(n){var i=n>0?-1:1;_(i)}i<0?c=!0:setTimeout(function(){c=!1},300)}}),$(window).scroll(function(e){var n=$(this).scrollTop();if(n>r){_(1);var i=1}else{_(-1);var i=-1}r=n,i<0?c=!0:setTimeout(function(){c=!1},300)}),h.on({click:function(){$(this).hasClass("opened")?v($(this)):w($(this))}})},_=function(n){n>0&&!t.hasClass("site__header_hidden")&&!h.hasClass("opened")&&d&&!c&&t.addClass("site__header_hidden"),n<0&&t.hasClass("site__header_hidden")&&!h.hasClass("opened")&&d&&c&&e&&t.removeClass("site__header_hidden")},v=function(e){s.css({overflowY:"auto"}),e.removeClass("opened"),t.removeClass("opened-menu")},m=function(){t[0].obj=i,u()},w=function(e){e.addClass("opened"),t.addClass("opened-menu"),s.css({overflowY:"hidden"})};m()},t=function(n){var i=this,t=n,o=t,s=$("html"),a=$(window),d=$("html, body"),c=$(".site__header"),l=($(".popup__cookies-info"),function(){a.on({resize:function(){},scroll:function(){}}),o.on({click:function(){var n=$(this),i=n.attr("data-href"),t=$("."+i).offset().top-c.innerHeight();return o.removeClass("active"),n.addClass("active"),t=$("."+i).offset().top,d.stop(!0,!1),d.animate({scrollTop:t},{duration:500,progress:function(){e=!1,c.addClass("site__header_hidden")},complete:function(){setTimeout(function(){e=!1},200),setTimeout(function(){e=!0},500)}}),s.css({overflowY:"auto"}),c.find(".site__menu-btn").removeClass("opened"),c.removeClass("opened-menu"),!1}})}),r=function(){t[0].obj=i,l()};r()},o=function(e){var n=this,i=e,t=$(window),o=function(){t.on({load:function(){s()},scroll:function(){s()}})},s=function(){var e=t.scrollTop(),n=t.height(),o=i.offset().top,s=o-e,a=1-s/n;a>.5&&(i.hasClass("slides_active")||i.addClass("slides_active"))},a=function(){i[0].slides=n,o()};a()},s=function(e){var n=this,i=e,t=$(window),o=$(".site__header"),s=0,a=function(){t.on({load:function(){s=t.width(),c()},resize:function(){s!=t.width()&&(s=t.width()+1,c())}})},d=function(){i[0].obj=n,a()},c=function(){var e=t.height();i.css({"min-height":e-o.innerHeight()-$(".site__main-title").outerHeight(!0)}),i.find(".contact-us").length&&t.width()>=1024?i.css({"min-height":""}):i.css({"min-height":e-o.innerHeight()-$(".site__main-title").outerHeight(!0)})};d()},a=function(e){var n=this,i=e,t=$(window),o=($("html, body"),function(){t.on({load:function(){setTimeout(function(){s()},100)}})}),s=function(){var e=window.location.hash.replace("#","");if(e){var n=$("."+window.location.hash.replace("#",""));n.length&&window.scrollTo(0,parseInt(n.offset().top))}},a=function(){i[0].obj=n,o()};a()}}();
"use strict";!function(){$(function(){$.each($(".product-single__gallery"),function(){new s($(this))})});var s=function(s){var o=s.find(".gallery__top"),l=s.find(".gallery__thumbs"),e=function(){o.slick({slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!0,asNavFor:".gallery__thumbs",responsive:[{breakpoint:768,settings:{fade:!1}}]}),l.slick({slidesToShow:2,slidesToScroll:1,asNavFor:".gallery__top",dots:!1,arrows:!1,focusOnSelect:!0})},i=function(){e()};i()}}();
!function(){$(function(){$(".popup").each(function(){new o($(this))})});var o=function(o){var n,t=this,i=40,p=$(".popup__open"),e=o,c=e.find(".popup__close, .popup__cancel"),s=e.find(".popup__wrap"),u=e.find(".popup__content"),d=$("html"),a=$(window),h=setTimeout(function(){},1),f=function(){a.height()-2*i-s.height()>0?s.css({top:(a.height()-2*i-s.height())/2}):s.css({top:0})},l=function(){var o,n=document.createElement("div");return n.className="popup__scrollbar-measure",document.body.appendChild(n),o=n.offsetWidth-n.clientWidth,document.body.removeChild(n),o},r=function(){e.css({overflowY:"hidden"}),d.css({overflowY:"auto",paddingRight:0}),e.removeClass("popup_opened"),e.addClass("popup_hide"),h=setTimeout(function(){e.css({overflowY:"scroll"}),e.removeClass("popup_hide")},300)},_=function(){e[0].obj=t,v()},v=function(){a.on({load:function(){n=a.width()},resize:function(){f(),a.width()>=1024&&n!=a.width()&&(n=a.width()+1,r())}}),p.on({click:function(){return $(this).hasClass("cookies-info_btn")?a.width()<1024?(w($(this).attr("data-popup")),!1):void 0:(w($(this).attr("data-popup")),!1)}}),s.on({click:function(o){o.stopPropagation()}}),e.on({click:function(){return r(),!1}}),c.on({click:function(){return r(),!1}})},w=function(o){m(o),d.css({overflowY:"hidden",paddingRight:l()}),e.addClass("popup_opened"),f()},m=function(o){var n=u.filter(".popup__"+o);u.css({display:"none"}),n.css({display:"block"})};_()}}();
"use strict";!function(){$(function(){$.each($(".count-product"),function(){new n($(this))})});var n=function(n){var t=this,c=n,i=c.find(".count-product__input"),u=c.find(".count-product_add"),o=c.find(".count-product_del"),e=function(){i.on({keypress:function(){46==event.which&&$(this).val().indexOf(".")==-1||!(event.which<48||event.which>57)||event.preventDefault()}}),i.on({keyup:function(){""==i.val()&&i.val(1)}}),u.on({click:function(){return f(),!1}}),o.on({click:function(){return r(),!1}})},f=function(){var n=parseInt(i.val());i.val(n+1)},r=function(){var n=parseInt(i.val());1!=n&&i.val(n-1)},a=function(){c[0].obj=t,e()};a()}}();
"use strict";!function(){$(function(){$.each($(".my-cart__product"),function(){new t($(this))}),$.each($(".product-single__info"),function(){new n($(this))}),$.each($(".my-cart__promo-code"),function(){new o($(this))})});var t=function(t){var n=this,o=t,e=o.find(".count-product__input"),i=o.find(".count-product__btn"),a=o.find(".my-cart__remove"),c=new XMLHttpRequest,r=$(".cart"),d=$(".my-cart__total"),s=$(window),u=function(){s.on({load:function(){p()},resize:function(){p()}}),e.on({keypress:function(){(46==event.which&&$(this).val().indexOf(".")==-1||!(event.which<48||event.which>57))&&_($(this).parents(".my-cart__product"))}}),i.on({click:function(){_($(this).parents(".my-cart__product"))}}),a.on({click:function(){return l($(this).parents(".my-cart__product")),!1}})},f=function(t){t.addClass("hidden"),setTimeout(function(){t.remove()},500)},l=function(t){c.abort(),c=$.ajax({url:$("body").attr("data-action"),data:{action:"remove_cart_item",id:t.attr("data-product-key"),flag:"remove"},dataType:"json",type:"get",success:function(n){f(t),0==parseInt(n.cartCountProducts)?(r.find("div").remove(),r.removeClass("cart_fill"),$(".site__header").removeClass("site__header_fill-cart")):r.find("div").html(n.cartCountProducts),d.find("span").html(n.subtotal)},error:function(t){"abort"!=t.statusText&&alert("ERROR!!!")}})},_=function(t){c.abort(),c=$.ajax({url:$("body").attr("data-action"),data:{action:"cart_quantity_changes",id:t.attr("data-product-id"),key:t.attr("data-product-key"),countProduct:t.find(".count-product__input").val(),flag:"changeCount"},dataType:"json",type:"get",success:function(n){t.find(".my-cart__total-price").html(n.total),d.find("span").html(n.subtotal)},error:function(t){"abort"!=t.statusText&&alert("ERROR!!!")}})},p=function(){o.each(function(){var t=$(this),n=t.find(">div");t.height(n.outerHeight(!0))})},h=function(){o[0].obj=n,u()};h()},n=function(t){var n=this,o=t,e=o.find(".count-product__input"),i=o.find(".product-single__price"),a=o.find(".product-single__add"),c=new XMLHttpRequest,r=$(".cart"),d=0,s=0,u=($(window),function(){a.on({click:function(t){return a.hasClass("adding")||(f(t),_($(this).parents(".product-single__info")),a.addClass("adding")),!1}})}),f=function(t){var n=$(".gallery__top .slick-current").data("image"),o=t||window.event;o.pageX,o.pageY;$("body").append('<div class="site__product hidden" style="background-image:url('+n+')"></div>'),$(".site__product").css({top:$(".gallery__top").offset().top,left:$(".gallery__top").offset().left,width:$(".gallery__top").width(),height:$(".gallery__top").height()}),setTimeout(function(){$(".site__product").addClass("visible"),$(".site__product").css({top:r.offset().top+r.innerHeight()/2-$(".site__product").height()/2,left:r.offset().left+r.innerWidth()/2-$(".site__product").width()/2})},100),setTimeout(function(){$(".site__product").removeClass("visible"),$(".site__product").css({"-webkit-transform":"scale(0.2)",transform:"scale(0.2)"})},500),setTimeout(function(){$(".site__product").remove(),a.removeClass("adding")},700),l()},l=function(){r.hasClass("cart_fill")?(d=parseInt(r.find("div").text()),s=parseInt(e.val())+d,setTimeout(function(){r.find("div").html(s+" items")},700)):(s=parseInt(e.val()),setTimeout(function(){r.append("<div></div>"),r.addClass("cart_fill"),$(".site__header").addClass("site__header_fill-cart"),setTimeout(function(){1==s?r.find("div").html(s+" item"):r.find("div").html(s+" items")},100)},600))},_=function(t){c.abort(),c=$.ajax({url:$("body").attr("data-action"),data:{action:"single_add_product",id:t.attr("data-id"),countProduct:e.val(),price:i.text(),flag:"addToCart"},dataType:"json",type:"get",success:function(t){parseInt(t.cartCountProducts)!=s&&r.find("div").html(t.cartCountProducts)},error:function(t,n){"abort"!=t.statusText&&parseInt(n.cartCountProducts)!=s&&r.find("div").html(d+"items")}})},p=function(){o[0].obj=n,u()};p()},o=function(t){var n=this,o=t,e=t.find("button"),i=new XMLHttpRequest,a=function(){e.on({click:function(t){return o.find("#promo-code").val()?c(o):console.log("empty code"),!1}})},c=function(t){i.abort(),i=$.ajax({url:$("body").attr("data-action"),data:{action:"apply_coupon_to_order",coupon_name:t.find("#promo-code").val()},dataType:"json",type:"get",success:function(t){console.log(t)},error:function(t,n){"abort"!=t.statusText&&console.log("error")}})},r=function(){o[0].obj=n,a()};r()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5tYWluLmpzIiwianF1ZXJ5LnNpbmdsZS1wcm9kdWN0LmpzIiwianF1ZXJ5LnBvcHVwLmpzIiwianF1ZXJ5Lm51bWJlci1zcGlubmVyLmpzIiwianF1ZXJ5LmFqYXgtY2FydC5qcyJdLCJuYW1lcyI6WyJnbG9iYWxTY3JvbGxGbGFnIiwiJCIsIlByZWxvYWRlciIsImVhY2giLCJNZW51IiwidGhpcyIsIlNjcm9sbFBhbmVsIiwiU2xpZGVzIiwiRnVsbEhlaWdodCIsIlNjcm9sbFRvSGFzaCIsIm9iaiIsIl9zZWxmIiwiX3dpbmRvdyIsIndpbmRvdyIsIl9wcmVsb2FkZXIiLCJfYm9keSIsIl9hZGRFdmVudHMiLCJvbiIsImxvYWQiLCJfc2hvd1NpdGUiLCJfaW5pdCIsInByZWxvYWRlciIsImFkZENsYXNzIiwic2V0VGltZW91dCIsInJlbW92ZSIsIl9vYmoiLCJfaHRtbCIsIl9tZW51IiwiZmluZCIsIl9hY3Rpb24iLCJfYWN0aW9uMiIsIl9mbGFnSGlkZSIsImxhc3RTY3JvbGxUb3AiLCJfc2hvd01lbnVCdG4iLCJfZ2xvYmFsV2lkdGgiLCJ3aWR0aCIsInJlc2l6ZSIsInNjcm9sbFRvcCIsIl9jbG9zZU1lbnUiLCJzY3JvbGwiLCJpbm5lckhlaWdodCIsInJlbW92ZUNsYXNzIiwiaGFzQ2xhc3MiLCJET01Nb3VzZVNjcm9sbCIsImUiLCJkZWx0YSIsIm9yaWdpbmFsRXZlbnQiLCJkZXRhaWwiLCJkaXJlY3Rpb24iLCJfY2hlY2tTY3JvbGwiLCJtb3VzZXdoZWVsIiwid2hlZWxEZWx0YSIsImV2ZW50Iiwic3QiLCJjbGljayIsIl9vcGVuTWVudSIsImVsZW0iLCJjc3MiLCJvdmVyZmxvd1kiLCJfbGlua3MiLCJfZG9tIiwiX2hlYWRlciIsImN1ckl0ZW0iLCJuZXdDbGFzcyIsImF0dHIiLCJuZXh0SXRlbVRvcCIsIm9mZnNldCIsInRvcCIsInN0b3AiLCJhbmltYXRlIiwiZHVyYXRpb24iLCJwcm9ncmVzcyIsImNvbXBsZXRlIiwiY3VyU2Nyb2xsIiwid2luZG93SCIsImhlaWdodCIsInRvcFBvcyIsInRvcEluV2luZG93IiwidmlzaWJsZVBlcmNlbnQiLCJzbGlkZXMiLCJfc2V0SGVpZ2h0IiwibWluLWhlaWdodCIsIm91dGVySGVpZ2h0IiwibGVuZ3RoIiwiX3Njcm9sbFRvIiwiaGFzaCIsImxvY2F0aW9uIiwicmVwbGFjZSIsInNjcm9sbFRvIiwicGFyc2VJbnQiLCJTd2lwZXJHYWxsZXJ5IiwiX2dhbGxlcnlUb3AiLCJfZ2FsbGVyeVRodW1icyIsIl9pbml0U2xpY2siLCJzbGljayIsInNsaWRlc1RvU2hvdyIsInNsaWRlc1RvU2Nyb2xsIiwiYXJyb3dzIiwiZmFkZSIsImFzTmF2Rm9yIiwicmVzcG9uc2l2ZSIsImJyZWFrcG9pbnQiLCJzZXR0aW5ncyIsImRvdHMiLCJmb2N1c09uU2VsZWN0IiwiUG9wdXAiLCJfcG9wdXBQYWRkaW5nIiwiX2J0blNob3ciLCJfYnRuQ2xvc2UiLCJfd3JhcCIsIl9jb250ZW50cyIsIl9zY3JvbGxDb250ZWluZXIiLCJfdGltZXIiLCJfY2VudGVyV3JhcCIsIl9nZXRTY3JvbGxXaWR0aCIsInNjcm9sbEJhcldpZHRoIiwic2Nyb2xsRGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYm9keSIsImFwcGVuZENoaWxkIiwib2Zmc2V0V2lkdGgiLCJjbGllbnRXaWR0aCIsInJlbW92ZUNoaWxkIiwiX2hpZGUiLCJwYWRkaW5nUmlnaHQiLCJfb25FdmVudHMiLCJfc2hvdyIsInN0b3BQcm9wYWdhdGlvbiIsIl9zZXRQb3B1cENvbnRlbnQiLCJjdXJDb250ZW50IiwiZmlsdGVyIiwiZGlzcGxheSIsIlNwaW5uZXIiLCJfaW5wdXQiLCJfYnRuVXAiLCJfYnRuRG93biIsImtleXByZXNzIiwid2hpY2giLCJ2YWwiLCJpbmRleE9mIiwicHJldmVudERlZmF1bHQiLCJrZXl1cCIsIl9hZGRDb3VudCIsIl9yZWR1Y2VDb3VudCIsInZhbHVlIiwiUHJvZHVjdHNJbkNhcnQiLCJBZGRQcm9kdWN0c1RvQ2FydCIsIkFkZENvdXBvblRvQ2FydCIsIl9idG5DaGFuZ2VDb3VudCIsIl9idG5SZW1vdmVQcm9kdWN0IiwiX3JlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsIl9jYXJ0IiwiX3RvdGFsUHJpY2UiLCJfcmVxdWVzdENvdW50Q2hhbmdlIiwicGFyZW50cyIsIl9yZXF1ZXN0UHJvZHVjdFJlbW92ZSIsIl9yZW1vdmVQcm9kdWN0IiwiYWJvcnQiLCJhamF4IiwidXJsIiwiZGF0YSIsImFjdGlvbiIsImlkIiwiZmxhZyIsImRhdGFUeXBlIiwidHlwZSIsInN1Y2Nlc3MiLCJtIiwiY2FydENvdW50UHJvZHVjdHMiLCJodG1sIiwic3VidG90YWwiLCJlcnJvciIsInN0YXR1c1RleHQiLCJhbGVydCIsImtleSIsImNvdW50UHJvZHVjdCIsInRvdGFsIiwiY2hpbGRyZW4iLCJfcHJpY2UiLCJfYWRkVG9DYXJ0QnRuIiwib2xkQ291bnQiLCJuZXdDb3VudCIsIl9hbmltYXRlZEFkZGluZyIsIl9yZXF1ZXN0UHJvZHVjdEFkZFRvQ2FydCIsInBpYyIsInBhZ2VYIiwicGFnZVkiLCJhcHBlbmQiLCJsZWZ0IiwiaW5uZXJXaWR0aCIsIi13ZWJraXQtdHJhbnNmb3JtIiwidHJhbnNmb3JtIiwiX3dyaXRlSW5DYXJ0IiwidGV4dCIsInByaWNlIiwiX2FwcGx5QnV0dG9uIiwiY29uc29sZSIsImxvZyIsImNvdXBvbl9uYW1lIl0sIm1hcHBpbmdzIjoiQUFBQSxjQUNBLFdBRUksR0FBSUEsSUFBbUIsQ0FFdkJDLEdBQUcsV0FFQyxHQUFJQyxHQUFXRCxFQUFFLGVBRWpCQSxFQUFFRSxLQUFNRixFQUFHLGlCQUFtQixXQUUxQixHQUFJRyxHQUFPSCxFQUFHSSxTQUlsQkosRUFBRUUsS0FBTUYsRUFBRSxlQUFnQixXQUV0QixHQUFJSyxHQUFhTCxFQUFFSSxTQUl2QkosRUFBRUUsS0FBTUYsRUFBRSxXQUFZLFdBRWxCLEdBQUlNLEdBQVFOLEVBQUVJLFNBSWxCSixFQUFFRSxLQUFNRixFQUFFLHVCQUF3QixXQUU5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QUNkSyxJQVFSSSIsImZpbGUiOiJzaW5nbGUtcHJvZHVjdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbiggZnVuY3Rpb24oKXtcblxuICAgIHZhciBnbG9iYWxTY3JvbGxGbGFnID0gdHJ1ZTtcblxuICAgICQoIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBuZXcgUHJlbG9hZGVyKCAkKCcucHJlbG9hZGVyJykgKTtcblxuICAgICAgICAkLmVhY2goICQoICcuc2l0ZV9faGVhZGVyJyApLCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgbmV3IE1lbnUgKCAkKCB0aGlzICkgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICAgICAgJC5lYWNoKCAkKCdbZGF0YS1ocmVmXScpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBTY3JvbGxQYW5lbCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5zbGlkZXMnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgU2xpZGVzKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnLnNpdGVfX2NvbnRlbnQtZnVsbCcpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBGdWxsSGVpZ2h0KCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnLnNpdGVfaW5kZXgnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgU2Nyb2xsVG9IYXNoKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgfSApO1xuXG4gICAgdmFyIFByZWxvYWRlciA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyApLFxuICAgICAgICAgICAgX3ByZWxvYWRlciA9IG9iaixcbiAgICAgICAgICAgIF9ib2R5ID0gJCgnYm9keScpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICBsb2FkOiBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfc2hvd1NpdGUoKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfYm9keVswXS5wcmVsb2FkZXIgPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2hvd1NpdGUgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF9wcmVsb2FkZXIuYWRkQ2xhc3MoICdwcmVsb2FkZXJfbG9hZGVkJyApO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBfcHJlbG9hZGVyLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuc2l0ZScpLmFkZENsYXNzKCAnc2l0ZV9fbG9hZGVkJyApO1xuXG4gICAgICAgICAgICAgICAgfSw1MDApO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xuXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIE1lbnUgPSBmdW5jdGlvbiggb2JqICkge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KSxcbiAgICAgICAgICAgIF9odG1sID0gJCgnaHRtbCcpLFxuICAgICAgICAgICAgX21lbnUgPSBfb2JqLmZpbmQoJy5zaXRlX19tZW51JyksXG4gICAgICAgICAgICBfY29udGVudCA9ICQoJy5zaXRlX19jb250ZW50JyksXG4gICAgICAgICAgICBfYWN0aW9uID0gZmFsc2UsXG4gICAgICAgICAgICBfYWN0aW9uMiA9IGZhbHNlLFxuICAgICAgICAgICAgX2ZsYWdIaWRlID0gdHJ1ZSxcbiAgICAgICAgICAgIGxhc3RTY3JvbGxUb3AgPSAwLFxuICAgICAgICAgICAgX3Nob3dNZW51QnRuID0gX29iai5maW5kKCcuc2l0ZV9fbWVudS1idG4nKSxcbiAgICAgICAgICAgIF9nbG9iYWxXaWR0aCA9IDA7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfZ2xvYmFsV2lkdGggPSBfd2luZG93LndpZHRoKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfZ2xvYmFsV2lkdGggIT0gX3dpbmRvdy53aWR0aCgpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2dsb2JhbFdpZHRoID0gX3dpbmRvdy53aWR0aCgpICsgMTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSAxMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9tZW51LnNjcm9sbFRvcCgwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Nsb3NlTWVudSggX3Nob3dNZW51QnRuICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAnc2Nyb2xsJzogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfYWN0aW9uID0gX3dpbmRvdy5zY3JvbGxUb3AoKSA+PSBfb2JqLmlubmVySGVpZ2h0KCkgKiAyO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy5zY3JvbGxUb3AoKSA+PSBfb2JqLmlubmVySGVpZ2h0KCkrIDIwICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9mbGFnSGlkZSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZmxhZ0hpZGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3NpdGVfX2hlYWRlcl9oaWRlJyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZmxhZ0hpZGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZScgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfYWN0aW9uICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9vYmouaGFzQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZScgKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3NpdGVfX2hlYWRlcl9maXhlZCcgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZScgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBfd2luZG93LnNjcm9sbFRvcCgpIDw9IF9vYmouaW5uZXJIZWlnaHQoKSAqIDMgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAnc2l0ZV9faGVhZGVyX2ZpeGVkJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZGVuJyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LnNjcm9sbFRvcCgpIDw9IDEwICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3NpdGVfX2hlYWRlcl9maXhlZCcgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGRlbicgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICdET01Nb3VzZVNjcm9sbCc6IGZ1bmN0aW9uICggZSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gZS5vcmlnaW5hbEV2ZW50LmRldGFpbDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBkZWx0YSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAoIGRlbHRhID4gMCApID8gMSA6IC0xO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCBkaXJlY3Rpb24gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGRpcmVjdGlvbiA8IDAgICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FjdGlvbjIgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FjdGlvbjIgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMCApXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICdtb3VzZXdoZWVsJzogZnVuY3Rpb24gKCBlICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBlLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBkZWx0YSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAoIGRlbHRhID4gMCApID8gLTEgOiAxO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCBkaXJlY3Rpb24gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGRpcmVjdGlvbiA8IDAgICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FjdGlvbjIgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FjdGlvbjIgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMCApXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKGV2ZW50KXtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgc3QgPSAkKHRoaXMpLnNjcm9sbFRvcCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdCA+IGxhc3RTY3JvbGxUb3Ape1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoIDEgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IDFcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoIC0xICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAtMVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGFzdFNjcm9sbFRvcCA9IHN0O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICggZGlyZWN0aW9uIDwgMCAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9hY3Rpb24yID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hY3Rpb24yID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMCApXG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgX3Nob3dNZW51QnRuLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoICQoIHRoaXMgKS5oYXNDbGFzcyggJ29wZW5lZCcgKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jbG9zZU1lbnUoICQoIHRoaXMgKSApXG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vcGVuTWVudSggJCggdGhpcyApICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2hlY2tTY3JvbGwgPSBmdW5jdGlvbiggZGlyZWN0aW9uICkge1xuXG4gICAgICAgICAgICAgICAgaWYoIGRpcmVjdGlvbiA+IDAgJiYgIV9vYmouaGFzQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZGVuJyApICYmICFfc2hvd01lbnVCdG4uaGFzQ2xhc3MoICdvcGVuZWQnICkgJiYgX2FjdGlvbiAmJiAhX2FjdGlvbjIgKXtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGRlbicgKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKCBkaXJlY3Rpb24gPCAwICYmIF9vYmouaGFzQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZGVuJyApICYmICFfc2hvd01lbnVCdG4uaGFzQ2xhc3MoICdvcGVuZWQnICkgICYmIF9hY3Rpb24gJiYgX2FjdGlvbjIgJiYgZ2xvYmFsU2Nyb2xsRmxhZyApe1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoJ3NpdGVfX2hlYWRlcl9oaWRkZW4nKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jbG9zZU1lbnUgPSBmdW5jdGlvbiggZWxlbSApIHtcblxuICAgICAgICAgICAgICAgIF9odG1sLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJ1xuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIGVsZW0ucmVtb3ZlQ2xhc3MoICdvcGVuZWQnICk7XG4gICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ29wZW5lZC1tZW51JyApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfb2JqWyAwIF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vcGVuTWVudSA9IGZ1bmN0aW9uKCBlbGVtICkgIHtcblxuICAgICAgICAgICAgICAgIGVsZW0uYWRkQ2xhc3MoICdvcGVuZWQnICk7XG4gICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ29wZW5lZC1tZW51JyApO1xuXG4gICAgICAgICAgICAgICAgX2h0bWwuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2hpZGRlbidcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIFNjcm9sbFBhbmVsID0gZnVuY3Rpb24gKCBvYmogKSB7XG5cbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfbGlua3MgPSBfb2JqLFxuICAgICAgICAgICAgX2h0bWwgPSAkKCdodG1sJyksXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpLFxuICAgICAgICAgICAgX2RvbSA9ICAkKCAnaHRtbCwgYm9keScpLFxuICAgICAgICAgICAgX2hlYWRlciA9ICQoJy5zaXRlX19oZWFkZXInKSxcbiAgICAgICAgICAgIF9wb3B1cCA9ICQoJy5wb3B1cF9fY29va2llcy1pbmZvJyk7XG5cbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL19jaGFuZ2VBY3RpdmUoKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAnc2Nyb2xsJzogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL19jaGFuZ2VBY3RpdmUoKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX2xpbmtzLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKCB0aGlzICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q2xhc3MgPSBjdXJJdGVtLmF0dHIoJ2RhdGEtaHJlZicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRJdGVtVG9wID0gJCggJy4nICsgbmV3Q2xhc3MgICkub2Zmc2V0KCkudG9wIC0gX2hlYWRlci5pbm5lckhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfbGlua3MucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5hZGRDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRJdGVtVG9wID0gJCggJy4nICsgbmV3Q2xhc3MgICkub2Zmc2V0KCkudG9wO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9kb20uc3RvcCggdHJ1ZSwgZmFsc2UgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kb20uYW5pbWF0ZSgge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogbmV4dEl0ZW1Ub3BcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsU2Nyb2xsRmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLmFkZENsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGRlbicgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxTY3JvbGxGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDIwMCApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsU2Nyb2xsRmxhZyA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2h0bWwuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2hlYWRlci5maW5kKCcuc2l0ZV9fbWVudS1idG4nKS5yZW1vdmVDbGFzcyggJ29wZW5lZCcgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9oZWFkZXIucmVtb3ZlQ2xhc3MoICdvcGVuZWQtbWVudScgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2hhbmdlQWN0aXZlID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbFRvcCA9ICQod2luZG93KS5zY3JvbGxUb3AoKSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbSA9ICQoJ2JvZHknKS5maW5kKCdbZGF0YS1zY3JvbGw9XCJzY3JvbGxcIl0nKSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbVBvcyA9IGl0ZW0ub2Zmc2V0KCkudG9wO1xuXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGl0ZW0ubGVuZ3RoOyBpKysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ciA9ICQoaXRlbVtpXSksXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtQ3VyID0gJChpdGVtW2ldKS5vZmZzZXQoKS50b3AgLSBfaGVhZGVyLm91dGVySGVpZ2h0KHRydWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUhlaWdodCA9ICQoaXRlbVtpXSkub3V0ZXJIZWlnaHQodHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIHNjcm9sbFRvcCA+IGl0ZW1DdXIgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJDbGFzcyA9IGN1ci5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyTGluayA9IF9saW5rcy5maWx0ZXIoXCJbZGF0YS1ocmVmPVwiK2N1ckNsYXNzWzBdK1wiXVwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2xpbmtzLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckxpbmsuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYoIHNjcm9sbFRvcCA+ICggaXRlbUN1ciArIGl0ZW1IZWlnaHQgKSApe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfbGlua3MucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICAvL19jaGFuZ2VBY3RpdmUoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIFNsaWRlcyA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbih7XG4gICAgICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2hlY2tTY3JvbGwgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgdmFyIGN1clNjcm9sbCA9IF93aW5kb3cuc2Nyb2xsVG9wKCksXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvd0ggPSBfd2luZG93LmhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICB0b3BQb3MgPSBfb2JqLm9mZnNldCgpLnRvcCxcbiAgICAgICAgICAgICAgICAgICAgdG9wSW5XaW5kb3cgPSB0b3BQb3MtY3VyU2Nyb2xsLFxuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlUGVyY2VudCA9IDEtKHRvcEluV2luZG93L3dpbmRvd0gpO1xuXG4gICAgICAgICAgICAgICAgaWYoIHZpc2libGVQZXJjZW50ID4gLjUgKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoICFfb2JqLmhhc0NsYXNzKCdzbGlkZXNfYWN0aXZlJykgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoJ3NsaWRlc19hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9vYmpbMF0uc2xpZGVzID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgRnVsbEhlaWdodCA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICBfaGVhZGVyID0gJCgnLnNpdGVfX2hlYWRlcicpLFxuICAgICAgICAgICAgX2dsb2JhbFdpZHRoID0gMDtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICBsb2FkOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9nbG9iYWxXaWR0aCA9IF93aW5kb3cud2lkdGgoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRIZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9nbG9iYWxXaWR0aCAhPSBfd2luZG93LndpZHRoKCkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZ2xvYmFsV2lkdGggPSBfd2luZG93LndpZHRoKCkgKyAxO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NldEhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0SGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gX3dpbmRvdy5oZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICdtaW4taGVpZ2h0JzogaGVpZ2h0IC0gX2hlYWRlci5pbm5lckhlaWdodCgpIC0gJCgnLnNpdGVfX21haW4tdGl0bGUnKS5vdXRlckhlaWdodCh0cnVlKVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIGlmKCBfb2JqLmZpbmQoJy5jb250YWN0LXVzJykubGVuZ3RoICkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6IGhlaWdodCAtIF9oZWFkZXIuaW5uZXJIZWlnaHQoKSAtICQoJy5zaXRlX19tYWluLXRpdGxlJykub3V0ZXJIZWlnaHQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6IGhlaWdodCAtIF9oZWFkZXIuaW5uZXJIZWlnaHQoKSAtICQoJy5zaXRlX19tYWluLXRpdGxlJykub3V0ZXJIZWlnaHQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBTY3JvbGxUb0hhc2ggPSBmdW5jdGlvbiAoIG9iaiApIHtcblxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICBfZG9tID0gICQoJ2h0bWwsIGJvZHknKTtcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zY3JvbGxUbygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDAgKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2Nyb2xsVG8gPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIHZhciBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2gucmVwbGFjZSgnIycsICcnKTtcblxuICAgICAgICAgICAgICAgIGlmKCBoYXNoICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtID0gJCggJy4nICsgd2luZG93LmxvY2F0aW9uLmhhc2gucmVwbGFjZSgnIycsICcnKSApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBlbGVtLmxlbmd0aCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKCAwLCBwYXJzZUludCggZWxlbS5vZmZzZXQoKS50b3AgKSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxufSApKCk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG4oIGZ1bmN0aW9uKCl7XG5cbiAgICAkKCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcucHJvZHVjdC1zaW5nbGVfX2dhbGxlcnknICksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IFN3aXBlckdhbGxlcnkoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICB9ICk7XG5cbiAgICB2YXIgU3dpcGVyR2FsbGVyeSA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX2dhbGxlcnlUb3AgPSBvYmouZmluZCgnLmdhbGxlcnlfX3RvcCcpLFxuICAgICAgICAgICAgX2dhbGxlcnlUaHVtYnMgPSBvYmouZmluZCgnLmdhbGxlcnlfX3RodW1icycpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfaW5pdFNsaWNrID0gZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgIF9nYWxsZXJ5VG9wLnNsaWNrKCB7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gICAgICAgICAgICAgICAgICAgIGFycm93czogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGZhZGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGFzTmF2Rm9yOiAnLmdhbGxlcnlfX3RodW1icycsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNpdmU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50OiA3NjgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFkZTogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfZ2FsbGVyeVRodW1icy5zbGljaygge1xuICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDIsXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxuICAgICAgICAgICAgICAgICAgICBhc05hdkZvcjogJy5nYWxsZXJ5X190b3AnLFxuICAgICAgICAgICAgICAgICAgICBkb3RzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgYXJyb3dzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZm9jdXNPblNlbGVjdDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9pbml0U2xpY2soKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG59ICkoKTsiLCIoIGZ1bmN0aW9uKCl7XG5cbiAgICAkKCBmdW5jdGlvbigpe1xuXG4gICAgICAgICQoICcucG9wdXAnICkuZWFjaChmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICBuZXcgUG9wdXAoJCh0aGlzKSk7XG5cbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIHZhciBQb3B1cCA9IGZ1bmN0aW9uKCBvYmogKXtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX3BvcHVwUGFkZGluZyA9IDQwLFxuICAgICAgICAgICAgX2J0blNob3cgPSAgJCggJy5wb3B1cF9fb3BlbicgKSxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfYnRuQ2xvc2UgPSBfb2JqLmZpbmQoICcucG9wdXBfX2Nsb3NlLCAucG9wdXBfX2NhbmNlbCcgKSxcbiAgICAgICAgICAgIF93cmFwID0gX29iai5maW5kKCAnLnBvcHVwX193cmFwJyApLFxuICAgICAgICAgICAgX2NvbnRlbnRzID0gX29iai5maW5kKCAnLnBvcHVwX19jb250ZW50JyApLFxuICAgICAgICAgICAgX3Njcm9sbENvbnRlaW5lciA9ICQoICdodG1sJyApLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyApLFxuICAgICAgICAgICAgX2dsb2JhbFdpZHRoLFxuICAgICAgICAgICAgX3RpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKXt9LCAxICk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9jZW50ZXJXcmFwID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBpZiAoIF93aW5kb3cuaGVpZ2h0KCkgLSAoIF9wb3B1cFBhZGRpbmcgKiAyICkgLSBfd3JhcC5oZWlnaHQoKSA+IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgIF93cmFwLmNzcyggeyB0b3A6ICggKCBfd2luZG93LmhlaWdodCgpIC0gKCBfcG9wdXBQYWRkaW5nICogMiApICkgLSBfd3JhcC5oZWlnaHQoKSApIC8gMiB9ICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX3dyYXAuY3NzKCB7IHRvcDogMCB9ICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9nZXRTY3JvbGxXaWR0aCA9IGZ1bmN0aW9uICgpe1xuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyksXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbEJhcldpZHRoO1xuXG4gICAgICAgICAgICAgICAgc2Nyb2xsRGl2LmNsYXNzTmFtZSA9ICdwb3B1cF9fc2Nyb2xsYmFyLW1lYXN1cmUnO1xuXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCggc2Nyb2xsRGl2ICk7XG5cbiAgICAgICAgICAgICAgICBzY3JvbGxCYXJXaWR0aCA9IHNjcm9sbERpdi5vZmZzZXRXaWR0aCAtIHNjcm9sbERpdi5jbGllbnRXaWR0aDtcblxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2Nyb2xsRGl2KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxCYXJXaWR0aDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaGlkZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX29iai5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnaGlkZGVuJ1xuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJyxcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiAwXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3BvcHVwX29wZW5lZCcgKTtcbiAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAncG9wdXBfaGlkZScgKTtcblxuICAgICAgICAgICAgICAgIF90aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5jc3MgKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ3Njcm9sbCdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3BvcHVwX2hpZGUnICk7XG4gICAgICAgICAgICAgICAgfSwgMzAwICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9vbkV2ZW50cygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbkV2ZW50cyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICBsb2FkOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9nbG9iYWxXaWR0aCA9IF93aW5kb3cud2lkdGgoKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2VudGVyV3JhcCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDEwMjQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX2dsb2JhbFdpZHRoICE9IF93aW5kb3cud2lkdGgoKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZ2xvYmFsV2lkdGggPSBfd2luZG93LndpZHRoKCkgKyAxO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9idG5TaG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggJCh0aGlzKS5oYXNDbGFzcygnY29va2llcy1pbmZvX2J0bicpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA8IDEwMjQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3Nob3coICQoIHRoaXMgKS5hdHRyKCAnZGF0YS1wb3B1cCcgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2hvdyggJCggdGhpcyApLmF0dHIoICdkYXRhLXBvcHVwJyApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfd3JhcC5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oIGUgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX29iai5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX2J0bkNsb3NlLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2hvdyA9IGZ1bmN0aW9uKCBjbGFzc05hbWUgKXtcbiAgICAgICAgICAgICAgICBfc2V0UG9wdXBDb250ZW50KCBjbGFzc05hbWUgKTtcblxuICAgICAgICAgICAgICAgIF9zY3JvbGxDb250ZWluZXIuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2hpZGRlbicsXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogX2dldFNjcm9sbFdpZHRoKClcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3BvcHVwX29wZW5lZCcgKTtcbiAgICAgICAgICAgICAgICBfY2VudGVyV3JhcCgpO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3NldFBvcHVwQ29udGVudCA9IGZ1bmN0aW9uKCBjbGFzc05hbWUgKXtcbiAgICAgICAgICAgICAgICB2YXIgY3VyQ29udGVudCA9IF9jb250ZW50cy5maWx0ZXIoICcucG9wdXBfXycgKyBjbGFzc05hbWUgKTtcblxuICAgICAgICAgICAgICAgIF9jb250ZW50cy5jc3MoIHsgZGlzcGxheTogJ25vbmUnIH0gKTtcbiAgICAgICAgICAgICAgICBjdXJDb250ZW50LmNzcyggeyBkaXNwbGF5OiAnYmxvY2snIH0gKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxufSApKCk7XG5cbiIsIlwidXNlIHN0cmljdFwiO1xuKCBmdW5jdGlvbigpe1xuXG4gICAgJCggZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICQuZWFjaCggJCgnLmNvdW50LXByb2R1Y3QnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgU3Bpbm5lciggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgIH0gKTtcblxuICAgIHZhciBTcGlubmVyID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2lucHV0ID0gX29iai5maW5kKCcuY291bnQtcHJvZHVjdF9faW5wdXQnKSxcbiAgICAgICAgICAgIF9idG5VcCA9IF9vYmouZmluZCgnLmNvdW50LXByb2R1Y3RfYWRkJyksXG4gICAgICAgICAgICBfYnRuRG93biA9IF9vYmouZmluZCgnLmNvdW50LXByb2R1Y3RfZGVsJyk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfaW5wdXQub24oIHtcbiAgICAgICAgICAgICAgICAgICAga2V5cHJlc3M6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAoIGV2ZW50LndoaWNoICE9IDQ2IHx8ICQoIHRoaXMgKS52YWwoKS5pbmRleE9mKCAnLicgKSAhPSAtMSApICYmICggZXZlbnQud2hpY2ggPCA0OCB8fCBldmVudC53aGljaCA+IDU3ICkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX2lucHV0Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGtleXVwOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfaW5wdXQudmFsKCkgPT0gJycgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaW5wdXQudmFsKCAxICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX2J0blVwLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9hZGRDb3VudCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF9idG5Eb3duLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWR1Y2VDb3VudCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hZGRDb3VudCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcGFyc2VJbnQoIF9pbnB1dC52YWwoKSApO1xuXG4gICAgICAgICAgICAgICAgX2lucHV0LnZhbCggdmFsdWUgKyAxICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfcmVkdWNlQ291bnQgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcGFyc2VJbnQoIF9pbnB1dC52YWwoKSApO1xuXG4gICAgICAgICAgICAgICAgaWYoIHZhbHVlICE9IDEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX2lucHV0LnZhbCggdmFsdWUgLSAxICk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxufSApKCk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG4oIGZ1bmN0aW9uKCl7XG5cbiAgICAkKCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcubXktY2FydF9fcHJvZHVjdCcpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBQcm9kdWN0c0luQ2FydCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5wcm9kdWN0LXNpbmdsZV9faW5mbycpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBBZGRQcm9kdWN0c1RvQ2FydCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5teS1jYXJ0X19wcm9tby1jb2RlJyksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IEFkZENvdXBvblRvQ2FydCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgIH0gKTtcblxuICAgIHZhciBQcm9kdWN0c0luQ2FydCA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9pbnB1dCA9IF9vYmouZmluZCgnLmNvdW50LXByb2R1Y3RfX2lucHV0JyksXG4gICAgICAgICAgICBfYnRuQ2hhbmdlQ291bnQgPSBfb2JqLmZpbmQoJy5jb3VudC1wcm9kdWN0X19idG4nKSxcbiAgICAgICAgICAgIF9idG5SZW1vdmVQcm9kdWN0ID0gX29iai5maW5kKCcubXktY2FydF9fcmVtb3ZlJyksXG4gICAgICAgICAgICBfcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxuICAgICAgICAgICAgX2NhcnQgPSAkKCcuY2FydCcpLFxuICAgICAgICAgICAgX3RvdGFsUHJpY2UgPSAkKCcubXktY2FydF9fdG90YWwnKSxcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfc2V0SGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRIZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX2lucHV0Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGtleXByZXNzOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggISgoIGV2ZW50LndoaWNoICE9IDQ2IHx8ICQoIHRoaXMgKS52YWwoKS5pbmRleE9mKCAnLicgKSAhPSAtMSApICYmICggZXZlbnQud2hpY2ggPCA0OCB8fCBldmVudC53aGljaCA+IDU3ICkpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlcXVlc3RDb3VudENoYW5nZSggJCh0aGlzKS5wYXJlbnRzKCcubXktY2FydF9fcHJvZHVjdCcpICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX2J0bkNoYW5nZUNvdW50Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZXF1ZXN0Q291bnRDaGFuZ2UoICQodGhpcykucGFyZW50cygnLm15LWNhcnRfX3Byb2R1Y3QnKSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfYnRuUmVtb3ZlUHJvZHVjdC5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVxdWVzdFByb2R1Y3RSZW1vdmUoICQodGhpcykucGFyZW50cygnLm15LWNhcnRfX3Byb2R1Y3QnKSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9yZW1vdmVQcm9kdWN0ID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cbiAgICAgICAgICAgICAgICBlbGVtLmFkZENsYXNzKCdoaWRkZW4nKTtcblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGVsZW0ucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgICAgICB9LCA1MDAgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9yZXF1ZXN0UHJvZHVjdFJlbW92ZSA9IGZ1bmN0aW9uICggZWxlbSApIHtcblxuICAgICAgICAgICAgICAgIF9yZXF1ZXN0LmFib3J0KCk7XG4gICAgICAgICAgICAgICAgX3JlcXVlc3QgPSAkLmFqYXgoIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAkKCdib2R5JykuYXR0cignZGF0YS1hY3Rpb24nKSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAncmVtb3ZlX2NhcnRfaXRlbScsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogZWxlbS5hdHRyKCdkYXRhLXByb2R1Y3Qta2V5JyksXG4gICAgICAgICAgICAgICAgICAgICAgICBmbGFnOiAncmVtb3ZlJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImdldFwiLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAobSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVtb3ZlUHJvZHVjdCggZWxlbSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggcGFyc2VJbnQobS5jYXJ0Q291bnRQcm9kdWN0cykgPT0gMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jYXJ0LmZpbmQoJ2RpdicpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jYXJ0LnJlbW92ZUNsYXNzKCdjYXJ0X2ZpbGwnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuc2l0ZV9faGVhZGVyJykucmVtb3ZlQ2xhc3MoJ3NpdGVfX2hlYWRlcl9maWxsLWNhcnQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jYXJ0LmZpbmQoJ2RpdicpLmh0bWwoIG0uY2FydENvdW50UHJvZHVjdHMgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX3RvdGFsUHJpY2UuZmluZCgnc3BhbicpLmh0bWwoIG0uc3VidG90YWwgKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKFhNTEh0dHBSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIFhNTEh0dHBSZXF1ZXN0LnN0YXR1c1RleHQgIT0gXCJhYm9ydFwiICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiRVJST1IhISFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfcmVxdWVzdENvdW50Q2hhbmdlID0gZnVuY3Rpb24gKCBlbGVtICkge1xuXG4gICAgICAgICAgICAgICAgX3JlcXVlc3QuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICBfcmVxdWVzdCA9ICQuYWpheCgge1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICQoJ2JvZHknKS5hdHRyKCdkYXRhLWFjdGlvbicpLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdjYXJ0X3F1YW50aXR5X2NoYW5nZXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW0uYXR0cignZGF0YS1wcm9kdWN0LWlkJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGVsZW0uYXR0cignZGF0YS1wcm9kdWN0LWtleScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRQcm9kdWN0OiBlbGVtLmZpbmQoJy5jb3VudC1wcm9kdWN0X19pbnB1dCcpLnZhbCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhZzogJ2NoYW5nZUNvdW50J1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImdldFwiLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAobSkge1xuICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5maW5kKCcubXktY2FydF9fdG90YWwtcHJpY2UnKS5odG1sKCBtLnRvdGFsICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdG90YWxQcmljZS5maW5kKCdzcGFuJykuaHRtbCggbS5zdWJ0b3RhbCApO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoWE1MSHR0cFJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggWE1MSHR0cFJlcXVlc3Quc3RhdHVzVGV4dCAhPSBcImFib3J0XCIgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJFUlJPUiEhIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRIZWlnaHQgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF9vYmouZWFjaCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW4gPSBjdXJJdGVtLmZpbmQoJz5kaXYnKTtcblxuICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLmhlaWdodCggY2hpbGRyZW4ub3V0ZXJIZWlnaHQodHJ1ZSkgKTtcblxuICAgICAgICAgICAgICAgIH0gKVxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgQWRkUHJvZHVjdHNUb0NhcnQgPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfaW5wdXQgPSBfb2JqLmZpbmQoJy5jb3VudC1wcm9kdWN0X19pbnB1dCcpLFxuICAgICAgICAgICAgX3ByaWNlID0gX29iai5maW5kKCcucHJvZHVjdC1zaW5nbGVfX3ByaWNlJyksXG4gICAgICAgICAgICBfYWRkVG9DYXJ0QnRuID0gX29iai5maW5kKCcucHJvZHVjdC1zaW5nbGVfX2FkZCcpLFxuICAgICAgICAgICAgX3JlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKSxcbiAgICAgICAgICAgIF9jYXJ0ID0gJCgnLmNhcnQnKSxcbiAgICAgICAgICAgIG9sZENvdW50ID0gMCxcbiAgICAgICAgICAgIG5ld0NvdW50ID0gMCxcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfYWRkVG9DYXJ0QnRuLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoIGV2ZW50ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggISggX2FkZFRvQ2FydEJ0bi5oYXNDbGFzcygnYWRkaW5nJykgKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hbmltYXRlZEFkZGluZyggZXZlbnQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVxdWVzdFByb2R1Y3RBZGRUb0NhcnQoICQodGhpcykucGFyZW50cygnLnByb2R1Y3Qtc2luZ2xlX19pbmZvJykgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYWRkVG9DYXJ0QnRuLmFkZENsYXNzKCdhZGRpbmcnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hbmltYXRlZEFkZGluZyA9IGZ1bmN0aW9uKCBldmVudCApIHtcblxuICAgICAgICAgICAgICAgIHZhciBwaWMgPSAkKCcuZ2FsbGVyeV9fdG9wIC5zbGljay1jdXJyZW50JykuZGF0YSgnaW1hZ2UnKSxcblxuICAgICAgICAgICAgICAgIGUgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7XG5cbiAgICAgICAgICAgICAgICB2YXIgcGFnZVggPSBlLnBhZ2VYLFxuICAgICAgICAgICAgICAgICAgICBwYWdlWSA9IGUucGFnZVk7XG5cbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwic2l0ZV9fcHJvZHVjdCBoaWRkZW5cIiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6dXJsKCcrIHBpYyArJylcIj48L2Rpdj4nKTtcbiAgICAgICAgICAgICAgICAkKCcuc2l0ZV9fcHJvZHVjdCcpLmNzcygge1xuICAgICAgICAgICAgICAgICAgICB0b3A6ICQoJy5nYWxsZXJ5X190b3AnKS5vZmZzZXQoKS50b3AgLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiAkKCcuZ2FsbGVyeV9fdG9wJykub2Zmc2V0KCkubGVmdCxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICQoJy5nYWxsZXJ5X190b3AnKS53aWR0aCgpLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICQoJy5nYWxsZXJ5X190b3AnKS5oZWlnaHQoKVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICQoJy5zaXRlX19wcm9kdWN0JykuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNpdGVfX3Byb2R1Y3QnKS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogX2NhcnQub2Zmc2V0KCkudG9wICsgX2NhcnQuaW5uZXJIZWlnaHQoKS8yIC0gJCgnLnNpdGVfX3Byb2R1Y3QnKS5oZWlnaHQoKS8yICxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IF9jYXJ0Lm9mZnNldCgpLmxlZnQgKyBfY2FydC5pbm5lcldpZHRoKCkvMiAtICQoJy5zaXRlX19wcm9kdWN0Jykud2lkdGgoKS8yXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIH0sIDEwMCApO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgJCgnLnNpdGVfX3Byb2R1Y3QnKS5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuc2l0ZV9fcHJvZHVjdCcpLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3NjYWxlKDAuMiknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICdzY2FsZSgwLjIpJ1xuICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICB9LCA1MDAgKTtcblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG5cbiAgICAgICAgICAgICAgICAgICAgJCgnLnNpdGVfX3Byb2R1Y3QnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgX2FkZFRvQ2FydEJ0bi5yZW1vdmVDbGFzcygnYWRkaW5nJyk7XG5cbiAgICAgICAgICAgICAgICB9LCA3MDAgKTtcblxuXG4gICAgICAgICAgICAgICAgX3dyaXRlSW5DYXJ0KCk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfd3JpdGVJbkNhcnQgPSAgZnVuY3Rpb24oKSB7XG5cblxuICAgICAgICAgICAgICAgIGlmKCAhKCBfY2FydC5oYXNDbGFzcygnY2FydF9maWxsJykgKSApIHtcblxuICAgICAgICAgICAgICAgICAgICBuZXdDb3VudCA9IHBhcnNlSW50KCBfaW5wdXQudmFsKCkgKTtcblxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2NhcnQuYXBwZW5kKCc8ZGl2PjwvZGl2PicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NhcnQuYWRkQ2xhc3MoJ2NhcnRfZmlsbCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnNpdGVfX2hlYWRlcicpLmFkZENsYXNzKCdzaXRlX19oZWFkZXJfZmlsbC1jYXJ0Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIG5ld0NvdW50ID09IDEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NhcnQuZmluZCgnZGl2JykuaHRtbCggbmV3Q291bnQgKyAnIGl0ZW0nKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NhcnQuZmluZCgnZGl2JykuaHRtbCggbmV3Q291bnQgKyAnIGl0ZW1zJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMCApO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sIDYwMCApO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBvbGRDb3VudCA9IHBhcnNlSW50KCBfY2FydC5maW5kKCdkaXYnKS50ZXh0KCkgKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3Q291bnQgPSBwYXJzZUludCggX2lucHV0LnZhbCgpICkgKyBvbGRDb3VudDtcblxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2NhcnQuZmluZCgnZGl2JykuaHRtbCggbmV3Q291bnQgKyAnIGl0ZW1zJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSwgNzAwICk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfcmVxdWVzdFByb2R1Y3RBZGRUb0NhcnQgPSBmdW5jdGlvbiAoIGVsZW0gKSB7XG5cbiAgICAgICAgICAgICAgICBfcmVxdWVzdC5hYm9ydCgpO1xuICAgICAgICAgICAgICAgIF9yZXF1ZXN0ID0gJC5hamF4KCB7XG4gICAgICAgICAgICAgICAgICAgIHVybDogJCgnYm9keScpLmF0dHIoJ2RhdGEtYWN0aW9uJyksXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ3NpbmdsZV9hZGRfcHJvZHVjdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogZWxlbS5hdHRyKCdkYXRhLWlkJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudFByb2R1Y3Q6IF9pbnB1dC52YWwoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlOiBfcHJpY2UudGV4dCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhZzogJ2FkZFRvQ2FydCdcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJnZXRcIixcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBwYXJzZUludCggbS5jYXJ0Q291bnRQcm9kdWN0cyApICE9IG5ld0NvdW50ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NhcnQuZmluZCgnZGl2JykuaHRtbCggbS5jYXJ0Q291bnRQcm9kdWN0cyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCBYTUxIdHRwUmVxdWVzdCwgbSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggWE1MSHR0cFJlcXVlc3Quc3RhdHVzVGV4dCAhPSBcImFib3J0XCIgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHBhcnNlSW50KCBtLmNhcnRDb3VudFByb2R1Y3RzICkgIT0gbmV3Q291bnQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NhcnQuZmluZCgnZGl2JykuaHRtbCggb2xkQ291bnQgKyAnaXRlbXMnICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xuXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIEFkZENvdXBvblRvQ2FydCA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9hcHBseUJ1dHRvbiA9IG9iai5maW5kKCdidXR0b24nKSxcbiAgICAgICAgICAgIF9yZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfYXBwbHlCdXR0b24ub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICggZXZlbnQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKF9vYmouZmluZCgnI3Byb21vLWNvZGUnKS52YWwoKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlcXVlc3RQcm9kdWN0QWRkVG9DYXJ0KCBfb2JqICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlbXB0eSBjb2RlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfcmVxdWVzdFByb2R1Y3RBZGRUb0NhcnQgPSBmdW5jdGlvbiAoIGVsZW0gKSB7XG5cbiAgICAgICAgICAgICAgICBfcmVxdWVzdC5hYm9ydCgpO1xuICAgICAgICAgICAgICAgIF9yZXF1ZXN0ID0gJC5hamF4KCB7XG4gICAgICAgICAgICAgICAgICAgIHVybDogJCgnYm9keScpLmF0dHIoJ2RhdGEtYWN0aW9uJyksXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ2FwcGx5X2NvdXBvbl90b19vcmRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3Vwb25fbmFtZTogZWxlbS5maW5kKCcjcHJvbW8tY29kZScpLnZhbCgpXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChtKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG0pO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoIFhNTEh0dHBSZXF1ZXN0LCBtICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBYTUxIdHRwUmVxdWVzdC5zdGF0dXNUZXh0ICE9IFwiYWJvcnRcIiApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxufSApKCk7Il19
