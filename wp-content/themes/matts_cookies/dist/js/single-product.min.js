"use strict";!function(){var e=!0;$(function(){new i($(".preloader")),$.each($(".site__header"),function(){new n($(this))}),$.each($("[data-href]"),function(){new t($(this))}),$.each($(".slides"),function(){new o($(this))}),$.each($(".site__content-full"),function(){new s($(this))}),$.each($(".site_index"),function(){new a($(this))})});var i=function(e){var i=this,n=$(window),t=e,o=$("body"),s=function(){n.on({load:function(){d()}})},a=function(){o[0].preloader=i,s(),$("html").css({"overflow-y":"hidden"})},d=function(){t.addClass("preloader_loaded"),setTimeout(function(){t.remove(),$("html").css({"overflow-y":"scroll"}),$(".site").addClass("site__loaded")},500)};a()},n=function(i){var n=this,t=i,o=$(window),s=$("html"),a=t.find(".site__menu"),d=($(".site__content"),!1),l=!1,c=!0,r=0,h=t.find(".site__menu-btn"),f=0,u=function(){o.on({load:function(){f=o.width()},resize:function(){f!=o.width()&&(f=o.width()+1,o.width()>=1024&&(a.scrollTop(0),v(h)))},scroll:function(){d=o.scrollTop()>=2*t.innerHeight(),o.scrollTop()>=t.innerHeight()+20?c&&(c=!1,t.addClass("site__header_hide")):(c=!0,t.removeClass("site__header_hide")),d?t.hasClass("site__header_hide")&&setTimeout(function(){t.addClass("site__header_fixed"),t.removeClass("site__header_hide")},100):o.scrollTop()<=3*t.innerHeight()&&(t.removeClass("site__header_fixed"),t.removeClass("site__header_hidden")),o.scrollTop()<=10&&(t.removeClass("site__header_fixed"),t.removeClass("site__header_hidden"))},DOMMouseScroll:function(e){var i=e.originalEvent.detail;if(i){var n=i>0?1:-1;_(n)}n<0?l=!0:setTimeout(function(){l=!1},300)},mousewheel:function(e){var i=e.originalEvent.wheelDelta;if(i){var n=i>0?-1:1;_(n)}n<0?l=!0:setTimeout(function(){l=!1},300)}}),$(window).scroll(function(e){var i=$(this).scrollTop();if(i>r){_(1);var n=1}else{_(-1);var n=-1}r=i,n<0?l=!0:setTimeout(function(){l=!1},300)}),h.on({click:function(){$(this).hasClass("opened")?v($(this)):w($(this))}})},_=function(i){i>0&&!t.hasClass("site__header_hidden")&&!h.hasClass("opened")&&d&&!l&&t.addClass("site__header_hidden"),i<0&&t.hasClass("site__header_hidden")&&!h.hasClass("opened")&&d&&l&&e&&t.removeClass("site__header_hidden")},v=function(e){s.css({overflowY:"auto"}),e.removeClass("opened"),t.removeClass("opened-menu")},m=function(){t[0].obj=n,u()},w=function(e){e.addClass("opened"),t.addClass("opened-menu"),s.css({overflowY:"hidden"})};m()},t=function(i){var n=this,t=i,o=t,s=$("html"),a=$(window),d=$("html, body"),l=$(".site__header"),c=($(".popup__cookies-info"),function(){a.on({resize:function(){r()},scroll:function(){r()}}),o.on({click:function(){var i=$(this),n=i.attr("data-href"),t=$("."+n).offset().top;return $(".site__menu-nav_anchors a").removeClass("active"),i.addClass("active"),d.stop(!0,!1),d.animate({scrollTop:t},{duration:500,progress:function(){e=!1,l.addClass("site__header_hidden")},complete:function(){setTimeout(function(){e=!1},200),setTimeout(function(){e=!0},500)}}),s.css({overflowY:"auto"}),l.find(".site__menu-btn").removeClass("opened"),l.removeClass("opened-menu"),!1}})}),r=function(){for(var e=a.scrollTop(),i=$("body").find('[data-scroll="scroll"]'),n=(i.offset().top,0);n<i.length;n++){var t=$(i[n]),s=$(i[n]).offset().top-l.outerHeight(!0),d=$(i[n]).outerHeight(!0);if(e>s){var c=t.attr("class").split(" "),r=o.filter("[data-href="+c[0]+"]");o.removeClass("active"),r.addClass("active")}e>s+d&&o.removeClass("active")}},h=function(){t[0].obj=n,c()};h()},o=function(e){var i=this,n=e,t=$(window),o=function(){t.on({load:function(){s()},scroll:function(){s()}})},s=function(){var e=t.scrollTop(),i=t.height(),o=n.offset().top,s=o-e,a=1-s/i;a>.5&&(n.hasClass("slides_active")||n.addClass("slides_active"))},a=function(){n[0].slides=i,o()};a()},s=function(e){var i=this,n=e,t=$(window),o=$(".site__header"),s=0,a=function(){t.on({load:function(){s=t.width(),l()},resize:function(){s!=t.width()&&(s=t.width()+1,l())}})},d=function(){n[0].obj=i,a()},l=function(){var e=t.height();n.css({"min-height":e-o.innerHeight()-$(".site__main-title").outerHeight(!0)}),n.find(".contact-us").length&&t.width()>=1024?n.css({"min-height":""}):n.css({"min-height":e-o.innerHeight()-$(".site__main-title").outerHeight(!0)})};d()},a=function(e){var i=this,n=e,t=$(window),o=($("html, body"),function(){t.on({load:function(){setTimeout(function(){s()},100)}})}),s=function(){var e=window.location.hash.replace("#","");if(e){var i=$("."+window.location.hash.replace("#",""));i.length&&window.scrollTo(0,parseInt(i.offset().top)),$(".slides").addClass("slides_active")}},a=function(){n[0].obj=i,o()};a()}}();
"use strict";!function(){$(function(){$.each($(".product-single__gallery"),function(){new s($(this))})});var s=function(s){var o=s.find(".gallery__top"),l=s.find(".gallery__thumbs"),e=function(){o.slick({slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!0,asNavFor:".gallery__thumbs",responsive:[{breakpoint:768,settings:{fade:!1}}]}),l.slick({slidesToShow:2,slidesToScroll:1,asNavFor:".gallery__top",dots:!1,arrows:!1,focusOnSelect:!0})},i=function(){e()};i()}}();
!function(){$(function(){$(".popup").each(function(){new o($(this))})});var o=function(o){var n,t=this,i=40,p=$(".popup__open"),e=o,c=e.find(".popup__close, .popup__cancel"),s=e.find(".popup__wrap"),u=e.find(".popup__content"),d=$("html"),a=$(window),h=setTimeout(function(){},1),f=function(){a.height()-2*i-s.height()>0?s.css({top:(a.height()-2*i-s.height())/2}):s.css({top:0})},l=function(){var o,n=document.createElement("div");return n.className="popup__scrollbar-measure",document.body.appendChild(n),o=n.offsetWidth-n.clientWidth,document.body.removeChild(n),o},r=function(){e.css({overflowY:"hidden"}),d.css({overflowY:"auto",paddingRight:0}),e.removeClass("popup_opened"),e.addClass("popup_hide"),h=setTimeout(function(){e.css({overflowY:"scroll"}),e.removeClass("popup_hide")},300)},_=function(){e[0].obj=t,v()},v=function(){a.on({load:function(){n=a.width()},resize:function(){f(),a.width()>=1024&&n!=a.width()&&(n=a.width()+1,r())}}),p.on({click:function(){return $(this).hasClass("cookies-info_btn")?a.width()<1024?(w($(this).attr("data-popup")),!1):void 0:(w($(this).attr("data-popup")),!1)}}),s.on({click:function(o){o.stopPropagation()}}),e.on({click:function(){return r(),!1}}),c.on({click:function(){return r(),!1}})},w=function(o){m(o),d.css({overflowY:"hidden",paddingRight:l()}),e.addClass("popup_opened"),f()},m=function(o){var n=u.filter(".popup__"+o);u.css({display:"none"}),n.css({display:"block"})};_()}}();
"use strict";!function(){$(function(){$.each($(".count-product"),function(){new n($(this))})});var n=function(n){var t=this,c=n,i=c.find(".count-product__input"),u=c.find(".count-product_add"),o=c.find(".count-product_del"),e=function(){i.on({keypress:function(){46==event.which&&$(this).val().indexOf(".")==-1||!(event.which<48||event.which>57)||event.preventDefault()}}),i.on({keyup:function(){""==i.val()&&i.val(1)}}),u.on({click:function(){return f(),!1}}),o.on({click:function(){return r(),!1}})},f=function(){var n=parseInt(i.val());i.val(n+1)},r=function(){var n=parseInt(i.val());1!=n&&i.val(n-1)},a=function(){c[0].obj=t,e()};a()}}();
"use strict";!function(){$(function(){$.each($(".my-cart__product"),function(){new t($(this))}),$.each($(".product-single__info"),function(){new a($(this))})});var t=function(t){var a=this,i=t,n=i.find(".count-product__input"),o=i.find(".count-product__btn"),e=i.find(".my-cart__remove"),d=new XMLHttpRequest,s=$(".cart"),r=0,c=$(".my-cart__total"),u=i.find(".my-cart__loading"),l=$(".my-cart__define .btn"),f=$(".my-cart__define input"),_=$(".my-cart__discount"),m=$(".my-cart__define"),p=$(".my-cart__applied"),v=$(".my-cart__invalid"),h=$(window),g=function(){h.on({load:function(){k()},resize:function(){k()}}),n.on({keypress:function(){(46==event.which&&$(this).val().indexOf(".")==-1||!(event.which<48||event.which>57))&&b($(this).parents(".my-cart__product"))}}),n.on({keyup:function(){setTimeout(function(){x(),b(i)},100)}}),o.on({click:function(){e.addClass("loading"),setTimeout(function(){b(i)},500)}}),o.on({mouseup:function(){setTimeout(function(){x()},100)}}),e.on({click:function(){var t=$(this);return t.hasClass("loading")||(u.addClass("visible"),setTimeout(function(){C(t.parents(".my-cart__product"))},500)),!1}}),l.on({click:function(){var t=$(this);return""!=f.val()?($(".my-cart__promo-loading").addClass("loading"),t.hasClass("ajax-loading")||T()):f.focus(),!1}}),v.find("a").on({click:function(){return $(".my-cart__promo-loading").removeClass("loading"),v.removeClass("visible"),m.removeClass("hidden"),!1}}),p.find("a").on({click:function(){return $(".my-cart__promo-loading").removeClass("loading"),w(),!1}})},y=function(t){t.addClass("hidden"),setTimeout(function(){t.remove()},500)},C=function(t){d.abort(),d=$.ajax({url:$("body").attr("data-action"),data:{action:"remove_cart_item",id:t.attr("data-product-key"),flag:"remove"},dataType:"json",type:"get",success:function(a){y(t),0==parseInt(a.cartCountProducts)?(s.find("div").remove(),s.removeClass("cart_fill"),$(".site__header").removeClass("site__header_fill-cart"),$(".my-cart").addClass("empty")):(s.find("div").html(a.cartCountProducts),_.find("dd").html(a.discount)),c.find("dd").html(a.subtotal),setTimeout(function(){u.removeClass("visible")},500)},error:function(t){"abort"!=t.statusText&&alert("ERROR!!!")}})},b=function(t){d.abort(),d=$.ajax({url:$("body").attr("data-action"),data:{action:"cart_quantity_changes",id:t.attr("data-product-id"),key:t.attr("data-product-key"),countProduct:t.find(".count-product__input").val(),flag:"changeCount"},dataType:"json",type:"get",success:function(a){t.find(".my-cart__total-price").html(a.total),c.find("dd").html(a.subtotal),$(".my-cart__discount").find("dd").html(a.discount),setTimeout(function(){e.removeClass("loading")},500)},error:function(t){"abort"!=t.statusText&&alert("ERROR!!!")}})},T=function(){d.abort(),d=$.ajax({url:$("body").attr("data-action"),data:{action:"apply_coupon_to_order",inputVal:f.val(),flag:"coupon"},dataType:"json",type:"get",success:function(t){setTimeout(function(){1==t.status?(_.addClass("visible"),m.addClass("hidden"),p.addClass("visible"),c.find("dd").html(t.subtotal),_.find("dd").html(t.discount)):(m.addClass("hidden"),v.addClass("visible"),p.addClass("hidden")),l.removeClass("ajax-loading"),$(".my-cart__promo-loading").removeClass("loading")},500)},error:function(t){"abort"!=t.statusText&&alert("ERROR!!!")}})},w=function(){d.abort(),d=$.ajax({url:$("body").attr("data-action"),data:{action:"remove_coupon_to_order",inputVal:f.val(),flag:"couponRemove"},dataType:"json",type:"get",success:function(t){setTimeout(function(){c.find("dd").html(t.subtotal),_.removeClass("visible"),m.removeClass("hidden"),p.removeClass("visible"),$(".my-cart__promo-loading").removeClass("loading")},500)},error:function(t){"abort"!=t.statusText&&alert("ERROR!!!")}})},k=function(){var t=i,a=t.find(">div");t.height(a.outerHeight(!0))},x=function(){r=0,s.hasClass("cart_fill")?($(".my-cart__products .count-product__input").each(function(){var t=$(this),a=parseInt(t.val());r+=a}),setTimeout(function(){s.find("div").html(r+" items")},700)):($(".my-cart__products .count-product__input").each(function(){var t=$(this),a=parseInt(t.val());r+=a}),setTimeout(function(){s.append("<div></div>"),s.addClass("cart_fill"),$(".site__header").addClass("site__header_fill-cart"),setTimeout(function(){1==r?s.find("div").html(r+" item"):s.find("div").html(r+" items")},100)},600))},R=function(){i[0].obj=a,g()};R()},a=function(t){var a=this,i=t,n=i.find(".count-product__input"),o=i.find(".product-single__price"),e=i.find(".product-single__add"),d=new XMLHttpRequest,s=$(".cart"),r=0,c=0,u=($(window),function(){e.on({click:function(t){return e.hasClass("adding")||($(".gallery__top .slick-current").length?l(t):f(),_($(this).parents(".product-single__info")),e.addClass("adding")),!1}})}),l=function(t){var a=$(".gallery__top .slick-current").data("image"),i=t||window.event;i.pageX,i.pageY;$("body").append('<div class="site__product hidden" style="background-image:url('+a+')"></div>'),$(".site__product").css({top:$(".gallery__top").offset().top,left:$(".gallery__top").offset().left,width:$(".gallery__top").width(),height:$(".gallery__top").height()}),setTimeout(function(){$(".site__product").addClass("visible"),$(".site__product").css({top:s.offset().top+s.innerHeight()/2-$(".site__product").height()/2,left:s.offset().left+s.innerWidth()/2-$(".site__product").width()/2})},100),setTimeout(function(){$(".site__product").removeClass("visible"),$(".site__product").css({"-webkit-transform":"scale(0.3)",transform:"scale(0.3)"})},500),setTimeout(function(){$(".site__product").remove()},700),f()},f=function(){s.hasClass("cart_fill")?(r=parseInt(s.find("div").text()),c=parseInt(n.val())+r,setTimeout(function(){s.find("div").html(c+" items")},700)):(c=parseInt(n.val()),setTimeout(function(){s.append("<div></div>"),s.addClass("cart_fill"),$(".site__header").addClass("site__header_fill-cart"),setTimeout(function(){1==c?s.find("div").html(c+" item"):s.find("div").html(c+" items")},100)},600)),setTimeout(function(){e.removeClass("adding")},700)},_=function(t){d.abort(),d=$.ajax({url:$("body").attr("data-action"),data:{action:"single_add_product",id:t.attr("data-id"),countProduct:n.val(),price:o.text(),flag:"addToCart"},dataType:"json",type:"get",success:function(t){parseInt(t.cartCountProducts)!=c&&s.find("div").html(t.cartCountProducts)},error:function(t,a){"abort"!=t.statusText&&parseInt(a.cartCountProducts)!=c&&s.find("div").html(r+"items")}})},m=function(){i[0].obj=a,u()};m()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5tYWluLmpzIiwianF1ZXJ5LnNpbmdsZS1wcm9kdWN0LmpzIiwianF1ZXJ5LnBvcHVwLmpzIiwianF1ZXJ5Lm51bWJlci1zcGlubmVyLmpzIiwianF1ZXJ5LmFqYXgtY2FydC5qcyJdLCJuYW1lcyI6WyJnbG9iYWxTY3JvbGxGbGFnIiwiJCIsIlByZWxvYWRlciIsImVhY2giLCJNZW51IiwidGhpcyIsIlNjcm9sbFBhbmVsIiwiU2xpZGVzIiwiRnVsbEhlaWdodCIsIlNjcm9sbFRvSGFzaCIsIm9iaiIsIl9zZWxmIiwiX3dpbmRvdyIsIndpbmRvdyIsIl9wcmVsb2FkZXIiLCJfYm9keSIsIl9hZGRFdmVudHMiLCJvbiIsImxvYWQiLCJfc2hvd1NpdGUiLCJfaW5pdCIsInByZWxvYWRlciIsImNzcyIsIm92ZXJmbG93LXkiLCJhZGRDbGFzcyIsInNldFRpbWVvdXQiLCJyZW1vdmUiLCJfb2JqIiwiX2h0bWwiLCJfbWVudSIsImZpbmQiLCJfYWN0aW9uIiwiX2FjdGlvbjIiLCJfZmxhZ0hpZGUiLCJsYXN0U2Nyb2xsVG9wIiwiX3Nob3dNZW51QnRuIiwiX2dsb2JhbFdpZHRoIiwid2lkdGgiLCJyZXNpemUiLCJzY3JvbGxUb3AiLCJfY2xvc2VNZW51Iiwic2Nyb2xsIiwiaW5uZXJIZWlnaHQiLCJyZW1vdmVDbGFzcyIsImhhc0NsYXNzIiwiRE9NTW91c2VTY3JvbGwiLCJlIiwiZGVsdGEiLCJvcmlnaW5hbEV2ZW50IiwiZGV0YWlsIiwiZGlyZWN0aW9uIiwiX2NoZWNrU2Nyb2xsIiwibW91c2V3aGVlbCIsIndoZWVsRGVsdGEiLCJldmVudCIsInN0IiwiY2xpY2siLCJfb3Blbk1lbnUiLCJlbGVtIiwib3ZlcmZsb3dZIiwiX2xpbmtzIiwiX2RvbSIsIl9oZWFkZXIiLCJfY2hhbmdlQWN0aXZlIiwiY3VySXRlbSIsIm5ld0NsYXNzIiwiYXR0ciIsIm5leHRJdGVtVG9wIiwib2Zmc2V0IiwidG9wIiwic3RvcCIsImFuaW1hdGUiLCJkdXJhdGlvbiIsInByb2dyZXNzIiwiY29tcGxldGUiLCJpdGVtIiwiaSIsImxlbmd0aCIsImN1ciIsIml0ZW1DdXIiLCJvdXRlckhlaWdodCIsIml0ZW1IZWlnaHQiLCJjdXJDbGFzcyIsInNwbGl0IiwiY3VyTGluayIsImZpbHRlciIsImN1clNjcm9sbCIsIndpbmRvd0giLCJoZWlnaHQiLCJ0b3BQb3MiLCJ0b3BJbldpbmRvdyIsInZpc2libGVQZXJjZW50Iiwic2xpZGVzIiwiX3NldEhlaWdodCIsIm1pbi1oZWlnaHQiLCJfc2Nyb2xsVG8iLCJoYXNoIiwibG9jYXRpb24iLCJyZXBsYWNlIiwic2Nyb2xsVG8iLCJwYXJzZUludCIsIlN3aXBlckdhbGxlcnkiLCJfZ2FsbGVyeVRvcCIsIl9nYWxsZXJ5VGh1bWJzIiwiX2luaXRTbGljayIsInNsaWNrIiwic2xpZGVzVG9TaG93Iiwic2xpZGVzVG9TY3JvbGwiLCJhcnJvd3MiLCJmYWRlIiwiYXNOYXZGb3IiLCJyZXNwb25zaXZlIiwiYnJlYWtwb2ludCIsInNldHRpbmdzIiwiZG90cyIsImZvY3VzT25TZWxlY3QiLCJQb3B1cCIsIl9wb3B1cFBhZGRpbmciLCJfYnRuU2hvdyIsIl9idG5DbG9zZSIsIl93cmFwIiwiX2NvbnRlbnRzIiwiX3Njcm9sbENvbnRlaW5lciIsIl90aW1lciIsIl9jZW50ZXJXcmFwIiwiX2dldFNjcm9sbFdpZHRoIiwic2Nyb2xsQmFyV2lkdGgiLCJzY3JvbGxEaXYiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJvZmZzZXRXaWR0aCIsImNsaWVudFdpZHRoIiwicmVtb3ZlQ2hpbGQiLCJfaGlkZSIsInBhZGRpbmdSaWdodCIsIl9vbkV2ZW50cyIsIl9zaG93Iiwic3RvcFByb3BhZ2F0aW9uIiwiX3NldFBvcHVwQ29udGVudCIsImN1ckNvbnRlbnQiLCJkaXNwbGF5IiwiU3Bpbm5lciIsIl9pbnB1dCIsIl9idG5VcCIsIl9idG5Eb3duIiwia2V5cHJlc3MiLCJ3aGljaCIsInZhbCIsImluZGV4T2YiLCJwcmV2ZW50RGVmYXVsdCIsImtleXVwIiwiX2FkZENvdW50IiwiX3JlZHVjZUNvdW50IiwidmFsdWUiLCJQcm9kdWN0c0luQ2FydCIsIkFkZFByb2R1Y3RzVG9DYXJ0IiwiX2J0bkNoYW5nZUNvdW50IiwiX2J0blJlbW92ZVByb2R1Y3QiLCJfcmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0IiwiX2NhcnQiLCJuZXdDb3VudCIsIl90b3RhbFByaWNlIiwiX2xvYWQiLCJfYnRuUHJvbW8iLCJfaW5wdXRDb3Vwb24iLCJfZGlzY291bnQiLCJfZGVmaW5lIiwiX2FwcGxpZWQiLCJfaW52YWxpZCIsIl9yZXF1ZXN0Q291bnRDaGFuZ2UiLCJwYXJlbnRzIiwiX3dyaXRlSW5DYXJ0IiwibW91c2V1cCIsImNpckl0ZW0iLCJfcmVxdWVzdFByb2R1Y3RSZW1vdmUiLCJfcmVxdWVzdENvdXBvbkRpc2NvdW50IiwiZm9jdXMiLCJfcmVxdWVzdENhbmNlbENvdXBvbkRpc2NvdW50IiwiX3JlbW92ZVByb2R1Y3QiLCJhYm9ydCIsImFqYXgiLCJ1cmwiLCJkYXRhIiwiYWN0aW9uIiwiaWQiLCJmbGFnIiwiZGF0YVR5cGUiLCJ0eXBlIiwic3VjY2VzcyIsIm0iLCJjYXJ0Q291bnRQcm9kdWN0cyIsImh0bWwiLCJkaXNjb3VudCIsInN1YnRvdGFsIiwiZXJyb3IiLCJzdGF0dXNUZXh0IiwiYWxlcnQiLCJrZXkiLCJjb3VudFByb2R1Y3QiLCJ0b3RhbCIsImlucHV0VmFsIiwic3RhdHVzIiwiY2hpbGRyZW4iLCJhcHBlbmQiLCJfcHJpY2UiLCJfYWRkVG9DYXJ0QnRuIiwib2xkQ291bnQiLCJfYW5pbWF0ZWRBZGRpbmciLCJfcmVxdWVzdFByb2R1Y3RBZGRUb0NhcnQiLCJwaWMiLCJwYWdlWCIsInBhZ2VZIiwibGVmdCIsImlubmVyV2lkdGgiLCItd2Via2l0LXRyYW5zZm9ybSIsInRyYW5zZm9ybSIsInRleHQiLCJwcmljZSJdLCJtYXBwaW5ncyI6IkFBQUEsY0FDQSxXQUVJLEdBQUlBLElBQW1CLENB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N0gsV0FBWSxXQUVSMEksRUFBTTRDLE9BQU8sZUFDYjVDLEVBQU0zSSxTQUFTLGFBQ2Z2QixFQUFFLGlCQUFpQnVCLFNBQVMsMEJBRTVCQyxXQUFZLFdBRVEsR0FBWjJJLEVBRUFELEVBQU1ySSxLQUFLLE9BQU9xSyxLQUFNL0IsRUFBVyxTQUluQ0QsRUFBTXJJLEtBQUssT0FBT3FLLEtBQU0vQixFQUFXLFdBSXhDLE1BRUosTUFlUDNJLFdBQVksV0FFUndMLEVBQWN0SyxZQUFZLFdBRTNCLE1BR1B5SyxFQUEyQixTQUFXMUosR0FFbEN1RyxFQUFTc0IsUUFDVHRCLEVBQVdoSyxFQUFFdUwsTUFDVEMsSUFBS3hMLEVBQUUsUUFBUWlFLEtBQUssZUFDcEJ3SCxNQUNJQyxPQUFRLHFCQUNSQyxHQUFJbEksRUFBS1EsS0FBSyxXQUNkd0ksYUFBY3pELEVBQU9LLE1BQ3JCdUUsTUFBT2IsRUFBT1ksT0FDZC9CLEtBQU0sYUFFVkMsU0FBVSxPQUNWQyxLQUFNLE1BQ05DLFFBQVMsU0FBVUMsR0FFVjdGLFNBQVU2RixFQUFFQyxvQkFBdUI5QixHQUVwQ0QsRUFBTXJJLEtBQUssT0FBT3FLLEtBQU1GLEVBQUVDLG9CQUtsQ0ksTUFBTyxTQUFXcEMsRUFBZ0IrQixHQUNJLFNBQTdCL0IsRUFBZXFDLFlBRVhuRyxTQUFVNkYsRUFBRUMsb0JBQXVCOUIsR0FFcENELEVBQU1ySSxLQUFLLE9BQU9xSyxLQUFNZSxFQUFXLGFBU3ZEOUwsRUFBUSxXQUNKTyxFQUFLLEdBQUdqQixJQUFNQyxFQUNkSyxJQVFSSSIsImZpbGUiOiJzaW5nbGUtcHJvZHVjdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbiggZnVuY3Rpb24oKXtcblxuICAgIHZhciBnbG9iYWxTY3JvbGxGbGFnID0gdHJ1ZTtcblxuICAgICQoIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBuZXcgUHJlbG9hZGVyKCAkKCcucHJlbG9hZGVyJykgKTtcblxuICAgICAgICAkLmVhY2goICQoICcuc2l0ZV9faGVhZGVyJyApLCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgbmV3IE1lbnUgKCAkKCB0aGlzICkgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICAgICAgJC5lYWNoKCAkKCdbZGF0YS1ocmVmXScpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBTY3JvbGxQYW5lbCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5zbGlkZXMnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgU2xpZGVzKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnLnNpdGVfX2NvbnRlbnQtZnVsbCcpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBGdWxsSGVpZ2h0KCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnLnNpdGVfaW5kZXgnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgU2Nyb2xsVG9IYXNoKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgfSApO1xuXG4gICAgdmFyIFByZWxvYWRlciA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyApLFxuICAgICAgICAgICAgX3ByZWxvYWRlciA9IG9iaixcbiAgICAgICAgICAgIF9ib2R5ID0gJCgnYm9keScpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICBsb2FkOiBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfc2hvd1NpdGUoKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfYm9keVswXS5wcmVsb2FkZXIgPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG5cblxuXG4gICAgICAgICAgICAgICAgJCgnaHRtbCcpLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAnb3ZlcmZsb3cteSc6ICdoaWRkZW4nXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3Nob3dTaXRlID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfcHJlbG9hZGVyLmFkZENsYXNzKCAncHJlbG9hZGVyX2xvYWRlZCcgKTtcblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgX3ByZWxvYWRlci5yZW1vdmUoKTtcblxuICAgICAgICAgICAgICAgICAgICAkKCdodG1sJykuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnb3ZlcmZsb3cteSc6ICdzY3JvbGwnXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNpdGUnKS5hZGRDbGFzcyggJ3NpdGVfX2xvYWRlZCcgKTtcblxuICAgICAgICAgICAgICAgIH0sNTAwKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBNZW51ID0gZnVuY3Rpb24oIG9iaiApIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICBfaHRtbCA9ICQoJ2h0bWwnKSxcbiAgICAgICAgICAgIF9tZW51ID0gX29iai5maW5kKCcuc2l0ZV9fbWVudScpLFxuICAgICAgICAgICAgX2NvbnRlbnQgPSAkKCcuc2l0ZV9fY29udGVudCcpLFxuICAgICAgICAgICAgX2FjdGlvbiA9IGZhbHNlLFxuICAgICAgICAgICAgX2FjdGlvbjIgPSBmYWxzZSxcbiAgICAgICAgICAgIF9mbGFnSGlkZSA9IHRydWUsXG4gICAgICAgICAgICBsYXN0U2Nyb2xsVG9wID0gMCxcbiAgICAgICAgICAgIF9zaG93TWVudUJ0biA9IF9vYmouZmluZCgnLnNpdGVfX21lbnUtYnRuJyksXG4gICAgICAgICAgICBfZ2xvYmFsV2lkdGggPSAwO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2dsb2JhbFdpZHRoID0gX3dpbmRvdy53aWR0aCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX2dsb2JhbFdpZHRoICE9IF93aW5kb3cud2lkdGgoKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9nbG9iYWxXaWR0aCA9IF93aW5kb3cud2lkdGgoKSArIDE7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbWVudS5zY3JvbGxUb3AoMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jbG9zZU1lbnUoIF9zaG93TWVudUJ0biApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ3Njcm9sbCc6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2FjdGlvbiA9IF93aW5kb3cuc2Nyb2xsVG9wKCkgPj0gX29iai5pbm5lckhlaWdodCgpICogMjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cuc2Nyb2xsVG9wKCkgPj0gX29iai5pbm5lckhlaWdodCgpKyAyMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfZmxhZ0hpZGUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2ZsYWdIaWRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZScgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2ZsYWdIaWRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGUnICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX2FjdGlvbiApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfb2JqLmhhc0NsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGUnICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdzaXRlX19oZWFkZXJfZml4ZWQnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGUnICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggX3dpbmRvdy5zY3JvbGxUb3AoKSA8PSBfb2JqLmlubmVySGVpZ2h0KCkgKiAzICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3NpdGVfX2hlYWRlcl9maXhlZCcgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGRlbicgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy5zY3JvbGxUb3AoKSA8PSAxMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdzaXRlX19oZWFkZXJfZml4ZWQnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3NpdGVfX2hlYWRlcl9oaWRkZW4nICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAnRE9NTW91c2VTY3JvbGwnOiBmdW5jdGlvbiAoIGUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IGUub3JpZ2luYWxFdmVudC5kZXRhaWw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZGVsdGEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gKCBkZWx0YSA+IDAgKSA/IDEgOiAtMTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCggZGlyZWN0aW9uICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBkaXJlY3Rpb24gPCAwICApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hY3Rpb24yID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hY3Rpb24yID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDAgKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAnbW91c2V3aGVlbCc6IGZ1bmN0aW9uICggZSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gZS5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZGVsdGEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gKCBkZWx0YSA+IDAgKSA/IC0xIDogMTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCggZGlyZWN0aW9uICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBkaXJlY3Rpb24gPCAwICApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hY3Rpb24yID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hY3Rpb24yID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDAgKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbihldmVudCl7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0ID0gJCh0aGlzKS5zY3JvbGxUb3AoKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoc3QgPiBsYXN0U2Nyb2xsVG9wKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCAxICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAxXG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCAtMSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gLTFcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxhc3RTY3JvbGxUb3AgPSBzdDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIGRpcmVjdGlvbiA8IDAgICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfYWN0aW9uMiA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYWN0aW9uMiA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDAgKVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIF9zaG93TWVudUJ0bi5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAkKCB0aGlzICkuaGFzQ2xhc3MoICdvcGVuZWQnICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2xvc2VNZW51KCAkKCB0aGlzICkgKVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb3Blbk1lbnUoICQoIHRoaXMgKSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NoZWNrU2Nyb2xsID0gZnVuY3Rpb24oIGRpcmVjdGlvbiApIHtcblxuICAgICAgICAgICAgICAgIGlmKCBkaXJlY3Rpb24gPiAwICYmICFfb2JqLmhhc0NsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGRlbicgKSAmJiAhX3Nob3dNZW51QnRuLmhhc0NsYXNzKCAnb3BlbmVkJyApICYmIF9hY3Rpb24gJiYgIV9hY3Rpb24yICl7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3NpdGVfX2hlYWRlcl9oaWRkZW4nICk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiggZGlyZWN0aW9uIDwgMCAmJiBfb2JqLmhhc0NsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGRlbicgKSAmJiAhX3Nob3dNZW51QnRuLmhhc0NsYXNzKCAnb3BlbmVkJyApICAmJiBfYWN0aW9uICYmIF9hY3Rpb24yICYmIGdsb2JhbFNjcm9sbEZsYWcgKXtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCdzaXRlX19oZWFkZXJfaGlkZGVuJyk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2xvc2VNZW51ID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cbiAgICAgICAgICAgICAgICBfaHRtbC5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bydcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBlbGVtLnJlbW92ZUNsYXNzKCAnb3BlbmVkJyApO1xuICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdvcGVuZWQtbWVudScgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb3Blbk1lbnUgPSBmdW5jdGlvbiggZWxlbSApICB7XG5cbiAgICAgICAgICAgICAgICBlbGVtLmFkZENsYXNzKCAnb3BlbmVkJyApO1xuICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdvcGVuZWQtbWVudScgKTtcblxuICAgICAgICAgICAgICAgIF9odG1sLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdoaWRkZW4nXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBTY3JvbGxQYW5lbCA9IGZ1bmN0aW9uICggb2JqICkge1xuXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2xpbmtzID0gX29iaixcbiAgICAgICAgICAgIF9odG1sID0gJCgnaHRtbCcpLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KSxcbiAgICAgICAgICAgIF9kb20gPSAgJCggJ2h0bWwsIGJvZHknKSxcbiAgICAgICAgICAgIF9oZWFkZXIgPSAkKCcuc2l0ZV9faGVhZGVyJyksXG4gICAgICAgICAgICBfcG9wdXAgPSAkKCcucG9wdXBfX2Nvb2tpZXMtaW5mbycpO1xuXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2NoYW5nZUFjdGl2ZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICdzY3JvbGwnOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGFuZ2VBY3RpdmUoKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX2xpbmtzLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKCB0aGlzICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q2xhc3MgPSBjdXJJdGVtLmF0dHIoJ2RhdGEtaHJlZicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRJdGVtVG9wID0gJCggJy4nICsgbmV3Q2xhc3MgICkub2Zmc2V0KCkudG9wO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zaXRlX19tZW51LW5hdl9hbmNob3JzIGEnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2RvbS5zdG9wKCB0cnVlLCBmYWxzZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2RvbS5hbmltYXRlKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBuZXh0SXRlbVRvcFxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxTY3JvbGxGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oZWFkZXIuYWRkQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZGVuJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbFNjcm9sbEZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjAwICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxTY3JvbGxGbGFnID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfaHRtbC5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLmZpbmQoJy5zaXRlX19tZW51LWJ0bicpLnJlbW92ZUNsYXNzKCAnb3BlbmVkJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2hlYWRlci5yZW1vdmVDbGFzcyggJ29wZW5lZC1tZW51JyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jaGFuZ2VBY3RpdmUgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gX3dpbmRvdy5zY3JvbGxUb3AoKSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbSA9ICQoJ2JvZHknKS5maW5kKCdbZGF0YS1zY3JvbGw9XCJzY3JvbGxcIl0nKSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbVBvcyA9IGl0ZW0ub2Zmc2V0KCkudG9wO1xuXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGl0ZW0ubGVuZ3RoOyBpKysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ciA9ICQoaXRlbVtpXSksXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtQ3VyID0gJChpdGVtW2ldKS5vZmZzZXQoKS50b3AgLSBfaGVhZGVyLm91dGVySGVpZ2h0KHRydWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUhlaWdodCA9ICQoaXRlbVtpXSkub3V0ZXJIZWlnaHQodHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIHNjcm9sbFRvcCA+IGl0ZW1DdXIgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJDbGFzcyA9IGN1ci5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyTGluayA9IF9saW5rcy5maWx0ZXIoXCJbZGF0YS1ocmVmPVwiK2N1ckNsYXNzWzBdK1wiXVwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2xpbmtzLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckxpbmsuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYoIHNjcm9sbFRvcCA+ICggaXRlbUN1ciArIGl0ZW1IZWlnaHQgKSApe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfbGlua3MucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIFNsaWRlcyA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbih7XG4gICAgICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2hlY2tTY3JvbGwgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgdmFyIGN1clNjcm9sbCA9IF93aW5kb3cuc2Nyb2xsVG9wKCksXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvd0ggPSBfd2luZG93LmhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICB0b3BQb3MgPSBfb2JqLm9mZnNldCgpLnRvcCxcbiAgICAgICAgICAgICAgICAgICAgdG9wSW5XaW5kb3cgPSB0b3BQb3MtY3VyU2Nyb2xsLFxuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlUGVyY2VudCA9IDEtKHRvcEluV2luZG93L3dpbmRvd0gpO1xuXG4gICAgICAgICAgICAgICAgaWYoIHZpc2libGVQZXJjZW50ID4gLjUgKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoICFfb2JqLmhhc0NsYXNzKCdzbGlkZXNfYWN0aXZlJykgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoJ3NsaWRlc19hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9vYmpbMF0uc2xpZGVzID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgRnVsbEhlaWdodCA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICBfaGVhZGVyID0gJCgnLnNpdGVfX2hlYWRlcicpLFxuICAgICAgICAgICAgX2dsb2JhbFdpZHRoID0gMDtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICBsb2FkOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9nbG9iYWxXaWR0aCA9IF93aW5kb3cud2lkdGgoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRIZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9nbG9iYWxXaWR0aCAhPSBfd2luZG93LndpZHRoKCkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZ2xvYmFsV2lkdGggPSBfd2luZG93LndpZHRoKCkgKyAxO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NldEhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0SGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gX3dpbmRvdy5oZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICdtaW4taGVpZ2h0JzogaGVpZ2h0IC0gX2hlYWRlci5pbm5lckhlaWdodCgpIC0gJCgnLnNpdGVfX21haW4tdGl0bGUnKS5vdXRlckhlaWdodCh0cnVlKVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIGlmKCBfb2JqLmZpbmQoJy5jb250YWN0LXVzJykubGVuZ3RoICkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6IGhlaWdodCAtIF9oZWFkZXIuaW5uZXJIZWlnaHQoKSAtICQoJy5zaXRlX19tYWluLXRpdGxlJykub3V0ZXJIZWlnaHQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6IGhlaWdodCAtIF9oZWFkZXIuaW5uZXJIZWlnaHQoKSAtICQoJy5zaXRlX19tYWluLXRpdGxlJykub3V0ZXJIZWlnaHQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBTY3JvbGxUb0hhc2ggPSBmdW5jdGlvbiAoIG9iaiApIHtcblxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICBfZG9tID0gICQoJ2h0bWwsIGJvZHknKTtcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zY3JvbGxUbygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDAgKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2Nyb2xsVG8gPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIHZhciBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2gucmVwbGFjZSgnIycsICcnKTtcblxuICAgICAgICAgICAgICAgIGlmKCBoYXNoICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtID0gJCggJy4nICsgd2luZG93LmxvY2F0aW9uLmhhc2gucmVwbGFjZSgnIycsICcnKSApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBlbGVtLmxlbmd0aCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKCAwLCBwYXJzZUludCggZWxlbS5vZmZzZXQoKS50b3AgKSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAkKCcuc2xpZGVzJykuYWRkQ2xhc3MoJ3NsaWRlc19hY3RpdmUnKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxufSApKCk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG4oIGZ1bmN0aW9uKCl7XG5cbiAgICAkKCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcucHJvZHVjdC1zaW5nbGVfX2dhbGxlcnknICksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IFN3aXBlckdhbGxlcnkoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICB9ICk7XG5cbiAgICB2YXIgU3dpcGVyR2FsbGVyeSA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX2dhbGxlcnlUb3AgPSBvYmouZmluZCgnLmdhbGxlcnlfX3RvcCcpLFxuICAgICAgICAgICAgX2dhbGxlcnlUaHVtYnMgPSBvYmouZmluZCgnLmdhbGxlcnlfX3RodW1icycpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfaW5pdFNsaWNrID0gZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgIF9nYWxsZXJ5VG9wLnNsaWNrKCB7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gICAgICAgICAgICAgICAgICAgIGFycm93czogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGZhZGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGFzTmF2Rm9yOiAnLmdhbGxlcnlfX3RodW1icycsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNpdmU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50OiA3NjgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFkZTogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfZ2FsbGVyeVRodW1icy5zbGljaygge1xuICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDIsXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxuICAgICAgICAgICAgICAgICAgICBhc05hdkZvcjogJy5nYWxsZXJ5X190b3AnLFxuICAgICAgICAgICAgICAgICAgICBkb3RzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgYXJyb3dzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZm9jdXNPblNlbGVjdDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9pbml0U2xpY2soKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG59ICkoKTsiLCIoIGZ1bmN0aW9uKCl7XG5cbiAgICAkKCBmdW5jdGlvbigpe1xuXG4gICAgICAgICQoICcucG9wdXAnICkuZWFjaChmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICBuZXcgUG9wdXAoJCh0aGlzKSk7XG5cbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIHZhciBQb3B1cCA9IGZ1bmN0aW9uKCBvYmogKXtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX3BvcHVwUGFkZGluZyA9IDQwLFxuICAgICAgICAgICAgX2J0blNob3cgPSAgJCggJy5wb3B1cF9fb3BlbicgKSxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfYnRuQ2xvc2UgPSBfb2JqLmZpbmQoICcucG9wdXBfX2Nsb3NlLCAucG9wdXBfX2NhbmNlbCcgKSxcbiAgICAgICAgICAgIF93cmFwID0gX29iai5maW5kKCAnLnBvcHVwX193cmFwJyApLFxuICAgICAgICAgICAgX2NvbnRlbnRzID0gX29iai5maW5kKCAnLnBvcHVwX19jb250ZW50JyApLFxuICAgICAgICAgICAgX3Njcm9sbENvbnRlaW5lciA9ICQoICdodG1sJyApLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyApLFxuICAgICAgICAgICAgX2dsb2JhbFdpZHRoLFxuICAgICAgICAgICAgX3RpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKXt9LCAxICk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9jZW50ZXJXcmFwID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBpZiAoIF93aW5kb3cuaGVpZ2h0KCkgLSAoIF9wb3B1cFBhZGRpbmcgKiAyICkgLSBfd3JhcC5oZWlnaHQoKSA+IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgIF93cmFwLmNzcyggeyB0b3A6ICggKCBfd2luZG93LmhlaWdodCgpIC0gKCBfcG9wdXBQYWRkaW5nICogMiApICkgLSBfd3JhcC5oZWlnaHQoKSApIC8gMiB9ICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX3dyYXAuY3NzKCB7IHRvcDogMCB9ICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9nZXRTY3JvbGxXaWR0aCA9IGZ1bmN0aW9uICgpe1xuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyksXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbEJhcldpZHRoO1xuXG4gICAgICAgICAgICAgICAgc2Nyb2xsRGl2LmNsYXNzTmFtZSA9ICdwb3B1cF9fc2Nyb2xsYmFyLW1lYXN1cmUnO1xuXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCggc2Nyb2xsRGl2ICk7XG5cbiAgICAgICAgICAgICAgICBzY3JvbGxCYXJXaWR0aCA9IHNjcm9sbERpdi5vZmZzZXRXaWR0aCAtIHNjcm9sbERpdi5jbGllbnRXaWR0aDtcblxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2Nyb2xsRGl2KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxCYXJXaWR0aDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaGlkZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX29iai5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnaGlkZGVuJ1xuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJyxcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiAwXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3BvcHVwX29wZW5lZCcgKTtcbiAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAncG9wdXBfaGlkZScgKTtcblxuICAgICAgICAgICAgICAgIF90aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5jc3MgKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ3Njcm9sbCdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3BvcHVwX2hpZGUnICk7XG4gICAgICAgICAgICAgICAgfSwgMzAwICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9vbkV2ZW50cygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbkV2ZW50cyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICBsb2FkOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9nbG9iYWxXaWR0aCA9IF93aW5kb3cud2lkdGgoKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2VudGVyV3JhcCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDEwMjQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX2dsb2JhbFdpZHRoICE9IF93aW5kb3cud2lkdGgoKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZ2xvYmFsV2lkdGggPSBfd2luZG93LndpZHRoKCkgKyAxO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9idG5TaG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggJCh0aGlzKS5oYXNDbGFzcygnY29va2llcy1pbmZvX2J0bicpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA8IDEwMjQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3Nob3coICQoIHRoaXMgKS5hdHRyKCAnZGF0YS1wb3B1cCcgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2hvdyggJCggdGhpcyApLmF0dHIoICdkYXRhLXBvcHVwJyApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfd3JhcC5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oIGUgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX29iai5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX2J0bkNsb3NlLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2hvdyA9IGZ1bmN0aW9uKCBjbGFzc05hbWUgKXtcbiAgICAgICAgICAgICAgICBfc2V0UG9wdXBDb250ZW50KCBjbGFzc05hbWUgKTtcblxuICAgICAgICAgICAgICAgIF9zY3JvbGxDb250ZWluZXIuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2hpZGRlbicsXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogX2dldFNjcm9sbFdpZHRoKClcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3BvcHVwX29wZW5lZCcgKTtcbiAgICAgICAgICAgICAgICBfY2VudGVyV3JhcCgpO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3NldFBvcHVwQ29udGVudCA9IGZ1bmN0aW9uKCBjbGFzc05hbWUgKXtcbiAgICAgICAgICAgICAgICB2YXIgY3VyQ29udGVudCA9IF9jb250ZW50cy5maWx0ZXIoICcucG9wdXBfXycgKyBjbGFzc05hbWUgKTtcblxuICAgICAgICAgICAgICAgIF9jb250ZW50cy5jc3MoIHsgZGlzcGxheTogJ25vbmUnIH0gKTtcbiAgICAgICAgICAgICAgICBjdXJDb250ZW50LmNzcyggeyBkaXNwbGF5OiAnYmxvY2snIH0gKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxufSApKCk7XG5cbiIsIlwidXNlIHN0cmljdFwiO1xuKCBmdW5jdGlvbigpe1xuXG4gICAgJCggZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICQuZWFjaCggJCgnLmNvdW50LXByb2R1Y3QnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgU3Bpbm5lciggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgIH0gKTtcblxuICAgIHZhciBTcGlubmVyID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2lucHV0ID0gX29iai5maW5kKCcuY291bnQtcHJvZHVjdF9faW5wdXQnKSxcbiAgICAgICAgICAgIF9idG5VcCA9IF9vYmouZmluZCgnLmNvdW50LXByb2R1Y3RfYWRkJyksXG4gICAgICAgICAgICBfYnRuRG93biA9IF9vYmouZmluZCgnLmNvdW50LXByb2R1Y3RfZGVsJyk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfaW5wdXQub24oIHtcbiAgICAgICAgICAgICAgICAgICAga2V5cHJlc3M6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAoIGV2ZW50LndoaWNoICE9IDQ2IHx8ICQoIHRoaXMgKS52YWwoKS5pbmRleE9mKCAnLicgKSAhPSAtMSApICYmICggZXZlbnQud2hpY2ggPCA0OCB8fCBldmVudC53aGljaCA+IDU3ICkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9pbnB1dC5vbigge1xuICAgICAgICAgICAgICAgICAgICBrZXl1cDogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX2lucHV0LnZhbCgpID09ICcnICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2lucHV0LnZhbCggMSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfYnRuVXAub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2FkZENvdW50KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9idG5Eb3duLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWR1Y2VDb3VudCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hZGRDb3VudCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcGFyc2VJbnQoIF9pbnB1dC52YWwoKSApO1xuXG4gICAgICAgICAgICAgICAgX2lucHV0LnZhbCggdmFsdWUgKyAxICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfcmVkdWNlQ291bnQgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcGFyc2VJbnQoIF9pbnB1dC52YWwoKSApO1xuXG4gICAgICAgICAgICAgICAgaWYoIHZhbHVlICE9IDEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX2lucHV0LnZhbCggdmFsdWUgLSAxICk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxufSApKCk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG4oIGZ1bmN0aW9uKCl7XG5cbiAgICAkKCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcubXktY2FydF9fcHJvZHVjdCcpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBQcm9kdWN0c0luQ2FydCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5wcm9kdWN0LXNpbmdsZV9faW5mbycpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBBZGRQcm9kdWN0c1RvQ2FydCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgIH0gKTtcblxuICAgIHZhciBQcm9kdWN0c0luQ2FydCA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9pbnB1dCA9IF9vYmouZmluZCgnLmNvdW50LXByb2R1Y3RfX2lucHV0JyksXG4gICAgICAgICAgICBfYnRuQ2hhbmdlQ291bnQgPSBfb2JqLmZpbmQoJy5jb3VudC1wcm9kdWN0X19idG4nKSxcbiAgICAgICAgICAgIF9idG5SZW1vdmVQcm9kdWN0ID0gX29iai5maW5kKCcubXktY2FydF9fcmVtb3ZlJyksXG4gICAgICAgICAgICBfcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxuICAgICAgICAgICAgX2NhcnQgPSAkKCcuY2FydCcpLFxuICAgICAgICAgICAgb2xkQ291bnQgPSAwLFxuICAgICAgICAgICAgbmV3Q291bnQgPSAwLFxuICAgICAgICAgICAgX3RvdGFsUHJpY2UgPSAkKCcubXktY2FydF9fdG90YWwnKSxcbiAgICAgICAgICAgIF9sb2FkID0gX29iai5maW5kKCcubXktY2FydF9fbG9hZGluZycpLFxuICAgICAgICAgICAgX2J0blByb21vID0gJCgnLm15LWNhcnRfX2RlZmluZSAuYnRuJyksXG4gICAgICAgICAgICBfaW5wdXRDb3Vwb24gPSAkKCcubXktY2FydF9fZGVmaW5lIGlucHV0JyksXG4gICAgICAgICAgICBfZGlzY291bnQgPSAkKCcubXktY2FydF9fZGlzY291bnQnKSxcbiAgICAgICAgICAgIF9kZWZpbmUgPSAkKCcubXktY2FydF9fZGVmaW5lJyksXG4gICAgICAgICAgICBfYXBwbGllZCA9ICQoJy5teS1jYXJ0X19hcHBsaWVkJyksXG4gICAgICAgICAgICBfaW52YWxpZCA9ICQoJy5teS1jYXJ0X19pbnZhbGlkJyksXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfc2V0SGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRIZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX2lucHV0Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGtleXByZXNzOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggISgoIGV2ZW50LndoaWNoICE9IDQ2IHx8ICQoIHRoaXMgKS52YWwoKS5pbmRleE9mKCAnLicgKSAhPSAtMSApICYmICggZXZlbnQud2hpY2ggPCA0OCB8fCBldmVudC53aGljaCA+IDU3ICkpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlcXVlc3RDb3VudENoYW5nZSggJCh0aGlzKS5wYXJlbnRzKCcubXktY2FydF9fcHJvZHVjdCcpICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX2lucHV0Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGtleXVwOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3dyaXRlSW5DYXJ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlcXVlc3RDb3VudENoYW5nZSggX29iaiApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF9idG5DaGFuZ2VDb3VudC5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfYnRuUmVtb3ZlUHJvZHVjdC5hZGRDbGFzcygnbG9hZGluZycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZXF1ZXN0Q291bnRDaGFuZ2UoIF9vYmogKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDAgKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX2J0bkNoYW5nZUNvdW50Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIG1vdXNldXA6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfd3JpdGVJbkNhcnQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF9idG5SZW1vdmVQcm9kdWN0Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaXJJdGVtID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoICEoIGNpckl0ZW0uaGFzQ2xhc3MoJ2xvYWRpbmcnKSApICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvYWQuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZXF1ZXN0UHJvZHVjdFJlbW92ZSggY2lySXRlbS5wYXJlbnRzKCcubXktY2FydF9fcHJvZHVjdCcpICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDAgKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX2J0blByb21vLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaXJJdGVtID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoICEoIF9pbnB1dENvdXBvbi52YWwoKSA9PSAnJyApICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLm15LWNhcnRfX3Byb21vLWxvYWRpbmcnKS5hZGRDbGFzcygnbG9hZGluZycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoICEoIGNpckl0ZW0uaGFzQ2xhc3MoJ2FqYXgtbG9hZGluZycpICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlcXVlc3RDb3Vwb25EaXNjb3VudCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2lucHV0Q291cG9uLmZvY3VzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF9pbnZhbGlkLmZpbmQoJ2EnKS5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcubXktY2FydF9fcHJvbW8tbG9hZGluZycpLnJlbW92ZUNsYXNzKCdsb2FkaW5nJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9pbnZhbGlkLnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZGVmaW5lLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfYXBwbGllZC5maW5kKCdhJykub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLm15LWNhcnRfX3Byb21vLWxvYWRpbmcnKS5yZW1vdmVDbGFzcygnbG9hZGluZycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVxdWVzdENhbmNlbENvdXBvbkRpc2NvdW50KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3JlbW92ZVByb2R1Y3QgPSBmdW5jdGlvbiggZWxlbSApIHtcblxuICAgICAgICAgICAgICAgIGVsZW0uYWRkQ2xhc3MoJ2hpZGRlbicpO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZWxlbS5yZW1vdmUoKTtcblxuICAgICAgICAgICAgICAgIH0sIDUwMCApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3JlcXVlc3RQcm9kdWN0UmVtb3ZlID0gZnVuY3Rpb24gKCBlbGVtICkge1xuXG4gICAgICAgICAgICAgICAgX3JlcXVlc3QuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICBfcmVxdWVzdCA9ICQuYWpheCgge1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICQoJ2JvZHknKS5hdHRyKCdkYXRhLWFjdGlvbicpLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdyZW1vdmVfY2FydF9pdGVtJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtLmF0dHIoJ2RhdGEtcHJvZHVjdC1rZXknKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsYWc6ICdyZW1vdmUnXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChtKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVtb3ZlUHJvZHVjdCggZWxlbSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggcGFyc2VJbnQobS5jYXJ0Q291bnRQcm9kdWN0cykgPT0gMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jYXJ0LmZpbmQoJ2RpdicpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jYXJ0LnJlbW92ZUNsYXNzKCdjYXJ0X2ZpbGwnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuc2l0ZV9faGVhZGVyJykucmVtb3ZlQ2xhc3MoJ3NpdGVfX2hlYWRlcl9maWxsLWNhcnQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcubXktY2FydCcpLmFkZENsYXNzKCdlbXB0eScpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2FydC5maW5kKCdkaXYnKS5odG1sKCBtLmNhcnRDb3VudFByb2R1Y3RzICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Rpc2NvdW50LmZpbmQoJ2RkJykuaHRtbCggbS5kaXNjb3VudCApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBfdG90YWxQcmljZS5maW5kKCdkZCcpLmh0bWwoIG0uc3VidG90YWwgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9hZC5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDAgKTtcblxuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoWE1MSHR0cFJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggWE1MSHR0cFJlcXVlc3Quc3RhdHVzVGV4dCAhPSBcImFib3J0XCIgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJFUlJPUiEhIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9yZXF1ZXN0Q291bnRDaGFuZ2UgPSBmdW5jdGlvbiAoIGVsZW0gKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgX3JlcXVlc3QuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICBfcmVxdWVzdCA9ICQuYWpheCgge1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICQoJ2JvZHknKS5hdHRyKCdkYXRhLWFjdGlvbicpLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdjYXJ0X3F1YW50aXR5X2NoYW5nZXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW0uYXR0cignZGF0YS1wcm9kdWN0LWlkJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGVsZW0uYXR0cignZGF0YS1wcm9kdWN0LWtleScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRQcm9kdWN0OiBlbGVtLmZpbmQoJy5jb3VudC1wcm9kdWN0X19pbnB1dCcpLnZhbCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhZzogJ2NoYW5nZUNvdW50J1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImdldFwiLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAobSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtLmZpbmQoJy5teS1jYXJ0X190b3RhbC1wcmljZScpLmh0bWwoIG0udG90YWwgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90b3RhbFByaWNlLmZpbmQoJ2RkJykuaHRtbCggbS5zdWJ0b3RhbCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLm15LWNhcnRfX2Rpc2NvdW50JykuZmluZCgnZGQnKS5odG1sKCBtLmRpc2NvdW50ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2J0blJlbW92ZVByb2R1Y3QucmVtb3ZlQ2xhc3MoJ2xvYWRpbmcnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChYTUxIdHRwUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBYTUxIdHRwUmVxdWVzdC5zdGF0dXNUZXh0ICE9IFwiYWJvcnRcIiApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIkVSUk9SISEhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3JlcXVlc3RDb3Vwb25EaXNjb3VudCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9yZXF1ZXN0LmFib3J0KCk7XG4gICAgICAgICAgICAgICAgX3JlcXVlc3QgPSAkLmFqYXgoIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAkKCdib2R5JykuYXR0cignZGF0YS1hY3Rpb24nKSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnYXBwbHlfY291cG9uX3RvX29yZGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VmFsOiBfaW5wdXRDb3Vwb24udmFsKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBmbGFnOiAnY291cG9uJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImdldFwiLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAobSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBtLnN0YXR1cyA9PSAxICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kaXNjb3VudC5hZGRDbGFzcygndmlzaWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZGVmaW5lLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FwcGxpZWQuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RvdGFsUHJpY2UuZmluZCgnZGQnKS5odG1sKCBtLnN1YnRvdGFsICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kaXNjb3VudC5maW5kKCdkZCcpLmh0bWwoIG0uZGlzY291bnQgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2RlZmluZS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pbnZhbGlkLmFkZENsYXNzKCd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hcHBsaWVkLmFkZENsYXNzKCdoaWRkZW4nKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9idG5Qcm9tby5yZW1vdmVDbGFzcygnYWpheC1sb2FkaW5nJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLm15LWNhcnRfX3Byb21vLWxvYWRpbmcnKS5yZW1vdmVDbGFzcygnbG9hZGluZycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDAgKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKFhNTEh0dHBSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIFhNTEh0dHBSZXF1ZXN0LnN0YXR1c1RleHQgIT0gXCJhYm9ydFwiICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiRVJST1IhISFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfcmVxdWVzdENhbmNlbENvdXBvbkRpc2NvdW50ID0gZnVuY3Rpb24gKCApIHtcblxuICAgICAgICAgICAgICAgIF9yZXF1ZXN0LmFib3J0KCk7XG4gICAgICAgICAgICAgICAgX3JlcXVlc3QgPSAkLmFqYXgoIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAkKCdib2R5JykuYXR0cignZGF0YS1hY3Rpb24nKSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAncmVtb3ZlX2NvdXBvbl90b19vcmRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFZhbDogX2lucHV0Q291cG9uLnZhbCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhZzogJ2NvdXBvblJlbW92ZSdcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJnZXRcIixcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKG0pIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdG90YWxQcmljZS5maW5kKCdkZCcpLmh0bWwoIG0uc3VidG90YWwgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZGlzY291bnQucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZGVmaW5lLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYXBwbGllZC5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5teS1jYXJ0X19wcm9tby1sb2FkaW5nJykucmVtb3ZlQ2xhc3MoJ2xvYWRpbmcnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwICk7XG5cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKFhNTEh0dHBSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIFhNTEh0dHBSZXF1ZXN0LnN0YXR1c1RleHQgIT0gXCJhYm9ydFwiICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiRVJST1IhISFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0SGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvL19vYmouZWFjaCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSBfb2JqLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW4gPSBjdXJJdGVtLmZpbmQoJz5kaXYnKTtcblxuICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLmhlaWdodCggY2hpbGRyZW4ub3V0ZXJIZWlnaHQodHJ1ZSkgKTtcblxuICAgICAgICAgICAgICAgIC8vfSApXG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfd3JpdGVJbkNhcnQgPSAgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBuZXdDb3VudCA9IDA7XG5cbiAgICAgICAgICAgICAgICBpZiggISggX2NhcnQuaGFzQ2xhc3MoJ2NhcnRfZmlsbCcpICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgJCgnLm15LWNhcnRfX3Byb2R1Y3RzIC5jb3VudC1wcm9kdWN0X19pbnB1dCcpLmVhY2goIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBwYXJzZUludCggY3VySXRlbS52YWwoKSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdDb3VudCArPSB2YWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jYXJ0LmFwcGVuZCgnPGRpdj48L2Rpdj4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jYXJ0LmFkZENsYXNzKCdjYXJ0X2ZpbGwnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zaXRlX19oZWFkZXInKS5hZGRDbGFzcygnc2l0ZV9faGVhZGVyX2ZpbGwtY2FydCcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBuZXdDb3VudCA9PSAxICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jYXJ0LmZpbmQoJ2RpdicpLmh0bWwoIG5ld0NvdW50ICsgJyBpdGVtJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jYXJ0LmZpbmQoJ2RpdicpLmh0bWwoIG5ld0NvdW50ICsgJyBpdGVtcycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDAgKTtcblxuICAgICAgICAgICAgICAgICAgICB9LCA2MDAgKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgJCgnLm15LWNhcnRfX3Byb2R1Y3RzIC5jb3VudC1wcm9kdWN0X19pbnB1dCcpLmVhY2goIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBwYXJzZUludCggY3VySXRlbS52YWwoKSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdDb3VudCArPSB2YWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jYXJ0LmZpbmQoJ2RpdicpLmh0bWwoIG5ld0NvdW50ICsgJyBpdGVtcycpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sIDcwMCApO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgQWRkUHJvZHVjdHNUb0NhcnQgPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfaW5wdXQgPSBfb2JqLmZpbmQoJy5jb3VudC1wcm9kdWN0X19pbnB1dCcpLFxuICAgICAgICAgICAgX3ByaWNlID0gX29iai5maW5kKCcucHJvZHVjdC1zaW5nbGVfX3ByaWNlJyksXG4gICAgICAgICAgICBfYWRkVG9DYXJ0QnRuID0gX29iai5maW5kKCcucHJvZHVjdC1zaW5nbGVfX2FkZCcpLFxuICAgICAgICAgICAgX3JlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKSxcbiAgICAgICAgICAgIF9jYXJ0ID0gJCgnLmNhcnQnKSxcbiAgICAgICAgICAgIG9sZENvdW50ID0gMCxcbiAgICAgICAgICAgIG5ld0NvdW50ID0gMCxcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfYWRkVG9DYXJ0QnRuLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoIGV2ZW50ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggISggX2FkZFRvQ2FydEJ0bi5oYXNDbGFzcygnYWRkaW5nJykgKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAkKCcuZ2FsbGVyeV9fdG9wIC5zbGljay1jdXJyZW50JykubGVuZ3RoICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hbmltYXRlZEFkZGluZyggZXZlbnQgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3dyaXRlSW5DYXJ0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVxdWVzdFByb2R1Y3RBZGRUb0NhcnQoICQodGhpcykucGFyZW50cygnLnByb2R1Y3Qtc2luZ2xlX19pbmZvJykgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYWRkVG9DYXJ0QnRuLmFkZENsYXNzKCdhZGRpbmcnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hbmltYXRlZEFkZGluZyA9IGZ1bmN0aW9uKCBldmVudCApIHtcblxuICAgICAgICAgICAgICAgIHZhciBwaWMgPSAkKCcuZ2FsbGVyeV9fdG9wIC5zbGljay1jdXJyZW50JykuZGF0YSgnaW1hZ2UnKSxcblxuICAgICAgICAgICAgICAgIGUgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7XG5cbiAgICAgICAgICAgICAgICB2YXIgcGFnZVggPSBlLnBhZ2VYLFxuICAgICAgICAgICAgICAgICAgICBwYWdlWSA9IGUucGFnZVk7XG5cbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwic2l0ZV9fcHJvZHVjdCBoaWRkZW5cIiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6dXJsKCcrIHBpYyArJylcIj48L2Rpdj4nKTtcbiAgICAgICAgICAgICAgICAkKCcuc2l0ZV9fcHJvZHVjdCcpLmNzcygge1xuICAgICAgICAgICAgICAgICAgICB0b3A6ICQoJy5nYWxsZXJ5X190b3AnKS5vZmZzZXQoKS50b3AgLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiAkKCcuZ2FsbGVyeV9fdG9wJykub2Zmc2V0KCkubGVmdCxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICQoJy5nYWxsZXJ5X190b3AnKS53aWR0aCgpLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICQoJy5nYWxsZXJ5X190b3AnKS5oZWlnaHQoKVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICQoJy5zaXRlX19wcm9kdWN0JykuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNpdGVfX3Byb2R1Y3QnKS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogX2NhcnQub2Zmc2V0KCkudG9wICsgX2NhcnQuaW5uZXJIZWlnaHQoKS8yIC0gJCgnLnNpdGVfX3Byb2R1Y3QnKS5oZWlnaHQoKS8yICxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IF9jYXJ0Lm9mZnNldCgpLmxlZnQgKyBfY2FydC5pbm5lcldpZHRoKCkvMiAtICQoJy5zaXRlX19wcm9kdWN0Jykud2lkdGgoKS8yXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIH0sIDEwMCApO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgJCgnLnNpdGVfX3Byb2R1Y3QnKS5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuc2l0ZV9fcHJvZHVjdCcpLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3NjYWxlKDAuMyknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICdzY2FsZSgwLjMpJ1xuICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICB9LCA1MDAgKTtcblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICQoJy5zaXRlX19wcm9kdWN0JykucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgICAgICB9LCA3MDAgKTtcblxuXG4gICAgICAgICAgICAgICAgX3dyaXRlSW5DYXJ0KCk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfd3JpdGVJbkNhcnQgPSAgZnVuY3Rpb24oKSB7XG5cblxuICAgICAgICAgICAgICAgIGlmKCAhKCBfY2FydC5oYXNDbGFzcygnY2FydF9maWxsJykgKSApIHtcblxuICAgICAgICAgICAgICAgICAgICBuZXdDb3VudCA9IHBhcnNlSW50KCBfaW5wdXQudmFsKCkgKTtcblxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2NhcnQuYXBwZW5kKCc8ZGl2PjwvZGl2PicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NhcnQuYWRkQ2xhc3MoJ2NhcnRfZmlsbCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnNpdGVfX2hlYWRlcicpLmFkZENsYXNzKCdzaXRlX19oZWFkZXJfZmlsbC1jYXJ0Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIG5ld0NvdW50ID09IDEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NhcnQuZmluZCgnZGl2JykuaHRtbCggbmV3Q291bnQgKyAnIGl0ZW0nKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NhcnQuZmluZCgnZGl2JykuaHRtbCggbmV3Q291bnQgKyAnIGl0ZW1zJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMCApO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sIDYwMCApO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBvbGRDb3VudCA9IHBhcnNlSW50KCBfY2FydC5maW5kKCdkaXYnKS50ZXh0KCkgKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3Q291bnQgPSBwYXJzZUludCggX2lucHV0LnZhbCgpICkgKyBvbGRDb3VudDtcblxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2NhcnQuZmluZCgnZGl2JykuaHRtbCggbmV3Q291bnQgKyAnIGl0ZW1zJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSwgNzAwICk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICBfYWRkVG9DYXJ0QnRuLnJlbW92ZUNsYXNzKCdhZGRpbmcnKTtcblxuICAgICAgICAgICAgICAgIH0sIDcwMCApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3JlcXVlc3RQcm9kdWN0QWRkVG9DYXJ0ID0gZnVuY3Rpb24gKCBlbGVtICkge1xuXG4gICAgICAgICAgICAgICAgX3JlcXVlc3QuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICBfcmVxdWVzdCA9ICQuYWpheCgge1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICQoJ2JvZHknKS5hdHRyKCdkYXRhLWFjdGlvbicpLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdzaW5nbGVfYWRkX3Byb2R1Y3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW0uYXR0cignZGF0YS1pZCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRQcm9kdWN0OiBfaW5wdXQudmFsKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmljZTogX3ByaWNlLnRleHQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsYWc6ICdhZGRUb0NhcnQnXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChtKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcGFyc2VJbnQoIG0uY2FydENvdW50UHJvZHVjdHMgKSAhPSBuZXdDb3VudCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jYXJ0LmZpbmQoJ2RpdicpLmh0bWwoIG0uY2FydENvdW50UHJvZHVjdHMgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoIFhNTEh0dHBSZXF1ZXN0LCBtICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBYTUxIdHRwUmVxdWVzdC5zdGF0dXNUZXh0ICE9IFwiYWJvcnRcIiApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcGFyc2VJbnQoIG0uY2FydENvdW50UHJvZHVjdHMgKSAhPSBuZXdDb3VudCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2FydC5maW5kKCdkaXYnKS5odG1sKCBvbGRDb3VudCArICdpdGVtcycgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbn0gKSgpOyJdfQ==
